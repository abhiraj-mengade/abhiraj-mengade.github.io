{"pageProps":{"post":{"title":"Node-baserat CLI f칬r att skrapa IMDb","date":"2017-09-01T00:00:00.000Z","summary":"Enkelt CLI f칬r att f친 tag i viss information fr친n IMDb genom att skrapa sajten.","body":{"raw":"\nF칬r ett tag sedan stod jag inf칬r en uppgift som delvis gick ut p친 att anv칛nda filmer och tv-seriers IMDb ID:n. Att manuellt s칬ka upp filmer i webbl칛saren och kopiera ID:n fr친n URLen vart fort tradigt... Node-baserat CLI to the rescue!\n\nF칬r den som inte vet vad ett IMDb ID 칛r s친 칛r det kortfattat ett unikt identifieringsnummer f칬r varje film, tv-serie, sk친despelarare och s친 vidare. Dessa id:n anv칛nds bland annat i URLen p친 f칬ljande s칛tt: `http://www.imdb.com/title/tt0411008/`. Str칛ngen som b칬rjar p친 **\"tt\"** 칛r sj칛vla id:t. Just **tt0411008** 칛r id:t f칬r tv-serien Lost f칬r 칬vrigt.\n\nJag beh칬vde allts친 p친 ett smidigt s칛tt komma 친t just de h칛r numren och efter att ha gjort manuella s칬kningar p친 IMDbs hemsida ett ex antal g친nger, klickat mig in p친 r칛tt s칬kresultat och kopierat id:t fr친n URLen s친 k칛ndes hela den processen v칛ldigt tradig. Dags att effektivisera!\n\nDet h칛r var dessutom ett utm칛rkt tillf칛lle att skapa ett Node-baserat CLI och l칛ra mig lite mer om det d친 jag inte skapat s친 m친nga s친dana f칬rut men 칛r sedan tidigare relativt bekv칛m med Node och Javascript. Inte heller hade jag tidigare anv칛nt skrapning speciellt mycket med Javascrip.\n\n## Vad beh칬ver CLI:t 친tstakomma?\n\nInnan jag ens gjorde `git init` funderade jag 칬ver hur jag ville att mitt CLI skulle fungera, vad det skulle spotta ut f칬r information och b칬rjade fundera p친 vilka npm-paket som skulle kunna underl칛tta och g칬ra CLI:t b칛ttre.\n\nMin tanke var att CLI:t f칬rst skulle fr친ga anv칛ndaren efter en s칬kstr칛ng att s칬ka efter, g칬ra en request till IMDb:s hemsida och s칬kresultat, skrapa den information som beh칬vdes och spotta ut det i terminalen p친 ett 칬versk친dligt s칛tt. Jag t칛nkte mig att det fr칛mst handla om att skrapa fram titlar, 친rtal och sj칛lvfallet IMDb ID:n.\n\n### Struktur\n\nD친 jag i ett slags version 1.0.0 av CLI:t endast beh칬ver ett enkelt s칛tt att komma 친t IMDb ID:n skulle man lika g칛rna kunna skriva all kod i en och samma **index.js** fil. Men ska CLI:t l칛ngre fram kunna g칬ra mer saker blir det lite sv친rt att skala projektet och bygga vidare p친 det s친 d칛rf칬r valde jag att dela upp CLI:t i tv친 olika klasser och en **index.js**. Klasserna som skapades var en IMDb klass och en klass `queryHelper` f칬r att genomf칬ra lite manipulering av str칛ngar.\n\n### NPM-paket\n\nJag anv칛de mig av f칬ljande npm-paket f칬r att skapa mitt CLI:\n\n- [Chalk](https://www.npmjs.com/package/chalk) - F칬r att s칛tta lite f칛rg p친 bland annat `console.log`.\n- [Request](https://www.npmjs.com/package/request) - Ett enkelt s칛tt att g칬ra http requests.\n- [Cheerio](https://www.npmjs.com/package/cheerio) - F칬r att skrapa IMDbs hemsida med en jQuery-liknande syntax.\n- [Clear](https://www.npmjs.com/package/clear) - Ett paket vars enkla uppgift 칛r att rensa terminalf칬nstret.\n- [Figlet](https://www.npmjs.com/package/figlet) - Ett paket f칬r att enkelt skapa ascii-konst av text. CLI:t m친ste ju vara lite snyggt ocks친.\n- [Inquirer](https://www.npmjs.com/package/inquirer) - Anv칛ndes f칬r att fr친ga anv칛ndaren om s칬kstr칛ng och validera svaret.\n- [Ora](https://www.npmjs.com/package/ora) - Ett paket f칬r att ge anv칛ndaren lite feedback i form av en spinner undertiden som IMDb skrapas och s칬kresultatet samlas in.\n- [Table-master](https://www.npmjs.com/package/table-master) - Anv칛ndes f칬r att visa upp s칬kresultatet i en tabell.\n\n## Genomf칬rande\n\nHur bygger man d친 ett Node-baserat CLI f칬r att skrapa IMDb:s hemsida och visa upp resultatet? Jag t칛nkte h칛r g친 igenom steg f칬r steg hur det skulle kunna se ut, f칬rhoppningsvis utan att g친 in i f칬r noga detalj om allt.\n\nStarta projektet med en `npm init` f칬r att skapa generera en **package.json** f칬ljt av en `git init`. Varf칬r inte anv칛nda git liksom?\n\nInstallera d칛refter alla npm-paket som kommer att anv칛ndas:\n\n```bash\n$ npm install --save chalk request cheerio clear figlet inquirer ora table-master\n```\n\nSkapa d칛refter en **index.js** fil som agerar sj칛lva utg친ngspunkten f칬r CLI:t. De enda npm-paket som beh칬vs i just denna fil 칛r `clear` och `inquirer` d친 de 칬vriga paketen fr칛mst kommer anv칛ndas i ett senare skeda av IMDb klassen.\n\nF칬ljande kod finns i min **index.js**:\n\n```javascript:index.js showLineNumbers\nconst clear = require('clear');\nconst inquirer = require('inquirer');\n\nconst inputError = 'Please enter a query to search for...';\n\n// setup of question\nconst question = [\n  {\n    type: 'input',\n    name: 'searchString',\n    message: 'What do you want to search for?\\n',\n    validate: (value) => value.length ? true : inputError\n  }\n]\n\n// clear the terminal window\nclear();\n\n// display colorful IMDb header\nIMDb.displayHeader();\n\n// prompt the user for a search string\ninquirer.prompt(question).then((answer) => {\n  let query = new queryHelper(answer.searchString);\n  let result = new IMDb(query.getSanitizedQuery(), answer.searchString);\n  result.scrape();\n})\n\n```\n\nF칬rst och fr칛mst anv칛nds `require` f칬r att f친 in de npm-paket som anv칛nds av filen, men 칛ven importeras de tv친 klasserna som 칛n s친 l칛nge inte finns.\n\n`const question = [...]` deklarerar en fr친ga med en tillh칬rande validering. Om inte valideringen g친r igenom s친 skrivs `inputError` str칛ngen ut i terminalen.\n\nD칛refter rensas terminalf칬nstret p친 samma s칛tt som att sj칛lv skriva `clear` i terminalen.\nSedan kallas en statisk metod fr친n IMDb klassen som av sitt namn kanske avsl칬jar vad den g칬r, men mer om metoden n칛r jag g친r igenom min IMDb klass.\n\nL칛ngst ner i filen skapas sj칛lva prompten med hj칛lp av `inquirer` d칛r den tidigare question-arrayen skickas in och ett svar ges i ett promise.  \nInuti detta promise skapas f칬rst en ny instans av `queryHelper` klassen och en instans av IMDb klassen skapas med hj칛lp av en tv친 parametrar:\n\n1. Den f칬rsta parametern `query.getSanitizedQuer()` g친r ut p친 omvandla en str칛ng fr친n \"Harry Potter\" till \"Harry+Potter\" d친 det formatet beh칬vs senare n칛r IMDbs webbplats skrapas.\n2. Den andra parametern `answer.searchString` 칛r s칬kstr칛ngen som anv칛ndaren matar in i or칬rd form, det vill s칛ga exmpelvis \"Harry Potter\". Varf칬r det 칛r intressant att h친lla kvar i originals칬kstr칛ngen kommer visa sig i sj칛lva IMDb klassen.\n\nMen innan vi g친r igenom sj칛lva IMDb klassen d칛r sj칛lva tyngdlyften i det h칛r CLI:t h칛nder g친r vi igenom queryHelper klassen d친 den (i alla fall f칬r version 1.0.0) 칛r relativt liten.\n\n```javascript:queryHelper.js {7,8,9,11,12,13} showLineNumbers\nexports.queryHelper = class {\n  /**\n   * Creates an instance of queryHelper.\n   * @param {string} initialQuery\n   * @memberof queryHelper\n   */\n  constructor(initialQuery) {\n    this.query = initialQuery;\n  }\n  /**\n   * returns the query but sanitized\n   * replace all spaces with pluses\n   * @returns {string}\n   */\n  getSanitizedQuery() {\n    return this.query.replace(/ /g, '+');\n  }\n  /**\n   * Match IMDb ID's from hrefs\n   *\n   * @static\n   * @param {string} href\n   * @returns {string} containing IMDb ID\n   */\n  static getIMDbID(href) {\n    return href.match(/tt(.*)[0-9]/g).toString();\n  }\n};\n```\n\nKlassen best친r allts친 av en konstruktor och tv친 metoder. Den f칬rsta metoden `getSanitizedQuery()` returnerar en s칬kstr칛ng d칛r alla mellanrum i str칛ngen har bytts ut mot plustecken. Den andra metoden `getIMDbID()` tar **href** som parameter och resturnerar sj칛lva IMDb ID:t fr친n en URL. Den extraherar allts친 **tt0411008** fr친n **http://www.imdb.com/title/tt0411008/** Metoden 칛r statisk d칛rf칬r att IMDb klassen anv칛nder sig av denna metod, men det fanns inget behov av att skapa en ny instans av `queryHelper` inuti IMDb klassen.\n\nSlutligen har vi kvar sj칛lva IMDb klassen **IMDb.js** som best친r av ett antal metoder.\n\nF칬rst s친 anv칛nds require f칬r att f친 in de 칬vriga npm-paket som 칛nnu inte anv칛nts, men ocks친 queryHelper klassen:\n\n```javascript:IMDb.js showLineNumbers\nconst request = require('request');\nconst cheerio = require('cheerio');\nconst ora = require('ora');\nconst tab = require('table-master');\nconst chalk = require('chalk');\nconst figlet = require('figlet');\n\nconst { queryHelper } = require('./queryHelper');\n```\n\nD칛refter skapas och exporteras sj칛lva IMDb klassen med en konstruktor:\n\n```javascript:IMDb.js showLineNumbers\nexports.IMDb = class {\n\n  /**\n   * Creates an instance of IMDb.\n   * @param {string} query - search query that has been sanitized\n   * @param {string} originalQuery - The original search query\n  */\n  constructor(query, originalQuery) {\n    this.query = query;\n    this.originalQuery = originalQuery;\n    this.url = `http://www.imdb.com/search/title?title=${this.query}`;\n    this.results = [];\n    this.outputColor = chalk.hex('#f3ce13');\n  }\n}\n```\n\nKonstruktorn har tv친 parametrar och det 칛r allts친 sj칛lva s칬kstr칛ngen i dess original och i den \"plussade\" formen. D칛refter s칛tts `this.url` med hj칛lp av den plussade s칬kstr칛ngen som i en annan metod kommer anv칛ndas f칬r att g칬ra en reuqest och skrapa IMDb.  \n`this.results` 칛r en tom array som senare ska fyllas p친 med s칬kresultat och `this.outputColor` anv칛nder npm-paketet `chalk` f칬r att spara ner IMDb:s gula f칛rg som i en annan metod kommer anv칛ndas f칬r lite f칛rgrannare utskrift i terminalen.\n\nD칛refter inneh친ller klassen en statisk metod f칬r att visa lite ascii-text. Metoden 칛r statisk eftersom att den anropas i **index.js** innan en instans av sj칛lva IMDb klassen har skapats. Eftersom att metoden anropas innan klassen har skapats g친r den inte att anv칛nda IMDbf칛rgen som deklarerats som `this.outputColor` i klassens konstruktor. Det kan 칛nd친 vara bra att ha denna f칛rg sparad om den gula f칛rgen skulle anv칛ndas l칛ngre fram till andra saker ocks친.\n\n```javascript:IMDb.js showLineNumbers\n  /**\n   * Static method to display IMDB header for the CLI\n   *\n   */\n  static displayHeader() {\n    var imdbColor = chalk.hex('#f3ce13');\n    console.log(imdbColor(figlet.textSync('IMDb')));\n  }\n```\n\nF칬r att bygga ut `this.results` arrayen skapas ytterligare en metod p친 IMDb klassen som kan se ut p친 f칬ljande vis:\n\n```javascript:IMDb.js showLineNumbers\n  /**\n   * Push to results array\n   *\n   * @param {any} title\n   * @param {any} year\n   * @param {any} imdbID\n   */\n  createSearchResult(title, year, imdbID) {\n    this.results.push({title, year, imdbID});\n  }\n```\n\nDenna metod anv칛nder `push` f칬r att bygga ut arrayen med ett objekt som inneh친ller titel, 친rtal och IMDb ID.\n\nIMDb klassen inneh친ller sedan en n친got tung metod f칬r att utf칬ra sj칛lva skrapandet av IMDb och komma 친t s칬kresultaten. Metoden g친r kort och gott ut p친 att g칬ra en request till IMDb och loopa genom ett ex antal s칬kresultat och pusha dessa till `this.results`\n\n```javascript:IMDb.js showLineNumbers\n /**\n   * Perform the scrape of imdb to gather search results\n   *\n   */\n  scrape() {\n\n    const spinner = ora('Searching IMDb. Please wait...').start();\n    request(this.url, (error, response, body) => {\n\n      if (!error) {\n\n        let $ = cheerio.load(body);\n\n        $('.lister-item-header a').each((index, value) => {\n          // create variables to be pushed as search result\n          let title = $(value).text();\n          let year = $(value).next().text().replace(/\\D/g, '');\n          let imdbID = this.outputColor(queryHelper.getIMDbID($(value).attr('href')));\n\n          this.createSearchResult(title, year, imdbID);\n\n          // stop the loop after 15 items\n          return index < 14;\n        });\n\n        spinner.stop();\n        this.renderSearchResults();\n\n      } else {\n        spinner.stop();\n        console.log(`Program exit with error: ${error}`);\n      }\n    });\n  }\n```\n\nN친gra nyckeldetaljer i den h칛r metoden 칛r att f칬rst och fr칛mst anv칛nds `ora` npm-paketet f칬r att starta en spinner som ger anv칛ndaren lite feedback. S칬kresultaten loopas genom med hj칛lp av `cheerio` och `$(.lister-item-header a).each()` d칛r titlar, 친rtal och id:n sparas till `this.results` med hj칛lp av metoden `this.createSearchResult()`.\n\nN칛r loopen har stannat efter att de femton f칬rsta s칬kresultaten har pushats till `this.results` stoppas spinnern med hj칛lp av `spinner.stop()` och en tabell med s칬kresultaten visas upp i terminalen med hj칛lp av metoden `this.renderSearchResults()`. Den metoden ser ut p친 f칬ljande vis:\n\n```javascript:IMDb.js showLineNumbers\n  /**\n   * Render either a table with search results\n   * or a message of no search results were found\n   */\n  renderSearchResults() {\n    if (Object.keys(this.results).length === 0) {\n      console.log(chalk.red(`Could not find any search results for \"${this.originalQuery}\". Please try again.`));\n    } else {\n      console.table(this.results);\n    }\n  }\n```\n\nDenna metod kollar f칬rst om `this.results` 칛r tom (inga s칬kresultat hittades) eller ej och antingen renderar en tabell med s칬kresultaten eller ger feedback om att inga s칬kresultat kunde hittas. H칛r anv칛nds `this.originalQuery` som allts친 exempelvis skulle motsvara `Harry Potter` och inte `Harry+Potter`.\n\n### G칬r CLI:t k칬rbart globalt\n\nF칬r att slippa skriva `node index.js` och hela tiden befinna sig i samma path som **index.js** finns det ett enkelt knep att g칬ra det h칛r CLI:t globalt tillg칛ngligt genom att endast skriva exempelvis `imdb` i terminalen, oberoende vilken path man har.\n\nB칬rja med att uppgradera **package.json** med f칬ljande:\n\n```json:package.json\n  \"bin\": {\n    \"imdb\": \"./index.js\"\n  }\n```\n\nDetta binder kommandot `imdb` till att k칬ra **index.js**. L칛gg d칛refter till f칬ljande shebang h칬gst upp i **index.js**:\n\n```javascript:index.js showLineNumbers\n#!/usr/bin/env node\nconst clear = require('clear');\nconst inquirer = require('inquirer');\n\n//........\n```\n\nInstallera d칛refter CLI:t globalt med hj칛lp av:\n\n```bash\n$ npm install -g\n```\n\nNu 칛r CLI:t k칬rbart globalt 游꿀\n\nDet var kort och gott all funktionalitet som finns i skrivande stund i detta Node-baserade CLI som skrapar IMDb efter s칬kresultat och IMDb ID:n. Det f칛rdiga CLI:et finns p친 [GitHub](https://github.com/danielv14/imdb-cli)\n","code":"var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=>{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},i=(a,n,s,t)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of h(n))!k.call(a,c)&&c!==s&&l(a,c,{get:()=>n[c],enumerable:!(t=m(n,c))||t.enumerable});return a};var b=(a,n,s)=>(s=a!=null?d(u(a)):{},i(n||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),f=a=>i(l({},\"__esModule\",{value:!0}),a);var o=N((D,r)=>{r.exports=_jsx_runtime});var j={};g(j,{default:()=>w,frontmatter:()=>y});var e=b(o()),y={title:\"Node-baserat CLI f\\xF6r att skrapa IMDb\",summary:\"Enkelt CLI f\\xF6r att f\\xE5 tag i viss information fr\\xE5n IMDb genom att skrapa sajten.\",date:new Date(1504224e6)};function p(a){let n=Object.assign({p:\"p\",code:\"code\",strong:\"strong\",h2:\"h2\",a:\"a\",span:\"span\",h3:\"h3\",ul:\"ul\",li:\"li\",pre:\"pre\",div:\"div\",br:\"br\",ol:\"ol\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"F\\xF6r ett tag sedan stod jag inf\\xF6r en uppgift som delvis gick ut p\\xE5 att anv\\xE4nda filmer och tv-seriers IMDb ID:n. Att manuellt s\\xF6ka upp filmer i webbl\\xE4saren och kopiera ID:n fr\\xE5n URLen vart fort tradigt... Node-baserat CLI to the rescue!\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r den som inte vet vad ett IMDb ID \\xE4r s\\xE5 \\xE4r det kortfattat ett unikt identifieringsnummer f\\xF6r varje film, tv-serie, sk\\xE5despelarare och s\\xE5 vidare. Dessa id:n anv\\xE4nds bland annat i URLen p\\xE5 f\\xF6ljande s\\xE4tt: \",(0,e.jsx)(n.code,{children:\"http://www.imdb.com/title/tt0411008/\"}),\". Str\\xE4ngen som b\\xF6rjar p\\xE5 \",(0,e.jsx)(n.strong,{children:'\"tt\"'}),\" \\xE4r sj\\xE4vla id:t. Just \",(0,e.jsx)(n.strong,{children:\"tt0411008\"}),\" \\xE4r id:t f\\xF6r tv-serien Lost f\\xF6r \\xF6vrigt.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Jag beh\\xF6vde allts\\xE5 p\\xE5 ett smidigt s\\xE4tt komma \\xE5t just de h\\xE4r numren och efter att ha gjort manuella s\\xF6kningar p\\xE5 IMDbs hemsida ett ex antal g\\xE5nger, klickat mig in p\\xE5 r\\xE4tt s\\xF6kresultat och kopierat id:t fr\\xE5n URLen s\\xE5 k\\xE4ndes hela den processen v\\xE4ldigt tradig. Dags att effektivisera!\"}),`\n`,(0,e.jsx)(n.p,{children:\"Det h\\xE4r var dessutom ett utm\\xE4rkt tillf\\xE4lle att skapa ett Node-baserat CLI och l\\xE4ra mig lite mer om det d\\xE5 jag inte skapat s\\xE5 m\\xE5nga s\\xE5dana f\\xF6rut men \\xE4r sedan tidigare relativt bekv\\xE4m med Node och Javascript. Inte heller hade jag tidigare anv\\xE4nt skrapning speciellt mycket med Javascrip.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"vad-beh\\xF6ver-clit-\\xE5tstakomma\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#vad-beh\\xF6ver-clit-\\xE5tstakomma\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Vad beh\\xF6ver CLI:t \\xE5tstakomma?\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Innan jag ens gjorde \",(0,e.jsx)(n.code,{children:\"git init\"}),\" funderade jag \\xF6ver hur jag ville att mitt CLI skulle fungera, vad det skulle spotta ut f\\xF6r information och b\\xF6rjade fundera p\\xE5 vilka npm-paket som skulle kunna underl\\xE4tta och g\\xF6ra CLI:t b\\xE4ttre.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Min tanke var att CLI:t f\\xF6rst skulle fr\\xE5ga anv\\xE4ndaren efter en s\\xF6kstr\\xE4ng att s\\xF6ka efter, g\\xF6ra en request till IMDb:s hemsida och s\\xF6kresultat, skrapa den information som beh\\xF6vdes och spotta ut det i terminalen p\\xE5 ett \\xF6versk\\xE5dligt s\\xE4tt. Jag t\\xE4nkte mig att det fr\\xE4mst handla om att skrapa fram titlar, \\xE5rtal och sj\\xE4lvfallet IMDb ID:n.\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"struktur\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#struktur\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Struktur\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"D\\xE5 jag i ett slags version 1.0.0 av CLI:t endast beh\\xF6ver ett enkelt s\\xE4tt att komma \\xE5t IMDb ID:n skulle man lika g\\xE4rna kunna skriva all kod i en och samma \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" fil. Men ska CLI:t l\\xE4ngre fram kunna g\\xF6ra mer saker blir det lite sv\\xE5rt att skala projektet och bygga vidare p\\xE5 det s\\xE5 d\\xE4rf\\xF6r valde jag att dela upp CLI:t i tv\\xE5 olika klasser och en \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\". Klasserna som skapades var en IMDb klass och en klass \",(0,e.jsx)(n.code,{children:\"queryHelper\"}),\" f\\xF6r att genomf\\xF6ra lite manipulering av str\\xE4ngar.\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"npm-paket\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#npm-paket\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"NPM-paket\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Jag anv\\xE4de mig av f\\xF6ljande npm-paket f\\xF6r att skapa mitt CLI:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/chalk\",children:\"Chalk\"}),\" - F\\xF6r att s\\xE4tta lite f\\xE4rg p\\xE5 bland annat \",(0,e.jsx)(n.code,{children:\"console.log\"}),\".\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/request\",children:\"Request\"}),\" - Ett enkelt s\\xE4tt att g\\xF6ra http requests.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/cheerio\",children:\"Cheerio\"}),\" - F\\xF6r att skrapa IMDbs hemsida med en jQuery-liknande syntax.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/clear\",children:\"Clear\"}),\" - Ett paket vars enkla uppgift \\xE4r att rensa terminalf\\xF6nstret.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/figlet\",children:\"Figlet\"}),\" - Ett paket f\\xF6r att enkelt skapa ascii-konst av text. CLI:t m\\xE5ste ju vara lite snyggt ocks\\xE5.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/inquirer\",children:\"Inquirer\"}),\" - Anv\\xE4ndes f\\xF6r att fr\\xE5ga anv\\xE4ndaren om s\\xF6kstr\\xE4ng och validera svaret.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/ora\",children:\"Ora\"}),\" - Ett paket f\\xF6r att ge anv\\xE4ndaren lite feedback i form av en spinner undertiden som IMDb skrapas och s\\xF6kresultatet samlas in.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/table-master\",children:\"Table-master\"}),\" - Anv\\xE4ndes f\\xF6r att visa upp s\\xF6kresultatet i en tabell.\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"genomf\\xF6rande\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#genomf\\xF6rande\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Genomf\\xF6rande\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Hur bygger man d\\xE5 ett Node-baserat CLI f\\xF6r att skrapa IMDb:s hemsida och visa upp resultatet? Jag t\\xE4nkte h\\xE4r g\\xE5 igenom steg f\\xF6r steg hur det skulle kunna se ut, f\\xF6rhoppningsvis utan att g\\xE5 in i f\\xF6r noga detalj om allt.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Starta projektet med en \",(0,e.jsx)(n.code,{children:\"npm init\"}),\" f\\xF6r att skapa generera en \",(0,e.jsx)(n.strong,{children:\"package.json\"}),\" f\\xF6ljt av en \",(0,e.jsx)(n.code,{children:\"git init\"}),\". Varf\\xF6r inte anv\\xE4nda git liksom?\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Installera d\\xE4refter alla npm-paket som kommer att anv\\xE4ndas:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"--save\"}),\" chalk request cheerio \",(0,e.jsx)(n.span,{className:\"token function\",children:\"clear\"}),` figlet inquirer ora table-master\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Skapa d\\xE4refter en \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" fil som agerar sj\\xE4lva utg\\xE5ngspunkten f\\xF6r CLI:t. De enda npm-paket som beh\\xF6vs i just denna fil \\xE4r \",(0,e.jsx)(n.code,{children:\"clear\"}),\" och \",(0,e.jsx)(n.code,{children:\"inquirer\"}),\" d\\xE5 de \\xF6vriga paketen fr\\xE4mst kommer anv\\xE4ndas i ett senare skeda av IMDb klassen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6ljande kod finns i min \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\":\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"index.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" clear \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'clear'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inquirer \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'inquirer'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inputError \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Please enter a query to search for...'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// setup of question\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" question \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'input'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'searchString'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"11\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"message\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'What do you want to search for?\\\\n'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"12\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"validate\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),` inputError\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"13\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"15\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"16\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// clear the terminal window\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"17\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"clear\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"18\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"19\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// display colorful IMDb header\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"20\",children:[(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"IMDb\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"displayHeader\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"21\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"22\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// prompt the user for a search string\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"23\",children:[\"inquirer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"prompt\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"question\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"answer\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"24\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" query \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"queryHelper\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"answer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"searchString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"25\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" result \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"IMDb\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"getSanitizedQuery\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" answer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"searchString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"26\",children:[\"  result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"scrape\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"27\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"28\",children:`\n`})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6rst och fr\\xE4mst anv\\xE4nds \",(0,e.jsx)(n.code,{children:\"require\"}),\" f\\xF6r att f\\xE5 in de npm-paket som anv\\xE4nds av filen, men \\xE4ven importeras de tv\\xE5 klasserna som \\xE4n s\\xE5 l\\xE4nge inte finns.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"const question = [...]\"}),\" deklarerar en fr\\xE5ga med en tillh\\xF6rande validering. Om inte valideringen g\\xE5r igenom s\\xE5 skrivs \",(0,e.jsx)(n.code,{children:\"inputError\"}),\" str\\xE4ngen ut i terminalen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"D\\xE4refter rensas terminalf\\xF6nstret p\\xE5 samma s\\xE4tt som att sj\\xE4lv skriva \",(0,e.jsx)(n.code,{children:\"clear\"}),` i terminalen.\nSedan kallas en statisk metod fr\\xE5n IMDb klassen som av sitt namn kanske avsl\\xF6jar vad den g\\xF6r, men mer om metoden n\\xE4r jag g\\xE5r igenom min IMDb klass.`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"L\\xE4ngst ner i filen skapas sj\\xE4lva prompten med hj\\xE4lp av \",(0,e.jsx)(n.code,{children:\"inquirer\"}),\" d\\xE4r den tidigare question-arrayen skickas in och ett svar ges i ett promise.\",(0,e.jsx)(n.br,{}),`\n`,\"Inuti detta promise skapas f\\xF6rst en ny instans av \",(0,e.jsx)(n.code,{children:\"queryHelper\"}),\" klassen och en instans av IMDb klassen skapas med hj\\xE4lp av en tv\\xE5 parametrar:\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Den f\\xF6rsta parametern \",(0,e.jsx)(n.code,{children:\"query.getSanitizedQuer()\"}),' g\\xE5r ut p\\xE5 omvandla en str\\xE4ng fr\\xE5n \"Harry Potter\" till \"Harry+Potter\" d\\xE5 det formatet beh\\xF6vs senare n\\xE4r IMDbs webbplats skrapas.']}),`\n`,(0,e.jsxs)(n.li,{children:[\"Den andra parametern \",(0,e.jsx)(n.code,{children:\"answer.searchString\"}),' \\xE4r s\\xF6kstr\\xE4ngen som anv\\xE4ndaren matar in i or\\xF6rd form, det vill s\\xE4ga exmpelvis \"Harry Potter\". Varf\\xF6r det \\xE4r intressant att h\\xE5lla kvar i originals\\xF6kstr\\xE4ngen kommer visa sig i sj\\xE4lva IMDb klassen.']}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Men innan vi g\\xE5r igenom sj\\xE4lva IMDb klassen d\\xE4r sj\\xE4lva tyngdlyften i det h\\xE4r CLI:t h\\xE4nder g\\xE5r vi igenom queryHelper klassen d\\xE5 den (i alla fall f\\xF6r version 1.0.0) \\xE4r relativt liten.\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"queryHelper.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"exports\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"queryHelper\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Creates an instance of queryHelper.\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"initialQuery\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@memberof\"}),` queryHelper\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"7\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"constructor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"initialQuery\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"8\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" initialQuery\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"9\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * returns the query but sanitized\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * replace all spaces with pluses\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@returns\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"15\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getSanitizedQuery\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"16\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-source language-regex\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'+'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"17\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"18\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"19\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Match IMDb ID's from hrefs\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"20\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"21\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@static\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"22\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"href\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"23\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@returns\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),` containing IMDb ID\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"24\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"25\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"static\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getIMDbID\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"href\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"26\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" href\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"match\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsxs)(n.span,{className:\"token regex-source language-regex\",children:[\"tt\",(0,e.jsx)(n.span,{className:\"token group punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token char-set class-name\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token quantifier number\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token group punctuation\",children:\")\"}),(0,e.jsxs)(n.span,{className:\"token char-class\",children:[(0,e.jsx)(n.span,{className:\"token char-class-punctuation punctuation\",children:\"[\"}),(0,e.jsxs)(n.span,{className:\"token range\",children:[\"0\",(0,e.jsx)(n.span,{className:\"token range-punctuation operator\",children:\"-\"}),\"9\"]}),(0,e.jsx)(n.span,{className:\"token char-class-punctuation punctuation\",children:\"]\"})]})]}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"toString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"27\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"28\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Klassen best\\xE5r allts\\xE5 av en konstruktor och tv\\xE5 metoder. Den f\\xF6rsta metoden \",(0,e.jsx)(n.code,{children:\"getSanitizedQuery()\"}),\" returnerar en s\\xF6kstr\\xE4ng d\\xE4r alla mellanrum i str\\xE4ngen har bytts ut mot plustecken. Den andra metoden \",(0,e.jsx)(n.code,{children:\"getIMDbID()\"}),\" tar \",(0,e.jsx)(n.strong,{children:\"href\"}),\" som parameter och resturnerar sj\\xE4lva IMDb ID:t fr\\xE5n en URL. Den extraherar allts\\xE5 \",(0,e.jsx)(n.strong,{children:\"tt0411008\"}),\" fr\\xE5n \",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.a,{href:\"http://www.imdb.com/title/tt0411008/\",children:\"http://www.imdb.com/title/tt0411008/\"})}),\" Metoden \\xE4r statisk d\\xE4rf\\xF6r att IMDb klassen anv\\xE4nder sig av denna metod, men det fanns inget behov av att skapa en ny instans av \",(0,e.jsx)(n.code,{children:\"queryHelper\"}),\" inuti IMDb klassen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Slutligen har vi kvar sj\\xE4lva IMDb klassen \",(0,e.jsx)(n.strong,{children:\"IMDb.js\"}),\" som best\\xE5r av ett antal metoder.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"F\\xF6rst s\\xE5 anv\\xE4nds require f\\xF6r att f\\xE5 in de \\xF6vriga npm-paket som \\xE4nnu inte anv\\xE4nts, men ocks\\xE5 queryHelper klassen:\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" request \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'request'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" cheerio \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'cheerio'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" ora \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'ora'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" tab \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'table-master'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" chalk \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'chalk'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" figlet \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'figlet'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" queryHelper \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'./queryHelper'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"D\\xE4refter skapas och exporteras sj\\xE4lva IMDb klassen med en konstruktor:\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"exports\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"IMDb\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Creates an instance of IMDb.\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"query\"}),` - search query that has been sanitized\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"6\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"originalQuery\"}),` - The original search query\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"  */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"constructor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" originalQuery\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"originalQuery\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" originalQuery\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"11\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"url\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"http://www.imdb.com/search/title?title=\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"12\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"13\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"outputColor\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" chalk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"hex\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'#f3ce13'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"15\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:['Konstruktorn har tv\\xE5 parametrar och det \\xE4r allts\\xE5 sj\\xE4lva s\\xF6kstr\\xE4ngen i dess original och i den \"plussade\" formen. D\\xE4refter s\\xE4tts ',(0,e.jsx)(n.code,{children:\"this.url\"}),\" med hj\\xE4lp av den plussade s\\xF6kstr\\xE4ngen som i en annan metod kommer anv\\xE4ndas f\\xF6r att g\\xF6ra en reuqest och skrapa IMDb.\",(0,e.jsx)(n.br,{}),`\n`,(0,e.jsx)(n.code,{children:\"this.results\"}),\" \\xE4r en tom array som senare ska fyllas p\\xE5 med s\\xF6kresultat och \",(0,e.jsx)(n.code,{children:\"this.outputColor\"}),\" anv\\xE4nder npm-paketet \",(0,e.jsx)(n.code,{children:\"chalk\"}),\" f\\xF6r att spara ner IMDb:s gula f\\xE4rg som i en annan metod kommer anv\\xE4ndas f\\xF6r lite f\\xE4rgrannare utskrift i terminalen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"D\\xE4refter inneh\\xE5ller klassen en statisk metod f\\xF6r att visa lite ascii-text. Metoden \\xE4r statisk eftersom att den anropas i \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" innan en instans av sj\\xE4lva IMDb klassen har skapats. Eftersom att metoden anropas innan klassen har skapats g\\xE5r den inte att anv\\xE4nda IMDbf\\xE4rgen som deklarerats som \",(0,e.jsx)(n.code,{children:\"this.outputColor\"}),\" i klassens konstruktor. Det kan \\xE4nd\\xE5 vara bra att ha denna f\\xE4rg sparad om den gula f\\xE4rgen skulle anv\\xE4ndas l\\xE4ngre fram till andra saker ocks\\xE5.\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Static method to display IMDB header for the CLI\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"static\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"displayHeader\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" imdbColor \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" chalk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"hex\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'#f3ce13'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"imdbColor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"figlet\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"textSync\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'IMDb'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r att bygga ut \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" arrayen skapas ytterligare en metod p\\xE5 IMDb klassen som kan se ut p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Push to results array\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"title\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"year\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"6\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"imdbID\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createSearchResult\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" year\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" imdbID\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"push\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" year\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" imdbID\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Denna metod anv\\xE4nder \",(0,e.jsx)(n.code,{children:\"push\"}),\" f\\xF6r att bygga ut arrayen med ett objekt som inneh\\xE5ller titel, \\xE5rtal och IMDb ID.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"IMDb klassen inneh\\xE5ller sedan en n\\xE5got tung metod f\\xF6r att utf\\xF6ra sj\\xE4lva skrapandet av IMDb och komma \\xE5t s\\xF6kresultaten. Metoden g\\xE5r kort och gott ut p\\xE5 att g\\xF6ra en request till IMDb och loopa genom ett ex antal s\\xF6kresultat och pusha dessa till \",(0,e.jsx)(n.code,{children:\"this.results\"})]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\" \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Perform the scrape of imdb to gather search results\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"scrape\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"6\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" spinner \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"ora\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Searching IMDb. Please wait...'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"start\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"request\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"url\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" body\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"9\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"11\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"12\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" $ \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" cheerio\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"load\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"body\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"13\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'.lister-item-header a'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"each\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"index\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" value\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"15\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// create variables to be pushed as search result\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"16\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" title \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"text\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"17\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" year \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"next\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"text\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-source language-regex\",children:(0,e.jsx)(n.span,{className:\"token char-set class-name\",children:\"\\\\D\"})}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"18\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" imdbID \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"outputColor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"queryHelper\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"getIMDbID\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'href'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"19\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"20\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"createSearchResult\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" year\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" imdbID\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"21\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"22\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// stop the loop after 15 items\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"23\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" index \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"14\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"24\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"25\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"26\",children:[\"        spinner\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"stop\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"27\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"renderSearchResults\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"28\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"29\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"30\",children:[\"        spinner\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"stop\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"31\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"Program exit with error: \"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"error\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"32\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"33\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"34\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"N\\xE5gra nyckeldetaljer i den h\\xE4r metoden \\xE4r att f\\xF6rst och fr\\xE4mst anv\\xE4nds \",(0,e.jsx)(n.code,{children:\"ora\"}),\" npm-paketet f\\xF6r att starta en spinner som ger anv\\xE4ndaren lite feedback. S\\xF6kresultaten loopas genom med hj\\xE4lp av \",(0,e.jsx)(n.code,{children:\"cheerio\"}),\" och \",(0,e.jsx)(n.code,{children:\"$(.lister-item-header a).each()\"}),\" d\\xE4r titlar, \\xE5rtal och id:n sparas till \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" med hj\\xE4lp av metoden \",(0,e.jsx)(n.code,{children:\"this.createSearchResult()\"}),\".\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"N\\xE4r loopen har stannat efter att de femton f\\xF6rsta s\\xF6kresultaten har pushats till \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" stoppas spinnern med hj\\xE4lp av \",(0,e.jsx)(n.code,{children:\"spinner.stop()\"}),\" och en tabell med s\\xF6kresultaten visas upp i terminalen med hj\\xE4lp av metoden \",(0,e.jsx)(n.code,{children:\"this.renderSearchResults()\"}),\". Den metoden ser ut p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Render either a table with search results\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * or a message of no search results were found\n`})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"renderSearchResults\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Object\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"keys\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"===\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"chalk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"red\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'Could not find any search results for \"'}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"originalQuery\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:'\". Please try again.'}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"table\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"11\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Denna metod kollar f\\xF6rst om \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" \\xE4r tom (inga s\\xF6kresultat hittades) eller ej och antingen renderar en tabell med s\\xF6kresultaten eller ger feedback om att inga s\\xF6kresultat kunde hittas. H\\xE4r anv\\xE4nds \",(0,e.jsx)(n.code,{children:\"this.originalQuery\"}),\" som allts\\xE5 exempelvis skulle motsvara \",(0,e.jsx)(n.code,{children:\"Harry Potter\"}),\" och inte \",(0,e.jsx)(n.code,{children:\"Harry+Potter\"}),\".\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"g\\xF6r-clit-k\\xF6rbart-globalt\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#g\\xF6r-clit-k\\xF6rbart-globalt\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"G\\xF6r CLI:t k\\xF6rbart globalt\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r att slippa skriva \",(0,e.jsx)(n.code,{children:\"node index.js\"}),\" och hela tiden befinna sig i samma path som \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" finns det ett enkelt knep att g\\xF6ra det h\\xE4r CLI:t globalt tillg\\xE4ngligt genom att endast skriva exempelvis \",(0,e.jsx)(n.code,{children:\"imdb\"}),\" i terminalen, oberoende vilken path man har.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"B\\xF6rja med att uppgradera \",(0,e.jsx)(n.strong,{children:\"package.json\"}),\" med f\\xF6ljande:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"package.json\"}),(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"language-json code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"bin\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"imdb\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"./index.js\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Detta binder kommandot \",(0,e.jsx)(n.code,{children:\"imdb\"}),\" till att k\\xF6ra \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\". L\\xE4gg d\\xE4refter till f\\xF6ljande shebang h\\xF6gst upp i \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\":\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"index.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token hashbang comment\",children:\"#!/usr/bin/env node\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" clear \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'clear'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inquirer \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'inquirer'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"//........\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Installera d\\xE4refter CLI:t globalt med hj\\xE4lp av:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"-g\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"Nu \\xE4r CLI:t k\\xF6rbart globalt \\u{1F389}\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Det var kort och gott all funktionalitet som finns i skrivande stund i detta Node-baserade CLI som skrapar IMDb efter s\\xF6kresultat och IMDb ID:n. Det f\\xE4rdiga CLI:et finns p\\xE5 \",(0,e.jsx)(n.a,{href:\"https://github.com/danielv14/imdb-cli\",children:\"GitHub\"})]})]})}function v(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var w=v;return f(j);})();\n;return Component;"},"_id":"posts/node-cli-for-att-skrapa-imdb.mdx","_raw":{"sourceFilePath":"posts/node-cli-for-att-skrapa-imdb.mdx","sourceFileName":"node-cli-for-att-skrapa-imdb.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/node-cli-for-att-skrapa-imdb"},"type":"Post","url":"/blogg/node-cli-for-att-skrapa-imdb","dateFormatted":"2017-09-01"},"prevPost":{"title":"Ladda ned trailers via terminalen","date":"2017-03-30T00:00:00.000Z","summary":"Kombinera cli-verktyg f칬r att snabbt och enkelt ladda ned trailers fr친n YouTube.","body":{"raw":"\nLadda ned trailers fr친n YouTube har aldrig varit smidigare 칛n den h칛r ihopslagningen av tv친 CLI-verktyg.\n\n> Det h칛r inl칛gget har egentligen inte speciellt mycket med just utveckling att g칬ra men jag tycker 칛nd친 det 칛r ett litet beh칛ndigt tips som kan uppskattas 칛nd친.\n\nAnledningarna kan vara m친nga till att beh칬va kolla p친 trailers och i mitt fall handlar det om att trailers hj칛lper mig best칛mma vilken rulle man ska se f칬r kv칛llen. Dessutom anv칛nder jag mig av ett [plexbibliotek](https://www.plex.tv/) och genom att ladda ner trailers p친 f칬rhand kan jag streama filmtrailers innan jag best칛mmer mig f칬r vilken film i biblioteket jag ska se. Det g칬r jag genom att kombinera [youtube-dl](https://rg3.github.io/youtube-dl/) och [movie-trailer](https://www.npmjs.com/package/movie-trailer).\n\n**youtube-dl** 칛r ett smidigt och flexibelt CLI verktyg f칬r att ladda ned fr친n YouTube medan `movie-trailer` 칛r ett CLI verktyg f칬r att lokalisera URL's till trailers p친 YouTube. Kombinerar man dessa kan man v칛ldigt enkelt ladda ned en trailer utan att ens bes칬ka YouTube.\n\n## Installation\n\n**youtube-dl** installeras enklast med hj칛lp av Homebrew, men andra installationsalternativ finns p친 [hemsidan](https://rg3.github.io/youtube-dl/). I alla fall s친 installeras det p친 f칬ljande vis med Homebrew:\n\n```bash\n$ brew install youtube-dl\n```\n\nF칬r att `youtube-dl` ska fungera s친 bra som m칬jligt (ibland m친ste verktyget omvandla fr친n ett filformat till ett annat) 칛r det rekommenderat att man installer `ffmpeg` ocks친. Lyckligtvis g친r det att bra att installera `ffmpeg` med hj칛lp av Homebrew:\n\n```bash\n$ brew install ffmpeg\n```\n\n**movie-trailer** 친 andra sidan kommer fr친n [npm](https://www.npmjs.com/) och installeras p친 f칬ljande vis (f칬rutsatt att npm 칛r installerat p친 din maskin):\n\n```bash\n# Installera movie-trailer globalt\n$ npm install --global movie-trailer\n```\n\n## Kombinera verktygen\n\nN칛r b칛gge CLI verktygen 칛r installerade kan det kombineras genom att skapa f칬ljande funktion i din `~/.bashrc`, `~/.bash_profile` eller `~/.zshrc` som i mitt fall d친 jag anv칛nder zsh ist칛llet f칬r bash.\n\n```bash:~/.zshrc showLineNumbers\nfunction trailer-dl() {\n    echo \"Downloading trailer\"\n    if [ -n $2 ]\n    then\n      # Ladda ned efter endast filmtitel\n      youtube-dl --output \"$1-trailer.%(ext)s\" $(movie-trailer \"$1\")\n    else\n      # Ladda ned efter 친rtal ocks친\n      youtube-dl --output \"$1-trailer.%(ext)s\" $(movie-trailer \"$1\" \"$2\" )\n    fi\n}\n```\n\n**movie-trailer** kan antingen s칬ka efter URL till en trailer efter enbart namnet p친 en film eller ocks친 namnet plus 친rtalet. S친ledes inneh친ller funktionen ovan tv친 scenarion beroende p친 om man anger ett 친rtal eller ej.\n","code":"var Component=(()=>{var m=Object.create;var r=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),b=(a,e)=>{for(var l in e)r(a,l,{get:e[l],enumerable:!0})},s=(a,e,l,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of p(e))!g.call(a,i)&&i!==l&&r(a,i,{get:()=>e[i],enumerable:!(t=h(e,i))||t.enumerable});return a};var N=(a,e,l)=>(l=a!=null?m(k(a)):{},s(e||!a||!a.__esModule?r(l,\"default\",{value:a,enumerable:!0}):l,a)),f=a=>s(r({},\"__esModule\",{value:!0}),a);var d=u((L,c)=>{c.exports=_jsx_runtime});var w={};b(w,{default:()=>j,frontmatter:()=>v});var n=N(d()),v={title:\"Ladda ned trailers via terminalen\",summary:\"Kombinera cli-verktyg f\\xF6r att snabbt och enkelt ladda ned trailers fr\\xE5n YouTube.\",date:new Date(1490832e6)};function o(a){let e=Object.assign({p:\"p\",blockquote:\"blockquote\",a:\"a\",strong:\"strong\",code:\"code\",h2:\"h2\",span:\"span\",pre:\"pre\",div:\"div\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Ladda ned trailers fr\\xE5n YouTube har aldrig varit smidigare \\xE4n den h\\xE4r ihopslagningen av tv\\xE5 CLI-verktyg.\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Det h\\xE4r inl\\xE4gget har egentligen inte speciellt mycket med just utveckling att g\\xF6ra men jag tycker \\xE4nd\\xE5 det \\xE4r ett litet beh\\xE4ndigt tips som kan uppskattas \\xE4nd\\xE5.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Anledningarna kan vara m\\xE5nga till att beh\\xF6va kolla p\\xE5 trailers och i mitt fall handlar det om att trailers hj\\xE4lper mig best\\xE4mma vilken rulle man ska se f\\xF6r kv\\xE4llen. Dessutom anv\\xE4nder jag mig av ett \",(0,n.jsx)(e.a,{href:\"https://www.plex.tv/\",children:\"plexbibliotek\"}),\" och genom att ladda ner trailers p\\xE5 f\\xF6rhand kan jag streama filmtrailers innan jag best\\xE4mmer mig f\\xF6r vilken film i biblioteket jag ska se. Det g\\xF6r jag genom att kombinera \",(0,n.jsx)(e.a,{href:\"https://rg3.github.io/youtube-dl/\",children:\"youtube-dl\"}),\" och \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/movie-trailer\",children:\"movie-trailer\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"youtube-dl\"}),\" \\xE4r ett smidigt och flexibelt CLI verktyg f\\xF6r att ladda ned fr\\xE5n YouTube medan \",(0,n.jsx)(e.code,{children:\"movie-trailer\"}),\" \\xE4r ett CLI verktyg f\\xF6r att lokalisera URL's till trailers p\\xE5 YouTube. Kombinerar man dessa kan man v\\xE4ldigt enkelt ladda ned en trailer utan att ens bes\\xF6ka YouTube.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"installation\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#installation\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Installation\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"youtube-dl\"}),\" installeras enklast med hj\\xE4lp av Homebrew, men andra installationsalternativ finns p\\xE5 \",(0,n.jsx)(e.a,{href:\"https://rg3.github.io/youtube-dl/\",children:\"hemsidan\"}),\". I alla fall s\\xE5 installeras det p\\xE5 f\\xF6ljande vis med Homebrew:\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ brew \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),` youtube-dl\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"F\\xF6r att \",(0,n.jsx)(e.code,{children:\"youtube-dl\"}),\" ska fungera s\\xE5 bra som m\\xF6jligt (ibland m\\xE5ste verktyget omvandla fr\\xE5n ett filformat till ett annat) \\xE4r det rekommenderat att man installer \",(0,n.jsx)(e.code,{children:\"ffmpeg\"}),\" ocks\\xE5. Lyckligtvis g\\xE5r det att bra att installera \",(0,n.jsx)(e.code,{children:\"ffmpeg\"}),\" med hj\\xE4lp av Homebrew:\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ brew \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),` ffmpeg\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"movie-trailer\"}),\" \\xE5 andra sidan kommer fr\\xE5n \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/\",children:\"npm\"}),\" och installeras p\\xE5 f\\xF6ljande vis (f\\xF6rutsatt att npm \\xE4r installerat p\\xE5 din maskin):\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Installera movie-trailer globalt\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--global\"}),` movie-trailer\n`]})]})}),`\n`,(0,n.jsxs)(e.h2,{id:\"kombinera-verktygen\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#kombinera-verktygen\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Kombinera verktygen\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"N\\xE4r b\\xE4gge CLI verktygen \\xE4r installerade kan det kombineras genom att skapa f\\xF6ljande funktion i din \",(0,n.jsx)(e.code,{children:\"~/.bashrc\"}),\", \",(0,n.jsx)(e.code,{children:\"~/.bash_profile\"}),\" eller \",(0,n.jsx)(e.code,{children:\"~/.zshrc\"}),\" som i mitt fall d\\xE5 jag anv\\xE4nder zsh ist\\xE4llet f\\xF6r bash.\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"~/.zshrc\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-name function\",children:\"trailer-dl\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"echo\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Downloading trailer\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-n\"}),\" \",(0,n.jsx)(e.span,{className:\"token variable\",children:\"$2\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"then\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Ladda ned efter endast filmtitel\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[\"      youtube-dl \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--output\"}),\" \",(0,n.jsxs)(e.span,{className:\"token string\",children:['\"',(0,n.jsx)(e.span,{className:\"token variable\",children:\"$1\"}),'-trailer.%(ext)s\"']}),\" \",(0,n.jsxs)(e.span,{className:\"token variable\",children:[(0,n.jsx)(e.span,{className:\"token variable\",children:\"$(\"}),\"movie-trailer \",(0,n.jsxs)(e.span,{className:\"token string\",children:['\"',(0,n.jsx)(e.span,{className:\"token variable\",children:\"$1\"}),'\"']}),(0,n.jsx)(e.span,{className:\"token variable\",children:\")\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"else\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"# Ladda ned efter \\xE5rtal ocks\\xE5\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"9\",children:[\"      youtube-dl \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--output\"}),\" \",(0,n.jsxs)(e.span,{className:\"token string\",children:['\"',(0,n.jsx)(e.span,{className:\"token variable\",children:\"$1\"}),'-trailer.%(ext)s\"']}),\" \",(0,n.jsxs)(e.span,{className:\"token variable\",children:[(0,n.jsx)(e.span,{className:\"token variable\",children:\"$(\"}),\"movie-trailer \",(0,n.jsxs)(e.span,{className:\"token string\",children:['\"',(0,n.jsx)(e.span,{className:\"token variable\",children:\"$1\"}),'\"']}),\" \",(0,n.jsxs)(e.span,{className:\"token string\",children:['\"',(0,n.jsx)(e.span,{className:\"token variable\",children:\"$2\"}),'\"']}),\" \",(0,n.jsx)(e.span,{className:\"token variable\",children:\")\"})]}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"fi\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"11\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"movie-trailer\"}),\" kan antingen s\\xF6ka efter URL till en trailer efter enbart namnet p\\xE5 en film eller ocks\\xE5 namnet plus \\xE5rtalet. S\\xE5ledes inneh\\xE5ller funktionen ovan tv\\xE5 scenarion beroende p\\xE5 om man anger ett \\xE5rtal eller ej.\"]})]})}function y(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(o,a)})):o(a)}var j=y;return f(w);})();\n;return Component;"},"_id":"posts/ladda-ned-trailers-via-terminalen.mdx","_raw":{"sourceFilePath":"posts/ladda-ned-trailers-via-terminalen.mdx","sourceFileName":"ladda-ned-trailers-via-terminalen.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/ladda-ned-trailers-via-terminalen"},"type":"Post","url":"/blogg/ladda-ned-trailers-via-terminalen","dateFormatted":"2017-03-30"},"nextPost":{"title":"Skapa ett request plugin i Nuxt.js","date":"2019-06-15T00:00:00.000Z","summary":"S친 h칛r skapar man enkelt ett request-plugin baserat p친 axios i Nuxt.js","body":{"raw":"\nPluginsystemet i Nuxt.js g칬r det enkelt att skapa ett eget request plugin f칬r att hantera en Nuxt-baserad applikations alla HTTP anrop.\n\n[Nuxt.js](https://nuxtjs.org/) 칛r ett ramverk byggt ovanp친 Vue.js och en av tankarna bakom Nuxt 칛r att tillhandah친lla en modul칛r och kraftfull plattform att enklare utveckla bland annat SPA:s och statiskt genererade applikationer baserade p친 Vue.\n\n## Request modul\n\nI verktygsl친dan som Nuxt tillhandah친ller finns en [axios modul](https://axios.nuxtjs.org/) som integrerar axios (ett popul칛rt promise baserat HTTP bibliotek) med Nuxt. En av f칬rdelarna med att anv칛nda denna axios-modul 칛r att den automatiskt s칛tter en base-URL f칬r b친de klient och server kontext i en Nuxt applikation.\n\nHur kan man d친 anv칛nda axios modulen i en Nuxt applikation? Efter att man [lagt till](https://axios.nuxtjs.org/setup) modulen blir den tillg칛nglig direkt i `.vue` filer via `this.$axios`. F칬r att g칬ra en GET-request kan man exempelvis g칬ra `this.$axios.get(URL)`.\n\n## Request plugin\n\nDet fungerar helt okej att anv칛nda axios modulen direkt i Vue komponenterna, vuex store eller vad det nu kan vara om det handlar om en enstaka request till en backend. Men man st칬ter snabbt p친 problem om samma HTTP anrop ska 친teranv칛ndas och eventuell passning beh칬vs innan svaret ska presenteras i gr칛nssnittet. Det 칛r d친 l칛tt h칛nt att Vue komponenterna b칬rjar v칛xa i on칬dan och f친r f칬r mycket ansvar f칬r saker och ting som inte h칬r komponenterna till.\n\nDet i det h칛r l칛get man kan anv칛nda sig av en av f칬rdelarna med Nuxt, n칛mligen [plugin-systemet](https://nuxtjs.org/guide/plugins), f칬r att skapa ett request plugin.\nDet man d친 kan g칬ra 칛r att skapa en fil **plugins/api.js** som man i sin **nuxt.config.json** inkluderar p친 f칬ljande vis:\n\n```javascript:nuxt.config.json showLineNumbers\n// Other configuration\nplugins: [\n'@/plugins/api',\n],\n// Other configuration\n```\n\nDet inneb칛r att Nuxt kommer l칛sa in **plugins/api.js** f칬re applikationen startar\n\nDet 칛r i **plugins/api.js** man g칬r en 렬nject f칬r att registrera sitt plugin och g칬r det tillg칛ngligt i applikationen.\n\n```javascript:plugins/api.js {5,6} showLineNumbers\nimport API from './some/place/';\nexport default ({ $axios }, inject) => {\n  // Create new api class with provided nuxt axios module\n  const api = new API({ request: $axios });\n  // Inject the api to make it available across app via this.$api\n  inject('api', api);\n};\n```\n\nPluginet importerar en 레PI klass och skapar upp en ny instans av klassen och g칬r axios modulen tillg칛nglig via dependency injection. Att anv칛nda `inject()` h칛r inneb칛r att klass instansen blir tillg칛nglig i bland annat Vue filer, men ocks친 i en eventuell Vuex store som man kan anv칛nda i en Nuxt applikation.\n\nDet 칛r d친 allts친 i `API` klassen som alla requests via axios modulen g칬rs. F칬renklat skulle man kunna skapa en `API.js` fil med f칬ljande inneh친ll:\n\n```javascript:API.js showLineNumbers\nclass API {\n\tconstructor({ request }) {\n\t\t// this.request will reference nuxt axios mudule\n\t\tthis.request = request\n\t}\n}\nexport default API\n```\n\nD칛refter 칛r det bara att fylla p친 med de metoder som man anser beh칬vs, konfigurerar upp eventuella request parsers och s친 vidare.\n\nN칛r v칛l pluginet 칛r registrerat 칛r det bara att b칬rja anv칛nda `this.$api` i applikationen och exempelvis alla vue komponenter har tillg친ng till ett enkelt API utan att beh칬va g칬ra alla HTTP anrop sj칛lva och beh칬va t칛nka p친 eventuell parsning av svar, token hantering med mera.\nEn async method i en vue komponent skulle till exempel kunna g칬ra ett anrop med f칬ljande syntax:\n\n```javascript:example-vue-component.vue {4,5,6} showLineNumbers\n// Example of a vue component with methods\nmethods: {\n\tasync getQuote() {\n\t\tconst { data } = await this.$api.getRandomQuote()\n\t\t// Set data from api to vue component data\n\t\tthis.quote = data\n\t}\n}\n```\n\nMetoden `getRandomQuote()` skulle kunna vara en metod i API klassen som g칬r ett anrop f칬r att h칛mta ett slumpm칛ssigt citat av n친got slag.\n","code":"var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},c=(a,e,s,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of h(e))!k.call(a,t)&&t!==s&&l(a,t,{get:()=>e[t],enumerable:!(i=m(e,t))||i.enumerable});return a};var v=(a,e,s)=>(s=a!=null?d(u(a)):{},c(e||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),b=a=>c(l({},\"__esModule\",{value:!0}),a);var o=N((q,r)=>{r.exports=_jsx_runtime});var y={};g(y,{default:()=>j,frontmatter:()=>x});var n=v(o()),x={title:\"Skapa ett request plugin i Nuxt.js\",summary:\"S\\xE5 h\\xE4r skapar man enkelt ett request-plugin baserat p\\xE5 axios i Nuxt.js\",date:new Date(15605568e5)};function p(a){let e=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",code:\"code\",strong:\"strong\",div:\"div\",pre:\"pre\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Pluginsystemet i Nuxt.js g\\xF6r det enkelt att skapa ett eget request plugin f\\xF6r att hantera en Nuxt-baserad applikations alla HTTP anrop.\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://nuxtjs.org/\",children:\"Nuxt.js\"}),\" \\xE4r ett ramverk byggt ovanp\\xE5 Vue.js och en av tankarna bakom Nuxt \\xE4r att tillhandah\\xE5lla en modul\\xE4r och kraftfull plattform att enklare utveckla bland annat SPA:s och statiskt genererade applikationer baserade p\\xE5 Vue.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"request-modul\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#request-modul\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Request modul\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I verktygsl\\xE5dan som Nuxt tillhandah\\xE5ller finns en \",(0,n.jsx)(e.a,{href:\"https://axios.nuxtjs.org/\",children:\"axios modul\"}),\" som integrerar axios (ett popul\\xE4rt promise baserat HTTP bibliotek) med Nuxt. En av f\\xF6rdelarna med att anv\\xE4nda denna axios-modul \\xE4r att den automatiskt s\\xE4tter en base-URL f\\xF6r b\\xE5de klient och server kontext i en Nuxt applikation.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hur kan man d\\xE5 anv\\xE4nda axios modulen i en Nuxt applikation? Efter att man \",(0,n.jsx)(e.a,{href:\"https://axios.nuxtjs.org/setup\",children:\"lagt till\"}),\" modulen blir den tillg\\xE4nglig direkt i \",(0,n.jsx)(e.code,{children:\".vue\"}),\" filer via \",(0,n.jsx)(e.code,{children:\"this.$axios\"}),\". F\\xF6r att g\\xF6ra en GET-request kan man exempelvis g\\xF6ra \",(0,n.jsx)(e.code,{children:\"this.$axios.get(URL)\"}),\".\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"request-plugin\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#request-plugin\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Request plugin\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Det fungerar helt okej att anv\\xE4nda axios modulen direkt i Vue komponenterna, vuex store eller vad det nu kan vara om det handlar om en enstaka request till en backend. Men man st\\xF6ter snabbt p\\xE5 problem om samma HTTP anrop ska \\xE5teranv\\xE4ndas och eventuell passning beh\\xF6vs innan svaret ska presenteras i gr\\xE4nssnittet. Det \\xE4r d\\xE5 l\\xE4tt h\\xE4nt att Vue komponenterna b\\xF6rjar v\\xE4xa i on\\xF6dan och f\\xE5r f\\xF6r mycket ansvar f\\xF6r saker och ting som inte h\\xF6r komponenterna till.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det i det h\\xE4r l\\xE4get man kan anv\\xE4nda sig av en av f\\xF6rdelarna med Nuxt, n\\xE4mligen \",(0,n.jsx)(e.a,{href:\"https://nuxtjs.org/guide/plugins\",children:\"plugin-systemet\"}),`, f\\xF6r att skapa ett request plugin.\nDet man d\\xE5 kan g\\xF6ra \\xE4r att skapa en fil `,(0,n.jsx)(e.strong,{children:\"plugins/api.js\"}),\" som man i sin \",(0,n.jsx)(e.strong,{children:\"nuxt.config.json\"}),\" inkluderar p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"nuxt.config.json\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Other configuration\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"plugins\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"'@/plugins/api'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Other configuration\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det inneb\\xE4r att Nuxt kommer l\\xE4sa in \",(0,n.jsx)(e.strong,{children:\"plugins/api.js\"}),\" f\\xF6re applikationen startar\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det \\xE4r i \",(0,n.jsx)(e.strong,{children:\"plugins/api.js\"}),\" man g\\xF6r en \\u201Dinject\\u201D f\\xF6r att registrera sitt plugin och g\\xF6r det tillg\\xE4ngligt i applikationen.\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"plugins/api.js\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"API\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./some/place/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" $axios \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" inject\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Create new api class with provided nuxt axios module\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" api \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"API\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"request\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" $axios \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Inject the api to make it available across app via this.$api\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"6\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"inject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'api'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" api\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pluginet importerar en \\u201DAPI\\u201D klass och skapar upp en ny instans av klassen och g\\xF6r axios modulen tillg\\xE4nglig via dependency injection. Att anv\\xE4nda \",(0,n.jsx)(e.code,{children:\"inject()\"}),\" h\\xE4r inneb\\xE4r att klass instansen blir tillg\\xE4nglig i bland annat Vue filer, men ocks\\xE5 i en eventuell Vuex store som man kan anv\\xE4nda i en Nuxt applikation.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det \\xE4r d\\xE5 allts\\xE5 i \",(0,n.jsx)(e.code,{children:\"API\"}),\" klassen som alla requests via axios modulen g\\xF6rs. F\\xF6renklat skulle man kunna skapa en \",(0,n.jsx)(e.code,{children:\"API.js\"}),\" fil med f\\xF6ljande inneh\\xE5ll:\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"API.js\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"API\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token function\",children:\"constructor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" request \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// this.request will reference nuxt axios mudule\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"request\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` request\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"API\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"D\\xE4refter \\xE4r det bara att fylla p\\xE5 med de metoder som man anser beh\\xF6vs, konfigurerar upp eventuella request parsers och s\\xE5 vidare.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"N\\xE4r v\\xE4l pluginet \\xE4r registrerat \\xE4r det bara att b\\xF6rja anv\\xE4nda \",(0,n.jsx)(e.code,{children:\"this.$api\"}),` i applikationen och exempelvis alla vue komponenter har tillg\\xE5ng till ett enkelt API utan att beh\\xF6va g\\xF6ra alla HTTP anrop sj\\xE4lva och beh\\xF6va t\\xE4nka p\\xE5 eventuell parsning av svar, token hantering med mera.\nEn async method i en vue komponent skulle till exempel kunna g\\xF6ra ett anrop med f\\xF6ljande syntax:`]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"example-vue-component.vue\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Example of a vue component with methods\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"methods\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getQuote\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"4\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" data \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"$api\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getRandomQuote\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"5\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Set data from api to vue component data\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"6\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"quote\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` data\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Metoden \",(0,n.jsx)(e.code,{children:\"getRandomQuote()\"}),\" skulle kunna vara en metod i API klassen som g\\xF6r ett anrop f\\xF6r att h\\xE4mta ett slumpm\\xE4ssigt citat av n\\xE5got slag.\"]})]})}function f(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(p,a)})):p(a)}var j=f;return b(y);})();\n;return Component;"},"_id":"posts/skapa-ett-request-plugin-i-nuxtjs.mdx","_raw":{"sourceFilePath":"posts/skapa-ett-request-plugin-i-nuxtjs.mdx","sourceFileName":"skapa-ett-request-plugin-i-nuxtjs.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/skapa-ett-request-plugin-i-nuxtjs"},"type":"Post","url":"/blogg/skapa-ett-request-plugin-i-nuxtjs","dateFormatted":"2019-06-15"}},"__N_SSG":true}