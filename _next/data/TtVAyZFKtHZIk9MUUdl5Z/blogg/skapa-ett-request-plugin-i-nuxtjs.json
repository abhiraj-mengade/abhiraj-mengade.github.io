{"pageProps":{"post":{"title":"Skapa ett request plugin i Nuxt.js","date":"2019-06-15T00:00:00.000Z","summary":"SÃ¥ hÃ¤r skapar man enkelt ett request-plugin baserat pÃ¥ axios i Nuxt.js","body":{"raw":"\nPluginsystemet i Nuxt.js gÃ¶r det enkelt att skapa ett eget request plugin fÃ¶r att hantera en Nuxt-baserad applikations alla HTTP anrop.\n\n[Nuxt.js](https://nuxtjs.org/) Ã¤r ett ramverk byggt ovanpÃ¥ Vue.js och en av tankarna bakom Nuxt Ã¤r att tillhandahÃ¥lla en modulÃ¤r och kraftfull plattform att enklare utveckla bland annat SPA:s och statiskt genererade applikationer baserade pÃ¥ Vue.\n\n## Request modul\n\nI verktygslÃ¥dan som Nuxt tillhandahÃ¥ller finns en [axios modul](https://axios.nuxtjs.org/) som integrerar axios (ett populÃ¤rt promise baserat HTTP bibliotek) med Nuxt. En av fÃ¶rdelarna med att anvÃ¤nda denna axios-modul Ã¤r att den automatiskt sÃ¤tter en base-URL fÃ¶r bÃ¥de klient och server kontext i en Nuxt applikation.\n\nHur kan man dÃ¥ anvÃ¤nda axios modulen i en Nuxt applikation? Efter att man [lagt till](https://axios.nuxtjs.org/setup) modulen blir den tillgÃ¤nglig direkt i `.vue` filer via `this.$axios`. FÃ¶r att gÃ¶ra en GET-request kan man exempelvis gÃ¶ra `this.$axios.get(URL)`.\n\n## Request plugin\n\nDet fungerar helt okej att anvÃ¤nda axios modulen direkt i Vue komponenterna, vuex store eller vad det nu kan vara om det handlar om en enstaka request till en backend. Men man stÃ¶ter snabbt pÃ¥ problem om samma HTTP anrop ska Ã¥teranvÃ¤ndas och eventuell passning behÃ¶vs innan svaret ska presenteras i grÃ¤nssnittet. Det Ã¤r dÃ¥ lÃ¤tt hÃ¤nt att Vue komponenterna bÃ¶rjar vÃ¤xa i onÃ¶dan och fÃ¥r fÃ¶r mycket ansvar fÃ¶r saker och ting som inte hÃ¶r komponenterna till.\n\nDet i det hÃ¤r lÃ¤get man kan anvÃ¤nda sig av en av fÃ¶rdelarna med Nuxt, nÃ¤mligen [plugin-systemet](https://nuxtjs.org/guide/plugins), fÃ¶r att skapa ett request plugin.\nDet man dÃ¥ kan gÃ¶ra Ã¤r att skapa en fil **plugins/api.js** som man i sin **nuxt.config.json** inkluderar pÃ¥ fÃ¶ljande vis:\n\n```javascript:nuxt.config.json showLineNumbers\n// Other configuration\nplugins: [\n'@/plugins/api',\n],\n// Other configuration\n```\n\nDet innebÃ¤r att Nuxt kommer lÃ¤sa in **plugins/api.js** fÃ¶re applikationen startar\n\nDet Ã¤r i **plugins/api.js** man gÃ¶r en â€injectâ€ fÃ¶r att registrera sitt plugin och gÃ¶r det tillgÃ¤ngligt i applikationen.\n\n```javascript:plugins/api.js {5,6} showLineNumbers\nimport API from './some/place/';\nexport default ({ $axios }, inject) => {\n  // Create new api class with provided nuxt axios module\n  const api = new API({ request: $axios });\n  // Inject the api to make it available across app via this.$api\n  inject('api', api);\n};\n```\n\nPluginet importerar en â€APIâ€ klass och skapar upp en ny instans av klassen och gÃ¶r axios modulen tillgÃ¤nglig via dependency injection. Att anvÃ¤nda `inject()` hÃ¤r innebÃ¤r att klass instansen blir tillgÃ¤nglig i bland annat Vue filer, men ocksÃ¥ i en eventuell Vuex store som man kan anvÃ¤nda i en Nuxt applikation.\n\nDet Ã¤r dÃ¥ alltsÃ¥ i `API` klassen som alla requests via axios modulen gÃ¶rs. FÃ¶renklat skulle man kunna skapa en `API.js` fil med fÃ¶ljande innehÃ¥ll:\n\n```javascript:API.js showLineNumbers\nclass API {\n\tconstructor({ request }) {\n\t\t// this.request will reference nuxt axios mudule\n\t\tthis.request = request\n\t}\n}\nexport default API\n```\n\nDÃ¤refter Ã¤r det bara att fylla pÃ¥ med de metoder som man anser behÃ¶vs, konfigurerar upp eventuella request parsers och sÃ¥ vidare.\n\nNÃ¤r vÃ¤l pluginet Ã¤r registrerat Ã¤r det bara att bÃ¶rja anvÃ¤nda `this.$api` i applikationen och exempelvis alla vue komponenter har tillgÃ¥ng till ett enkelt API utan att behÃ¶va gÃ¶ra alla HTTP anrop sjÃ¤lva och behÃ¶va tÃ¤nka pÃ¥ eventuell parsning av svar, token hantering med mera.\nEn async method i en vue komponent skulle till exempel kunna gÃ¶ra ett anrop med fÃ¶ljande syntax:\n\n```javascript:example-vue-component.vue {4,5,6} showLineNumbers\n// Example of a vue component with methods\nmethods: {\n\tasync getQuote() {\n\t\tconst { data } = await this.$api.getRandomQuote()\n\t\t// Set data from api to vue component data\n\t\tthis.quote = data\n\t}\n}\n```\n\nMetoden `getRandomQuote()` skulle kunna vara en metod i API klassen som gÃ¶r ett anrop fÃ¶r att hÃ¤mta ett slumpmÃ¤ssigt citat av nÃ¥got slag.\n","code":"var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},c=(a,e,s,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of h(e))!k.call(a,t)&&t!==s&&l(a,t,{get:()=>e[t],enumerable:!(i=m(e,t))||i.enumerable});return a};var v=(a,e,s)=>(s=a!=null?d(u(a)):{},c(e||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),b=a=>c(l({},\"__esModule\",{value:!0}),a);var o=N((q,r)=>{r.exports=_jsx_runtime});var y={};g(y,{default:()=>j,frontmatter:()=>x});var n=v(o()),x={title:\"Skapa ett request plugin i Nuxt.js\",summary:\"S\\xE5 h\\xE4r skapar man enkelt ett request-plugin baserat p\\xE5 axios i Nuxt.js\",date:new Date(15605568e5)};function p(a){let e=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",code:\"code\",strong:\"strong\",div:\"div\",pre:\"pre\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Pluginsystemet i Nuxt.js g\\xF6r det enkelt att skapa ett eget request plugin f\\xF6r att hantera en Nuxt-baserad applikations alla HTTP anrop.\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://nuxtjs.org/\",children:\"Nuxt.js\"}),\" \\xE4r ett ramverk byggt ovanp\\xE5 Vue.js och en av tankarna bakom Nuxt \\xE4r att tillhandah\\xE5lla en modul\\xE4r och kraftfull plattform att enklare utveckla bland annat SPA:s och statiskt genererade applikationer baserade p\\xE5 Vue.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"request-modul\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#request-modul\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Request modul\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I verktygsl\\xE5dan som Nuxt tillhandah\\xE5ller finns en \",(0,n.jsx)(e.a,{href:\"https://axios.nuxtjs.org/\",children:\"axios modul\"}),\" som integrerar axios (ett popul\\xE4rt promise baserat HTTP bibliotek) med Nuxt. En av f\\xF6rdelarna med att anv\\xE4nda denna axios-modul \\xE4r att den automatiskt s\\xE4tter en base-URL f\\xF6r b\\xE5de klient och server kontext i en Nuxt applikation.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hur kan man d\\xE5 anv\\xE4nda axios modulen i en Nuxt applikation? Efter att man \",(0,n.jsx)(e.a,{href:\"https://axios.nuxtjs.org/setup\",children:\"lagt till\"}),\" modulen blir den tillg\\xE4nglig direkt i \",(0,n.jsx)(e.code,{children:\".vue\"}),\" filer via \",(0,n.jsx)(e.code,{children:\"this.$axios\"}),\". F\\xF6r att g\\xF6ra en GET-request kan man exempelvis g\\xF6ra \",(0,n.jsx)(e.code,{children:\"this.$axios.get(URL)\"}),\".\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"request-plugin\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#request-plugin\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Request plugin\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Det fungerar helt okej att anv\\xE4nda axios modulen direkt i Vue komponenterna, vuex store eller vad det nu kan vara om det handlar om en enstaka request till en backend. Men man st\\xF6ter snabbt p\\xE5 problem om samma HTTP anrop ska \\xE5teranv\\xE4ndas och eventuell passning beh\\xF6vs innan svaret ska presenteras i gr\\xE4nssnittet. Det \\xE4r d\\xE5 l\\xE4tt h\\xE4nt att Vue komponenterna b\\xF6rjar v\\xE4xa i on\\xF6dan och f\\xE5r f\\xF6r mycket ansvar f\\xF6r saker och ting som inte h\\xF6r komponenterna till.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det i det h\\xE4r l\\xE4get man kan anv\\xE4nda sig av en av f\\xF6rdelarna med Nuxt, n\\xE4mligen \",(0,n.jsx)(e.a,{href:\"https://nuxtjs.org/guide/plugins\",children:\"plugin-systemet\"}),`, f\\xF6r att skapa ett request plugin.\nDet man d\\xE5 kan g\\xF6ra \\xE4r att skapa en fil `,(0,n.jsx)(e.strong,{children:\"plugins/api.js\"}),\" som man i sin \",(0,n.jsx)(e.strong,{children:\"nuxt.config.json\"}),\" inkluderar p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"nuxt.config.json\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Other configuration\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"plugins\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"'@/plugins/api'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Other configuration\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det inneb\\xE4r att Nuxt kommer l\\xE4sa in \",(0,n.jsx)(e.strong,{children:\"plugins/api.js\"}),\" f\\xF6re applikationen startar\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det \\xE4r i \",(0,n.jsx)(e.strong,{children:\"plugins/api.js\"}),\" man g\\xF6r en \\u201Dinject\\u201D f\\xF6r att registrera sitt plugin och g\\xF6r det tillg\\xE4ngligt i applikationen.\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"plugins/api.js\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"API\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./some/place/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" $axios \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" inject\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Create new api class with provided nuxt axios module\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" api \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"API\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"request\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" $axios \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Inject the api to make it available across app via this.$api\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"6\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"inject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'api'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" api\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pluginet importerar en \\u201DAPI\\u201D klass och skapar upp en ny instans av klassen och g\\xF6r axios modulen tillg\\xE4nglig via dependency injection. Att anv\\xE4nda \",(0,n.jsx)(e.code,{children:\"inject()\"}),\" h\\xE4r inneb\\xE4r att klass instansen blir tillg\\xE4nglig i bland annat Vue filer, men ocks\\xE5 i en eventuell Vuex store som man kan anv\\xE4nda i en Nuxt applikation.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det \\xE4r d\\xE5 allts\\xE5 i \",(0,n.jsx)(e.code,{children:\"API\"}),\" klassen som alla requests via axios modulen g\\xF6rs. F\\xF6renklat skulle man kunna skapa en \",(0,n.jsx)(e.code,{children:\"API.js\"}),\" fil med f\\xF6ljande inneh\\xE5ll:\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"API.js\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"API\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token function\",children:\"constructor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" request \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// this.request will reference nuxt axios mudule\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"request\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` request\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"API\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"D\\xE4refter \\xE4r det bara att fylla p\\xE5 med de metoder som man anser beh\\xF6vs, konfigurerar upp eventuella request parsers och s\\xE5 vidare.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"N\\xE4r v\\xE4l pluginet \\xE4r registrerat \\xE4r det bara att b\\xF6rja anv\\xE4nda \",(0,n.jsx)(e.code,{children:\"this.$api\"}),` i applikationen och exempelvis alla vue komponenter har tillg\\xE5ng till ett enkelt API utan att beh\\xF6va g\\xF6ra alla HTTP anrop sj\\xE4lva och beh\\xF6va t\\xE4nka p\\xE5 eventuell parsning av svar, token hantering med mera.\nEn async method i en vue komponent skulle till exempel kunna g\\xF6ra ett anrop med f\\xF6ljande syntax:`]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"example-vue-component.vue\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Example of a vue component with methods\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"methods\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getQuote\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"4\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" data \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"$api\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getRandomQuote\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"5\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Set data from api to vue component data\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"6\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"quote\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` data\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Metoden \",(0,n.jsx)(e.code,{children:\"getRandomQuote()\"}),\" skulle kunna vara en metod i API klassen som g\\xF6r ett anrop f\\xF6r att h\\xE4mta ett slumpm\\xE4ssigt citat av n\\xE5got slag.\"]})]})}function f(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(p,a)})):p(a)}var j=f;return b(y);})();\n;return Component;"},"_id":"posts/skapa-ett-request-plugin-i-nuxtjs.mdx","_raw":{"sourceFilePath":"posts/skapa-ett-request-plugin-i-nuxtjs.mdx","sourceFileName":"skapa-ett-request-plugin-i-nuxtjs.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/skapa-ett-request-plugin-i-nuxtjs"},"type":"Post","url":"/blogg/skapa-ett-request-plugin-i-nuxtjs","dateFormatted":"2019-06-15"},"prevPost":{"title":"Node-baserat CLI fÃ¶r att skrapa IMDb","date":"2017-09-01T00:00:00.000Z","summary":"Enkelt CLI fÃ¶r att fÃ¥ tag i viss information frÃ¥n IMDb genom att skrapa sajten.","body":{"raw":"\nFÃ¶r ett tag sedan stod jag infÃ¶r en uppgift som delvis gick ut pÃ¥ att anvÃ¤nda filmer och tv-seriers IMDb ID:n. Att manuellt sÃ¶ka upp filmer i webblÃ¤saren och kopiera ID:n frÃ¥n URLen vart fort tradigt... Node-baserat CLI to the rescue!\n\nFÃ¶r den som inte vet vad ett IMDb ID Ã¤r sÃ¥ Ã¤r det kortfattat ett unikt identifieringsnummer fÃ¶r varje film, tv-serie, skÃ¥despelarare och sÃ¥ vidare. Dessa id:n anvÃ¤nds bland annat i URLen pÃ¥ fÃ¶ljande sÃ¤tt: `http://www.imdb.com/title/tt0411008/`. StrÃ¤ngen som bÃ¶rjar pÃ¥ **\"tt\"** Ã¤r sjÃ¤vla id:t. Just **tt0411008** Ã¤r id:t fÃ¶r tv-serien Lost fÃ¶r Ã¶vrigt.\n\nJag behÃ¶vde alltsÃ¥ pÃ¥ ett smidigt sÃ¤tt komma Ã¥t just de hÃ¤r numren och efter att ha gjort manuella sÃ¶kningar pÃ¥ IMDbs hemsida ett ex antal gÃ¥nger, klickat mig in pÃ¥ rÃ¤tt sÃ¶kresultat och kopierat id:t frÃ¥n URLen sÃ¥ kÃ¤ndes hela den processen vÃ¤ldigt tradig. Dags att effektivisera!\n\nDet hÃ¤r var dessutom ett utmÃ¤rkt tillfÃ¤lle att skapa ett Node-baserat CLI och lÃ¤ra mig lite mer om det dÃ¥ jag inte skapat sÃ¥ mÃ¥nga sÃ¥dana fÃ¶rut men Ã¤r sedan tidigare relativt bekvÃ¤m med Node och Javascript. Inte heller hade jag tidigare anvÃ¤nt skrapning speciellt mycket med Javascrip.\n\n## Vad behÃ¶ver CLI:t Ã¥tstakomma?\n\nInnan jag ens gjorde `git init` funderade jag Ã¶ver hur jag ville att mitt CLI skulle fungera, vad det skulle spotta ut fÃ¶r information och bÃ¶rjade fundera pÃ¥ vilka npm-paket som skulle kunna underlÃ¤tta och gÃ¶ra CLI:t bÃ¤ttre.\n\nMin tanke var att CLI:t fÃ¶rst skulle frÃ¥ga anvÃ¤ndaren efter en sÃ¶kstrÃ¤ng att sÃ¶ka efter, gÃ¶ra en request till IMDb:s hemsida och sÃ¶kresultat, skrapa den information som behÃ¶vdes och spotta ut det i terminalen pÃ¥ ett Ã¶verskÃ¥dligt sÃ¤tt. Jag tÃ¤nkte mig att det frÃ¤mst handla om att skrapa fram titlar, Ã¥rtal och sjÃ¤lvfallet IMDb ID:n.\n\n### Struktur\n\nDÃ¥ jag i ett slags version 1.0.0 av CLI:t endast behÃ¶ver ett enkelt sÃ¤tt att komma Ã¥t IMDb ID:n skulle man lika gÃ¤rna kunna skriva all kod i en och samma **index.js** fil. Men ska CLI:t lÃ¤ngre fram kunna gÃ¶ra mer saker blir det lite svÃ¥rt att skala projektet och bygga vidare pÃ¥ det sÃ¥ dÃ¤rfÃ¶r valde jag att dela upp CLI:t i tvÃ¥ olika klasser och en **index.js**. Klasserna som skapades var en IMDb klass och en klass `queryHelper` fÃ¶r att genomfÃ¶ra lite manipulering av strÃ¤ngar.\n\n### NPM-paket\n\nJag anvÃ¤de mig av fÃ¶ljande npm-paket fÃ¶r att skapa mitt CLI:\n\n- [Chalk](https://www.npmjs.com/package/chalk) - FÃ¶r att sÃ¤tta lite fÃ¤rg pÃ¥ bland annat `console.log`.\n- [Request](https://www.npmjs.com/package/request) - Ett enkelt sÃ¤tt att gÃ¶ra http requests.\n- [Cheerio](https://www.npmjs.com/package/cheerio) - FÃ¶r att skrapa IMDbs hemsida med en jQuery-liknande syntax.\n- [Clear](https://www.npmjs.com/package/clear) - Ett paket vars enkla uppgift Ã¤r att rensa terminalfÃ¶nstret.\n- [Figlet](https://www.npmjs.com/package/figlet) - Ett paket fÃ¶r att enkelt skapa ascii-konst av text. CLI:t mÃ¥ste ju vara lite snyggt ocksÃ¥.\n- [Inquirer](https://www.npmjs.com/package/inquirer) - AnvÃ¤ndes fÃ¶r att frÃ¥ga anvÃ¤ndaren om sÃ¶kstrÃ¤ng och validera svaret.\n- [Ora](https://www.npmjs.com/package/ora) - Ett paket fÃ¶r att ge anvÃ¤ndaren lite feedback i form av en spinner undertiden som IMDb skrapas och sÃ¶kresultatet samlas in.\n- [Table-master](https://www.npmjs.com/package/table-master) - AnvÃ¤ndes fÃ¶r att visa upp sÃ¶kresultatet i en tabell.\n\n## GenomfÃ¶rande\n\nHur bygger man dÃ¥ ett Node-baserat CLI fÃ¶r att skrapa IMDb:s hemsida och visa upp resultatet? Jag tÃ¤nkte hÃ¤r gÃ¥ igenom steg fÃ¶r steg hur det skulle kunna se ut, fÃ¶rhoppningsvis utan att gÃ¥ in i fÃ¶r noga detalj om allt.\n\nStarta projektet med en `npm init` fÃ¶r att skapa generera en **package.json** fÃ¶ljt av en `git init`. VarfÃ¶r inte anvÃ¤nda git liksom?\n\nInstallera dÃ¤refter alla npm-paket som kommer att anvÃ¤ndas:\n\n```bash\n$ npm install --save chalk request cheerio clear figlet inquirer ora table-master\n```\n\nSkapa dÃ¤refter en **index.js** fil som agerar sjÃ¤lva utgÃ¥ngspunkten fÃ¶r CLI:t. De enda npm-paket som behÃ¶vs i just denna fil Ã¤r `clear` och `inquirer` dÃ¥ de Ã¶vriga paketen frÃ¤mst kommer anvÃ¤ndas i ett senare skeda av IMDb klassen.\n\nFÃ¶ljande kod finns i min **index.js**:\n\n```javascript:index.js showLineNumbers\nconst clear = require('clear');\nconst inquirer = require('inquirer');\n\nconst inputError = 'Please enter a query to search for...';\n\n// setup of question\nconst question = [\n  {\n    type: 'input',\n    name: 'searchString',\n    message: 'What do you want to search for?\\n',\n    validate: (value) => value.length ? true : inputError\n  }\n]\n\n// clear the terminal window\nclear();\n\n// display colorful IMDb header\nIMDb.displayHeader();\n\n// prompt the user for a search string\ninquirer.prompt(question).then((answer) => {\n  let query = new queryHelper(answer.searchString);\n  let result = new IMDb(query.getSanitizedQuery(), answer.searchString);\n  result.scrape();\n})\n\n```\n\nFÃ¶rst och frÃ¤mst anvÃ¤nds `require` fÃ¶r att fÃ¥ in de npm-paket som anvÃ¤nds av filen, men Ã¤ven importeras de tvÃ¥ klasserna som Ã¤n sÃ¥ lÃ¤nge inte finns.\n\n`const question = [...]` deklarerar en frÃ¥ga med en tillhÃ¶rande validering. Om inte valideringen gÃ¥r igenom sÃ¥ skrivs `inputError` strÃ¤ngen ut i terminalen.\n\nDÃ¤refter rensas terminalfÃ¶nstret pÃ¥ samma sÃ¤tt som att sjÃ¤lv skriva `clear` i terminalen.\nSedan kallas en statisk metod frÃ¥n IMDb klassen som av sitt namn kanske avslÃ¶jar vad den gÃ¶r, men mer om metoden nÃ¤r jag gÃ¥r igenom min IMDb klass.\n\nLÃ¤ngst ner i filen skapas sjÃ¤lva prompten med hjÃ¤lp av `inquirer` dÃ¤r den tidigare question-arrayen skickas in och ett svar ges i ett promise.  \nInuti detta promise skapas fÃ¶rst en ny instans av `queryHelper` klassen och en instans av IMDb klassen skapas med hjÃ¤lp av en tvÃ¥ parametrar:\n\n1. Den fÃ¶rsta parametern `query.getSanitizedQuer()` gÃ¥r ut pÃ¥ omvandla en strÃ¤ng frÃ¥n \"Harry Potter\" till \"Harry+Potter\" dÃ¥ det formatet behÃ¶vs senare nÃ¤r IMDbs webbplats skrapas.\n2. Den andra parametern `answer.searchString` Ã¤r sÃ¶kstrÃ¤ngen som anvÃ¤ndaren matar in i orÃ¶rd form, det vill sÃ¤ga exmpelvis \"Harry Potter\". VarfÃ¶r det Ã¤r intressant att hÃ¥lla kvar i originalsÃ¶kstrÃ¤ngen kommer visa sig i sjÃ¤lva IMDb klassen.\n\nMen innan vi gÃ¥r igenom sjÃ¤lva IMDb klassen dÃ¤r sjÃ¤lva tyngdlyften i det hÃ¤r CLI:t hÃ¤nder gÃ¥r vi igenom queryHelper klassen dÃ¥ den (i alla fall fÃ¶r version 1.0.0) Ã¤r relativt liten.\n\n```javascript:queryHelper.js {7,8,9,11,12,13} showLineNumbers\nexports.queryHelper = class {\n  /**\n   * Creates an instance of queryHelper.\n   * @param {string} initialQuery\n   * @memberof queryHelper\n   */\n  constructor(initialQuery) {\n    this.query = initialQuery;\n  }\n  /**\n   * returns the query but sanitized\n   * replace all spaces with pluses\n   * @returns {string}\n   */\n  getSanitizedQuery() {\n    return this.query.replace(/ /g, '+');\n  }\n  /**\n   * Match IMDb ID's from hrefs\n   *\n   * @static\n   * @param {string} href\n   * @returns {string} containing IMDb ID\n   */\n  static getIMDbID(href) {\n    return href.match(/tt(.*)[0-9]/g).toString();\n  }\n};\n```\n\nKlassen bestÃ¥r alltsÃ¥ av en konstruktor och tvÃ¥ metoder. Den fÃ¶rsta metoden `getSanitizedQuery()` returnerar en sÃ¶kstrÃ¤ng dÃ¤r alla mellanrum i strÃ¤ngen har bytts ut mot plustecken. Den andra metoden `getIMDbID()` tar **href** som parameter och resturnerar sjÃ¤lva IMDb ID:t frÃ¥n en URL. Den extraherar alltsÃ¥ **tt0411008** frÃ¥n **http://www.imdb.com/title/tt0411008/** Metoden Ã¤r statisk dÃ¤rfÃ¶r att IMDb klassen anvÃ¤nder sig av denna metod, men det fanns inget behov av att skapa en ny instans av `queryHelper` inuti IMDb klassen.\n\nSlutligen har vi kvar sjÃ¤lva IMDb klassen **IMDb.js** som bestÃ¥r av ett antal metoder.\n\nFÃ¶rst sÃ¥ anvÃ¤nds require fÃ¶r att fÃ¥ in de Ã¶vriga npm-paket som Ã¤nnu inte anvÃ¤nts, men ocksÃ¥ queryHelper klassen:\n\n```javascript:IMDb.js showLineNumbers\nconst request = require('request');\nconst cheerio = require('cheerio');\nconst ora = require('ora');\nconst tab = require('table-master');\nconst chalk = require('chalk');\nconst figlet = require('figlet');\n\nconst { queryHelper } = require('./queryHelper');\n```\n\nDÃ¤refter skapas och exporteras sjÃ¤lva IMDb klassen med en konstruktor:\n\n```javascript:IMDb.js showLineNumbers\nexports.IMDb = class {\n\n  /**\n   * Creates an instance of IMDb.\n   * @param {string} query - search query that has been sanitized\n   * @param {string} originalQuery - The original search query\n  */\n  constructor(query, originalQuery) {\n    this.query = query;\n    this.originalQuery = originalQuery;\n    this.url = `http://www.imdb.com/search/title?title=${this.query}`;\n    this.results = [];\n    this.outputColor = chalk.hex('#f3ce13');\n  }\n}\n```\n\nKonstruktorn har tvÃ¥ parametrar och det Ã¤r alltsÃ¥ sjÃ¤lva sÃ¶kstrÃ¤ngen i dess original och i den \"plussade\" formen. DÃ¤refter sÃ¤tts `this.url` med hjÃ¤lp av den plussade sÃ¶kstrÃ¤ngen som i en annan metod kommer anvÃ¤ndas fÃ¶r att gÃ¶ra en reuqest och skrapa IMDb.  \n`this.results` Ã¤r en tom array som senare ska fyllas pÃ¥ med sÃ¶kresultat och `this.outputColor` anvÃ¤nder npm-paketet `chalk` fÃ¶r att spara ner IMDb:s gula fÃ¤rg som i en annan metod kommer anvÃ¤ndas fÃ¶r lite fÃ¤rgrannare utskrift i terminalen.\n\nDÃ¤refter innehÃ¥ller klassen en statisk metod fÃ¶r att visa lite ascii-text. Metoden Ã¤r statisk eftersom att den anropas i **index.js** innan en instans av sjÃ¤lva IMDb klassen har skapats. Eftersom att metoden anropas innan klassen har skapats gÃ¥r den inte att anvÃ¤nda IMDbfÃ¤rgen som deklarerats som `this.outputColor` i klassens konstruktor. Det kan Ã¤ndÃ¥ vara bra att ha denna fÃ¤rg sparad om den gula fÃ¤rgen skulle anvÃ¤ndas lÃ¤ngre fram till andra saker ocksÃ¥.\n\n```javascript:IMDb.js showLineNumbers\n  /**\n   * Static method to display IMDB header for the CLI\n   *\n   */\n  static displayHeader() {\n    var imdbColor = chalk.hex('#f3ce13');\n    console.log(imdbColor(figlet.textSync('IMDb')));\n  }\n```\n\nFÃ¶r att bygga ut `this.results` arrayen skapas ytterligare en metod pÃ¥ IMDb klassen som kan se ut pÃ¥ fÃ¶ljande vis:\n\n```javascript:IMDb.js showLineNumbers\n  /**\n   * Push to results array\n   *\n   * @param {any} title\n   * @param {any} year\n   * @param {any} imdbID\n   */\n  createSearchResult(title, year, imdbID) {\n    this.results.push({title, year, imdbID});\n  }\n```\n\nDenna metod anvÃ¤nder `push` fÃ¶r att bygga ut arrayen med ett objekt som innehÃ¥ller titel, Ã¥rtal och IMDb ID.\n\nIMDb klassen innehÃ¥ller sedan en nÃ¥got tung metod fÃ¶r att utfÃ¶ra sjÃ¤lva skrapandet av IMDb och komma Ã¥t sÃ¶kresultaten. Metoden gÃ¥r kort och gott ut pÃ¥ att gÃ¶ra en request till IMDb och loopa genom ett ex antal sÃ¶kresultat och pusha dessa till `this.results`\n\n```javascript:IMDb.js showLineNumbers\n /**\n   * Perform the scrape of imdb to gather search results\n   *\n   */\n  scrape() {\n\n    const spinner = ora('Searching IMDb. Please wait...').start();\n    request(this.url, (error, response, body) => {\n\n      if (!error) {\n\n        let $ = cheerio.load(body);\n\n        $('.lister-item-header a').each((index, value) => {\n          // create variables to be pushed as search result\n          let title = $(value).text();\n          let year = $(value).next().text().replace(/\\D/g, '');\n          let imdbID = this.outputColor(queryHelper.getIMDbID($(value).attr('href')));\n\n          this.createSearchResult(title, year, imdbID);\n\n          // stop the loop after 15 items\n          return index < 14;\n        });\n\n        spinner.stop();\n        this.renderSearchResults();\n\n      } else {\n        spinner.stop();\n        console.log(`Program exit with error: ${error}`);\n      }\n    });\n  }\n```\n\nNÃ¥gra nyckeldetaljer i den hÃ¤r metoden Ã¤r att fÃ¶rst och frÃ¤mst anvÃ¤nds `ora` npm-paketet fÃ¶r att starta en spinner som ger anvÃ¤ndaren lite feedback. SÃ¶kresultaten loopas genom med hjÃ¤lp av `cheerio` och `$(.lister-item-header a).each()` dÃ¤r titlar, Ã¥rtal och id:n sparas till `this.results` med hjÃ¤lp av metoden `this.createSearchResult()`.\n\nNÃ¤r loopen har stannat efter att de femton fÃ¶rsta sÃ¶kresultaten har pushats till `this.results` stoppas spinnern med hjÃ¤lp av `spinner.stop()` och en tabell med sÃ¶kresultaten visas upp i terminalen med hjÃ¤lp av metoden `this.renderSearchResults()`. Den metoden ser ut pÃ¥ fÃ¶ljande vis:\n\n```javascript:IMDb.js showLineNumbers\n  /**\n   * Render either a table with search results\n   * or a message of no search results were found\n   */\n  renderSearchResults() {\n    if (Object.keys(this.results).length === 0) {\n      console.log(chalk.red(`Could not find any search results for \"${this.originalQuery}\". Please try again.`));\n    } else {\n      console.table(this.results);\n    }\n  }\n```\n\nDenna metod kollar fÃ¶rst om `this.results` Ã¤r tom (inga sÃ¶kresultat hittades) eller ej och antingen renderar en tabell med sÃ¶kresultaten eller ger feedback om att inga sÃ¶kresultat kunde hittas. HÃ¤r anvÃ¤nds `this.originalQuery` som alltsÃ¥ exempelvis skulle motsvara `Harry Potter` och inte `Harry+Potter`.\n\n### GÃ¶r CLI:t kÃ¶rbart globalt\n\nFÃ¶r att slippa skriva `node index.js` och hela tiden befinna sig i samma path som **index.js** finns det ett enkelt knep att gÃ¶ra det hÃ¤r CLI:t globalt tillgÃ¤ngligt genom att endast skriva exempelvis `imdb` i terminalen, oberoende vilken path man har.\n\nBÃ¶rja med att uppgradera **package.json** med fÃ¶ljande:\n\n```json:package.json\n  \"bin\": {\n    \"imdb\": \"./index.js\"\n  }\n```\n\nDetta binder kommandot `imdb` till att kÃ¶ra **index.js**. LÃ¤gg dÃ¤refter till fÃ¶ljande shebang hÃ¶gst upp i **index.js**:\n\n```javascript:index.js showLineNumbers\n#!/usr/bin/env node\nconst clear = require('clear');\nconst inquirer = require('inquirer');\n\n//........\n```\n\nInstallera dÃ¤refter CLI:t globalt med hjÃ¤lp av:\n\n```bash\n$ npm install -g\n```\n\nNu Ã¤r CLI:t kÃ¶rbart globalt ðŸŽ‰\n\nDet var kort och gott all funktionalitet som finns i skrivande stund i detta Node-baserade CLI som skrapar IMDb efter sÃ¶kresultat och IMDb ID:n. Det fÃ¤rdiga CLI:et finns pÃ¥ [GitHub](https://github.com/danielv14/imdb-cli)\n","code":"var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=>{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},i=(a,n,s,t)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let c of h(n))!k.call(a,c)&&c!==s&&l(a,c,{get:()=>n[c],enumerable:!(t=m(n,c))||t.enumerable});return a};var b=(a,n,s)=>(s=a!=null?d(u(a)):{},i(n||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),f=a=>i(l({},\"__esModule\",{value:!0}),a);var o=N((D,r)=>{r.exports=_jsx_runtime});var j={};g(j,{default:()=>w,frontmatter:()=>y});var e=b(o()),y={title:\"Node-baserat CLI f\\xF6r att skrapa IMDb\",summary:\"Enkelt CLI f\\xF6r att f\\xE5 tag i viss information fr\\xE5n IMDb genom att skrapa sajten.\",date:new Date(1504224e6)};function p(a){let n=Object.assign({p:\"p\",code:\"code\",strong:\"strong\",h2:\"h2\",a:\"a\",span:\"span\",h3:\"h3\",ul:\"ul\",li:\"li\",pre:\"pre\",div:\"div\",br:\"br\",ol:\"ol\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"F\\xF6r ett tag sedan stod jag inf\\xF6r en uppgift som delvis gick ut p\\xE5 att anv\\xE4nda filmer och tv-seriers IMDb ID:n. Att manuellt s\\xF6ka upp filmer i webbl\\xE4saren och kopiera ID:n fr\\xE5n URLen vart fort tradigt... Node-baserat CLI to the rescue!\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r den som inte vet vad ett IMDb ID \\xE4r s\\xE5 \\xE4r det kortfattat ett unikt identifieringsnummer f\\xF6r varje film, tv-serie, sk\\xE5despelarare och s\\xE5 vidare. Dessa id:n anv\\xE4nds bland annat i URLen p\\xE5 f\\xF6ljande s\\xE4tt: \",(0,e.jsx)(n.code,{children:\"http://www.imdb.com/title/tt0411008/\"}),\". Str\\xE4ngen som b\\xF6rjar p\\xE5 \",(0,e.jsx)(n.strong,{children:'\"tt\"'}),\" \\xE4r sj\\xE4vla id:t. Just \",(0,e.jsx)(n.strong,{children:\"tt0411008\"}),\" \\xE4r id:t f\\xF6r tv-serien Lost f\\xF6r \\xF6vrigt.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Jag beh\\xF6vde allts\\xE5 p\\xE5 ett smidigt s\\xE4tt komma \\xE5t just de h\\xE4r numren och efter att ha gjort manuella s\\xF6kningar p\\xE5 IMDbs hemsida ett ex antal g\\xE5nger, klickat mig in p\\xE5 r\\xE4tt s\\xF6kresultat och kopierat id:t fr\\xE5n URLen s\\xE5 k\\xE4ndes hela den processen v\\xE4ldigt tradig. Dags att effektivisera!\"}),`\n`,(0,e.jsx)(n.p,{children:\"Det h\\xE4r var dessutom ett utm\\xE4rkt tillf\\xE4lle att skapa ett Node-baserat CLI och l\\xE4ra mig lite mer om det d\\xE5 jag inte skapat s\\xE5 m\\xE5nga s\\xE5dana f\\xF6rut men \\xE4r sedan tidigare relativt bekv\\xE4m med Node och Javascript. Inte heller hade jag tidigare anv\\xE4nt skrapning speciellt mycket med Javascrip.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"vad-beh\\xF6ver-clit-\\xE5tstakomma\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#vad-beh\\xF6ver-clit-\\xE5tstakomma\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Vad beh\\xF6ver CLI:t \\xE5tstakomma?\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Innan jag ens gjorde \",(0,e.jsx)(n.code,{children:\"git init\"}),\" funderade jag \\xF6ver hur jag ville att mitt CLI skulle fungera, vad det skulle spotta ut f\\xF6r information och b\\xF6rjade fundera p\\xE5 vilka npm-paket som skulle kunna underl\\xE4tta och g\\xF6ra CLI:t b\\xE4ttre.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Min tanke var att CLI:t f\\xF6rst skulle fr\\xE5ga anv\\xE4ndaren efter en s\\xF6kstr\\xE4ng att s\\xF6ka efter, g\\xF6ra en request till IMDb:s hemsida och s\\xF6kresultat, skrapa den information som beh\\xF6vdes och spotta ut det i terminalen p\\xE5 ett \\xF6versk\\xE5dligt s\\xE4tt. Jag t\\xE4nkte mig att det fr\\xE4mst handla om att skrapa fram titlar, \\xE5rtal och sj\\xE4lvfallet IMDb ID:n.\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"struktur\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#struktur\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Struktur\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"D\\xE5 jag i ett slags version 1.0.0 av CLI:t endast beh\\xF6ver ett enkelt s\\xE4tt att komma \\xE5t IMDb ID:n skulle man lika g\\xE4rna kunna skriva all kod i en och samma \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" fil. Men ska CLI:t l\\xE4ngre fram kunna g\\xF6ra mer saker blir det lite sv\\xE5rt att skala projektet och bygga vidare p\\xE5 det s\\xE5 d\\xE4rf\\xF6r valde jag att dela upp CLI:t i tv\\xE5 olika klasser och en \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\". Klasserna som skapades var en IMDb klass och en klass \",(0,e.jsx)(n.code,{children:\"queryHelper\"}),\" f\\xF6r att genomf\\xF6ra lite manipulering av str\\xE4ngar.\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"npm-paket\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#npm-paket\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"NPM-paket\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Jag anv\\xE4de mig av f\\xF6ljande npm-paket f\\xF6r att skapa mitt CLI:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/chalk\",children:\"Chalk\"}),\" - F\\xF6r att s\\xE4tta lite f\\xE4rg p\\xE5 bland annat \",(0,e.jsx)(n.code,{children:\"console.log\"}),\".\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/request\",children:\"Request\"}),\" - Ett enkelt s\\xE4tt att g\\xF6ra http requests.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/cheerio\",children:\"Cheerio\"}),\" - F\\xF6r att skrapa IMDbs hemsida med en jQuery-liknande syntax.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/clear\",children:\"Clear\"}),\" - Ett paket vars enkla uppgift \\xE4r att rensa terminalf\\xF6nstret.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/figlet\",children:\"Figlet\"}),\" - Ett paket f\\xF6r att enkelt skapa ascii-konst av text. CLI:t m\\xE5ste ju vara lite snyggt ocks\\xE5.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/inquirer\",children:\"Inquirer\"}),\" - Anv\\xE4ndes f\\xF6r att fr\\xE5ga anv\\xE4ndaren om s\\xF6kstr\\xE4ng och validera svaret.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/ora\",children:\"Ora\"}),\" - Ett paket f\\xF6r att ge anv\\xE4ndaren lite feedback i form av en spinner undertiden som IMDb skrapas och s\\xF6kresultatet samlas in.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/table-master\",children:\"Table-master\"}),\" - Anv\\xE4ndes f\\xF6r att visa upp s\\xF6kresultatet i en tabell.\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"genomf\\xF6rande\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#genomf\\xF6rande\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Genomf\\xF6rande\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Hur bygger man d\\xE5 ett Node-baserat CLI f\\xF6r att skrapa IMDb:s hemsida och visa upp resultatet? Jag t\\xE4nkte h\\xE4r g\\xE5 igenom steg f\\xF6r steg hur det skulle kunna se ut, f\\xF6rhoppningsvis utan att g\\xE5 in i f\\xF6r noga detalj om allt.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Starta projektet med en \",(0,e.jsx)(n.code,{children:\"npm init\"}),\" f\\xF6r att skapa generera en \",(0,e.jsx)(n.strong,{children:\"package.json\"}),\" f\\xF6ljt av en \",(0,e.jsx)(n.code,{children:\"git init\"}),\". Varf\\xF6r inte anv\\xE4nda git liksom?\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Installera d\\xE4refter alla npm-paket som kommer att anv\\xE4ndas:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"--save\"}),\" chalk request cheerio \",(0,e.jsx)(n.span,{className:\"token function\",children:\"clear\"}),` figlet inquirer ora table-master\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Skapa d\\xE4refter en \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" fil som agerar sj\\xE4lva utg\\xE5ngspunkten f\\xF6r CLI:t. De enda npm-paket som beh\\xF6vs i just denna fil \\xE4r \",(0,e.jsx)(n.code,{children:\"clear\"}),\" och \",(0,e.jsx)(n.code,{children:\"inquirer\"}),\" d\\xE5 de \\xF6vriga paketen fr\\xE4mst kommer anv\\xE4ndas i ett senare skeda av IMDb klassen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6ljande kod finns i min \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\":\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"index.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" clear \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'clear'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inquirer \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'inquirer'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inputError \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Please enter a query to search for...'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// setup of question\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" question \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'input'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'searchString'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"11\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"message\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'What do you want to search for?\\\\n'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"12\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"validate\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),` inputError\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"13\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"15\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"16\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// clear the terminal window\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"17\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"clear\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"18\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"19\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// display colorful IMDb header\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"20\",children:[(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"IMDb\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"displayHeader\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"21\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"22\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// prompt the user for a search string\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"23\",children:[\"inquirer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"prompt\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"question\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"answer\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"24\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" query \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"queryHelper\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"answer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"searchString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"25\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" result \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"IMDb\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"getSanitizedQuery\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" answer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"searchString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"26\",children:[\"  result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"scrape\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"27\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"28\",children:`\n`})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6rst och fr\\xE4mst anv\\xE4nds \",(0,e.jsx)(n.code,{children:\"require\"}),\" f\\xF6r att f\\xE5 in de npm-paket som anv\\xE4nds av filen, men \\xE4ven importeras de tv\\xE5 klasserna som \\xE4n s\\xE5 l\\xE4nge inte finns.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"const question = [...]\"}),\" deklarerar en fr\\xE5ga med en tillh\\xF6rande validering. Om inte valideringen g\\xE5r igenom s\\xE5 skrivs \",(0,e.jsx)(n.code,{children:\"inputError\"}),\" str\\xE4ngen ut i terminalen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"D\\xE4refter rensas terminalf\\xF6nstret p\\xE5 samma s\\xE4tt som att sj\\xE4lv skriva \",(0,e.jsx)(n.code,{children:\"clear\"}),` i terminalen.\nSedan kallas en statisk metod fr\\xE5n IMDb klassen som av sitt namn kanske avsl\\xF6jar vad den g\\xF6r, men mer om metoden n\\xE4r jag g\\xE5r igenom min IMDb klass.`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"L\\xE4ngst ner i filen skapas sj\\xE4lva prompten med hj\\xE4lp av \",(0,e.jsx)(n.code,{children:\"inquirer\"}),\" d\\xE4r den tidigare question-arrayen skickas in och ett svar ges i ett promise.\",(0,e.jsx)(n.br,{}),`\n`,\"Inuti detta promise skapas f\\xF6rst en ny instans av \",(0,e.jsx)(n.code,{children:\"queryHelper\"}),\" klassen och en instans av IMDb klassen skapas med hj\\xE4lp av en tv\\xE5 parametrar:\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Den f\\xF6rsta parametern \",(0,e.jsx)(n.code,{children:\"query.getSanitizedQuer()\"}),' g\\xE5r ut p\\xE5 omvandla en str\\xE4ng fr\\xE5n \"Harry Potter\" till \"Harry+Potter\" d\\xE5 det formatet beh\\xF6vs senare n\\xE4r IMDbs webbplats skrapas.']}),`\n`,(0,e.jsxs)(n.li,{children:[\"Den andra parametern \",(0,e.jsx)(n.code,{children:\"answer.searchString\"}),' \\xE4r s\\xF6kstr\\xE4ngen som anv\\xE4ndaren matar in i or\\xF6rd form, det vill s\\xE4ga exmpelvis \"Harry Potter\". Varf\\xF6r det \\xE4r intressant att h\\xE5lla kvar i originals\\xF6kstr\\xE4ngen kommer visa sig i sj\\xE4lva IMDb klassen.']}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Men innan vi g\\xE5r igenom sj\\xE4lva IMDb klassen d\\xE4r sj\\xE4lva tyngdlyften i det h\\xE4r CLI:t h\\xE4nder g\\xE5r vi igenom queryHelper klassen d\\xE5 den (i alla fall f\\xF6r version 1.0.0) \\xE4r relativt liten.\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"queryHelper.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"exports\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"queryHelper\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Creates an instance of queryHelper.\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"initialQuery\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@memberof\"}),` queryHelper\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"7\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"constructor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"initialQuery\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"8\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" initialQuery\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"9\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * returns the query but sanitized\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * replace all spaces with pluses\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@returns\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"15\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getSanitizedQuery\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"16\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-source language-regex\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'+'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"17\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"18\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"19\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Match IMDb ID's from hrefs\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"20\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"21\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@static\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"22\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"href\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"23\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@returns\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),` containing IMDb ID\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"24\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"25\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"static\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getIMDbID\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"href\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"26\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" href\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"match\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsxs)(n.span,{className:\"token regex-source language-regex\",children:[\"tt\",(0,e.jsx)(n.span,{className:\"token group punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token char-set class-name\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token quantifier number\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token group punctuation\",children:\")\"}),(0,e.jsxs)(n.span,{className:\"token char-class\",children:[(0,e.jsx)(n.span,{className:\"token char-class-punctuation punctuation\",children:\"[\"}),(0,e.jsxs)(n.span,{className:\"token range\",children:[\"0\",(0,e.jsx)(n.span,{className:\"token range-punctuation operator\",children:\"-\"}),\"9\"]}),(0,e.jsx)(n.span,{className:\"token char-class-punctuation punctuation\",children:\"]\"})]})]}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"toString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"27\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"28\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Klassen best\\xE5r allts\\xE5 av en konstruktor och tv\\xE5 metoder. Den f\\xF6rsta metoden \",(0,e.jsx)(n.code,{children:\"getSanitizedQuery()\"}),\" returnerar en s\\xF6kstr\\xE4ng d\\xE4r alla mellanrum i str\\xE4ngen har bytts ut mot plustecken. Den andra metoden \",(0,e.jsx)(n.code,{children:\"getIMDbID()\"}),\" tar \",(0,e.jsx)(n.strong,{children:\"href\"}),\" som parameter och resturnerar sj\\xE4lva IMDb ID:t fr\\xE5n en URL. Den extraherar allts\\xE5 \",(0,e.jsx)(n.strong,{children:\"tt0411008\"}),\" fr\\xE5n \",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.a,{href:\"http://www.imdb.com/title/tt0411008/\",children:\"http://www.imdb.com/title/tt0411008/\"})}),\" Metoden \\xE4r statisk d\\xE4rf\\xF6r att IMDb klassen anv\\xE4nder sig av denna metod, men det fanns inget behov av att skapa en ny instans av \",(0,e.jsx)(n.code,{children:\"queryHelper\"}),\" inuti IMDb klassen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Slutligen har vi kvar sj\\xE4lva IMDb klassen \",(0,e.jsx)(n.strong,{children:\"IMDb.js\"}),\" som best\\xE5r av ett antal metoder.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"F\\xF6rst s\\xE5 anv\\xE4nds require f\\xF6r att f\\xE5 in de \\xF6vriga npm-paket som \\xE4nnu inte anv\\xE4nts, men ocks\\xE5 queryHelper klassen:\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" request \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'request'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" cheerio \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'cheerio'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" ora \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'ora'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" tab \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'table-master'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" chalk \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'chalk'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" figlet \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'figlet'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" queryHelper \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'./queryHelper'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"D\\xE4refter skapas och exporteras sj\\xE4lva IMDb klassen med en konstruktor:\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"exports\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"IMDb\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Creates an instance of IMDb.\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"query\"}),` - search query that has been sanitized\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"6\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"originalQuery\"}),` - The original search query\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"  */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"constructor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" originalQuery\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"originalQuery\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" originalQuery\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"11\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"url\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"http://www.imdb.com/search/title?title=\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"12\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"13\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"outputColor\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" chalk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"hex\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'#f3ce13'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"15\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:['Konstruktorn har tv\\xE5 parametrar och det \\xE4r allts\\xE5 sj\\xE4lva s\\xF6kstr\\xE4ngen i dess original och i den \"plussade\" formen. D\\xE4refter s\\xE4tts ',(0,e.jsx)(n.code,{children:\"this.url\"}),\" med hj\\xE4lp av den plussade s\\xF6kstr\\xE4ngen som i en annan metod kommer anv\\xE4ndas f\\xF6r att g\\xF6ra en reuqest och skrapa IMDb.\",(0,e.jsx)(n.br,{}),`\n`,(0,e.jsx)(n.code,{children:\"this.results\"}),\" \\xE4r en tom array som senare ska fyllas p\\xE5 med s\\xF6kresultat och \",(0,e.jsx)(n.code,{children:\"this.outputColor\"}),\" anv\\xE4nder npm-paketet \",(0,e.jsx)(n.code,{children:\"chalk\"}),\" f\\xF6r att spara ner IMDb:s gula f\\xE4rg som i en annan metod kommer anv\\xE4ndas f\\xF6r lite f\\xE4rgrannare utskrift i terminalen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"D\\xE4refter inneh\\xE5ller klassen en statisk metod f\\xF6r att visa lite ascii-text. Metoden \\xE4r statisk eftersom att den anropas i \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" innan en instans av sj\\xE4lva IMDb klassen har skapats. Eftersom att metoden anropas innan klassen har skapats g\\xE5r den inte att anv\\xE4nda IMDbf\\xE4rgen som deklarerats som \",(0,e.jsx)(n.code,{children:\"this.outputColor\"}),\" i klassens konstruktor. Det kan \\xE4nd\\xE5 vara bra att ha denna f\\xE4rg sparad om den gula f\\xE4rgen skulle anv\\xE4ndas l\\xE4ngre fram till andra saker ocks\\xE5.\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Static method to display IMDB header for the CLI\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"static\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"displayHeader\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" imdbColor \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" chalk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"hex\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'#f3ce13'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"imdbColor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"figlet\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"textSync\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'IMDb'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r att bygga ut \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" arrayen skapas ytterligare en metod p\\xE5 IMDb klassen som kan se ut p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Push to results array\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"title\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"year\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"6\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"imdbID\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createSearchResult\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" year\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" imdbID\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"push\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" year\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" imdbID\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Denna metod anv\\xE4nder \",(0,e.jsx)(n.code,{children:\"push\"}),\" f\\xF6r att bygga ut arrayen med ett objekt som inneh\\xE5ller titel, \\xE5rtal och IMDb ID.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"IMDb klassen inneh\\xE5ller sedan en n\\xE5got tung metod f\\xF6r att utf\\xF6ra sj\\xE4lva skrapandet av IMDb och komma \\xE5t s\\xF6kresultaten. Metoden g\\xE5r kort och gott ut p\\xE5 att g\\xF6ra en request till IMDb och loopa genom ett ex antal s\\xF6kresultat och pusha dessa till \",(0,e.jsx)(n.code,{children:\"this.results\"})]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\" \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Perform the scrape of imdb to gather search results\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"scrape\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"6\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" spinner \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"ora\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Searching IMDb. Please wait...'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"start\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"request\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"url\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" body\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"9\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"11\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"12\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" $ \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" cheerio\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"load\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"body\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"13\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'.lister-item-header a'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"each\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"index\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" value\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=>\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"15\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// create variables to be pushed as search result\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"16\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" title \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"text\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"17\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" year \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"next\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"text\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-source language-regex\",children:(0,e.jsx)(n.span,{className:\"token char-set class-name\",children:\"\\\\D\"})}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"18\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" imdbID \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"outputColor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"queryHelper\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"getIMDbID\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'href'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"19\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"20\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"createSearchResult\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" year\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" imdbID\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"21\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"22\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// stop the loop after 15 items\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"23\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" index \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"<\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"14\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"24\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"25\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"26\",children:[\"        spinner\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"stop\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"27\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"renderSearchResults\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"28\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"29\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"30\",children:[\"        spinner\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"stop\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"31\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"Program exit with error: \"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"error\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"32\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"33\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"34\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"N\\xE5gra nyckeldetaljer i den h\\xE4r metoden \\xE4r att f\\xF6rst och fr\\xE4mst anv\\xE4nds \",(0,e.jsx)(n.code,{children:\"ora\"}),\" npm-paketet f\\xF6r att starta en spinner som ger anv\\xE4ndaren lite feedback. S\\xF6kresultaten loopas genom med hj\\xE4lp av \",(0,e.jsx)(n.code,{children:\"cheerio\"}),\" och \",(0,e.jsx)(n.code,{children:\"$(.lister-item-header a).each()\"}),\" d\\xE4r titlar, \\xE5rtal och id:n sparas till \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" med hj\\xE4lp av metoden \",(0,e.jsx)(n.code,{children:\"this.createSearchResult()\"}),\".\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"N\\xE4r loopen har stannat efter att de femton f\\xF6rsta s\\xF6kresultaten har pushats till \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" stoppas spinnern med hj\\xE4lp av \",(0,e.jsx)(n.code,{children:\"spinner.stop()\"}),\" och en tabell med s\\xF6kresultaten visas upp i terminalen med hj\\xE4lp av metoden \",(0,e.jsx)(n.code,{children:\"this.renderSearchResults()\"}),\". Den metoden ser ut p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Render either a table with search results\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * or a message of no search results were found\n`})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"renderSearchResults\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Object\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"keys\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"===\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"chalk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"red\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'Could not find any search results for \"'}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"originalQuery\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:'\". Please try again.'}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"table\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"11\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Denna metod kollar f\\xF6rst om \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" \\xE4r tom (inga s\\xF6kresultat hittades) eller ej och antingen renderar en tabell med s\\xF6kresultaten eller ger feedback om att inga s\\xF6kresultat kunde hittas. H\\xE4r anv\\xE4nds \",(0,e.jsx)(n.code,{children:\"this.originalQuery\"}),\" som allts\\xE5 exempelvis skulle motsvara \",(0,e.jsx)(n.code,{children:\"Harry Potter\"}),\" och inte \",(0,e.jsx)(n.code,{children:\"Harry+Potter\"}),\".\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"g\\xF6r-clit-k\\xF6rbart-globalt\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#g\\xF6r-clit-k\\xF6rbart-globalt\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"G\\xF6r CLI:t k\\xF6rbart globalt\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r att slippa skriva \",(0,e.jsx)(n.code,{children:\"node index.js\"}),\" och hela tiden befinna sig i samma path som \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" finns det ett enkelt knep att g\\xF6ra det h\\xE4r CLI:t globalt tillg\\xE4ngligt genom att endast skriva exempelvis \",(0,e.jsx)(n.code,{children:\"imdb\"}),\" i terminalen, oberoende vilken path man har.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"B\\xF6rja med att uppgradera \",(0,e.jsx)(n.strong,{children:\"package.json\"}),\" med f\\xF6ljande:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"package.json\"}),(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"language-json code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"bin\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"imdb\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"./index.js\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Detta binder kommandot \",(0,e.jsx)(n.code,{children:\"imdb\"}),\" till att k\\xF6ra \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\". L\\xE4gg d\\xE4refter till f\\xF6ljande shebang h\\xF6gst upp i \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\":\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"index.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token hashbang comment\",children:\"#!/usr/bin/env node\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" clear \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'clear'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inquirer \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'inquirer'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"//........\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Installera d\\xE4refter CLI:t globalt med hj\\xE4lp av:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"-g\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"Nu \\xE4r CLI:t k\\xF6rbart globalt \\u{1F389}\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Det var kort och gott all funktionalitet som finns i skrivande stund i detta Node-baserade CLI som skrapar IMDb efter s\\xF6kresultat och IMDb ID:n. Det f\\xE4rdiga CLI:et finns p\\xE5 \",(0,e.jsx)(n.a,{href:\"https://github.com/danielv14/imdb-cli\",children:\"GitHub\"})]})]})}function v(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var w=v;return f(j);})();\n;return Component;"},"_id":"posts/node-cli-for-att-skrapa-imdb.mdx","_raw":{"sourceFilePath":"posts/node-cli-for-att-skrapa-imdb.mdx","sourceFileName":"node-cli-for-att-skrapa-imdb.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/node-cli-for-att-skrapa-imdb"},"type":"Post","url":"/blogg/node-cli-for-att-skrapa-imdb","dateFormatted":"2017-09-01"},"nextPost":{"title":"IMDb CLI version 1.0.1 till 2.3.0","date":"2019-07-08T00:00:00.000Z","summary":"Detta Ã¤r vad som har hÃ¤nt frÃ¥n version 1.0.1 till version 2.3.0.","body":{"raw":"\nHur mycket kan man gÃ¶ra med ett \"enkelt\" CLI fÃ¶r att hÃ¤mta information om filmer och serier frÃ¥n IMDb? Ganska mycket visar det sig. Det hÃ¤r Ã¤r vad som har hÃ¤nt med IMDb verktyget frÃ¥n version 1.0.1 till 2.3.0.\n\nJag har tidigare [skrivit](/blogg/node-cli-for-att-skrapa-imdb) lite om det node-baserade CLI verktyg jag skapade fÃ¶r att enkelt komma Ã¥t filmers och tv-seriers \"IMDb ID:n\". Nu har jag anvÃ¤nt verson 1.0.1 av verktyget sen i septemper 2017 och kÃ¤nde att det var dags att gÃ¶ra CLI:t mer flexibelt, dÃ¥ jag av och till kÃ¤nde att det var viss funktionalitet som saknades.\n\n## Ny funktionalitet\n\nTill och frÃ¥n kÃ¤ndes CLI:t inte tillrÃ¤ckligt flexibelt nÃ¤r jag anvÃ¤nde det och mÃ¥nga gÃ¥nger hade jag velat ha ett bÃ¤ttre sammanhang nÃ¤r sÃ¶kresultat presenterades i en tabell i terminalen. I 1.0.0 visades enbart titlar, Ã¥rtal och IMDB ID:n. Jag kÃ¤nde Ã¤ven att det vore smidigt att enbart sÃ¶ka pÃ¥ antingen filmer eller serier och kunna sortera sÃ¶kresultatet utifrÃ¥n Ã¥rtal eller titlar.\n\nBilden hÃ¤r nedan sammanfattar den nya funktionalitet har tillkommit under resans gÃ¥ng frÃ¥n 1.0.1 till 2.3.0.\n\n![IMDB-cli-help](/img/posts/imdb-help-text.png)\n\n- `-v --version` - Skriver ut versionen av CLI:t.\n- `-p --plot` - AnvÃ¤nder man denna flagga sÃ¥ anvÃ¤nds filmernas och seriernas handling i sÃ¶kresultatet. Default sÃ¥ trunkeras handling till ett visst antal tecken.\n- `-l --limit-plot [number]` - Denna flagga lÃ¥ter anvÃ¤ndaren sjÃ¤lv bestÃ¤mma hur lÃ¥ng handlingen ska vara i sÃ¶kresultatet innan det trunkeras.\n- `-t --title` - Denna flagga gÃ¶r att man kan sÃ¶ka direkt nÃ¤r man anropar CLI:t. Tidigare sÃ¥ skrev man bara `imdb` och tyckte _ENTER_ fÃ¶r att sedan mata in en titel att sÃ¶ka efter.\n- `-m --movies` - SÃ¶k endast efter filmer.\n- `-s --series` - SÃ¶k endast efter serier\n- `-o --order-by [column]` - Med denna flagga kan man sortera antingen i bokstavsordning fÃ¶r titlar eller i fallande ordning efter Ã¥rtal.\n- `-h --help` - Visar hjÃ¤lptext om hur CLI:t kan anvÃ¤ndas.\n\n## UtvecklingsmiljÃ¶n\n\nEn hel del har hÃ¤nt _behind the scenes_ nÃ¤r det gÃ¤ller 1.0.1 till 2.3.0 av IMDB CLI:t ocksÃ¥ - allt ifrÃ¥n argument parsning till git hooks och testning.\n\n### Parsa argument\n\nMÃ¶jligheten att parsa argument, det vill sÃ¤ga anvÃ¤nda `imdb --movies --title \"star wars\"` fÃ¶r att direkt sÃ¶ka enbart efter Star Wars filmer, kommer ifrÃ¥n det populÃ¤ra npm paketet [commander](https://www.npmjs.com/package/commander).\n\nCommander gÃ¶r det vÃ¤ldigt enkelt att skriva node-baserade CLI verktyg. Se bara det fÃ¶renklade exemplet nedan som visar hur `-p --plot` flaggan anvÃ¤nds fÃ¶r att skapa upp en IMDb klass dÃ¤r sÃ¶kresultat ska inkludera handlingar.\n\n```js:example-cli.js showLineNumbers\nconst program = require('commander');\n\nprogram\n  .option('-p, --plot', 'Show plot in search result')\n  .parse(process.argv);\n\nconst instance = new IMDb({showPlot: !!program.plot})\n```\n\n### Skrapning ersatt av REST API\n\nI version 1.0.1 sÃ¥ anvÃ¤ndes npm paketet Cherrio fÃ¶r att skrapa sjÃ¤lva IMDb webbplatsen efter sÃ¶kresultat och IMDb ID:n. I version 2.0.0 ersattes denna skrapning med API:et frÃ¥n [OMDb](http://www.omdbapi.com/).\n\nOm jag inte minns fel sÃ¥ var det API:et inte Ã¶ppet nÃ¤r jag initalt skapade IMDb CLI:et - dÃ¤rav att jag byggde det som en scraper. Nu dÃ¤remot Ã¤r API:et Ã¶ppet sÃ¥ lÃ¤nge man har en api nyckel och hÃ¥ller sig under 1.000 requests om dagen. Dessutom har man via OMDb API:et tillgÃ¥ng till IMDb ID:n, score!\n\n### Testning\n\nIMDb CLI anvÃ¤nder numera Jest fÃ¶r unit tester, vilket underlÃ¤ttar tryggheten i eventuell framtida refaktorering och hjÃ¤lper till att sÃ¤kerstÃ¤lla kvalitet av ny funktionalitet. Ã„ven om CLI:t inte har oerhÃ¶rt mÃ¥nga rader kod Ã¤r det alltid skÃ¶nt att ha kodbasen (nÃ¥gorlunda) testad.\n\n![IMDB-jest-test](/img/posts/imdb-jest-test.png)\n\n### Omskrivning med TypeScript\n\nHela CLI:et Ã¤r sedan 2.3.0 omskrivet med TypeScript. Detta betyder att CLI:et numera har en byggprocess dÃ¤r kÃ¤llkoden finns i en `src/` mapp med TypeScript filer som sedan byggs till en `dist/` mapp.\n\nI och med att jest tester redan fanns innan omskrivningen till TypeScript genomfÃ¶rdes sÃ¥ blev refaktoreringen i och med befintliga tester en nÃ¥got mer trygg process.\n\n**Runt 60 fel** hittades i koden initialt i Ã¶vergÃ¥ngen till TypeScript. De flesta felen berodde pÃ¥ att variabler, funktionsparametrar och sÃ¥ vidare inte var typade - men ett och annan potentiellt problem kunde rÃ¤ttas till och och med Ã¶vergÃ¥ngne till TypeScript.\n\nNu nÃ¤r koden Ã¤r skriven med TypeScript och Ã¤ven testas med Jest sÃ¥ kommer framtida refaktorering och funktionstillvÃ¤xt bli enklare dÃ¥ regression bÃ¤ttre kan undvikas och problem i koden kan upptÃ¤ckas snabbare.\n\n### Git hooks\n\nTvÃ¥ stycken git hooks anvÃ¤nds fÃ¶r att fÃ¶rsÃ¶ka fÃ¶rhindra problem, fÃ¶rebygga buggar och se till att koden har korrekt formatering innan den committas. FÃ¶r att hantera git hooks sÃ¥ anvÃ¤nds npm paketet [Husky](https://www.npmjs.com/package/husky).\n\n- **pre-commit** - Innan nÃ¥got committas sÃ¥ kollas det efter TypeScript errors och tslint anvÃ¤nds fÃ¶r att linta alla `*.ts` kod.\n- **pre-push** - FÃ¶r att det ens ska gÃ¥ att pusha nÃ¥got till en remote branch sÃ¥ mÃ¥ste alla tester gÃ¥ igenom fÃ¶rst. Detta gÃ¶r att det gÃ¥r lite lÃ¥ngsammare om man committar och pushar ofta, men fungerar som en fail safe fÃ¶r att fÃ¶rhindra regression.\n\n## Kvar att gÃ¶ra?\n\nVad finns dÃ¥ kvar att gÃ¶ra, tro? I skrivande stund vet jag inte riktigt faktiskt. Kanske har jag en lista med nya features att gÃ¥ igenom nÃ¤r jag anvÃ¤nt IMDb CLI:t i tvÃ¥ Ã¥r till och slÃ¤pper version 3.0.0 eller dylikt...\n\n![IMDB-cli-in-action](/img/posts/imdb-cli-in-action.png)\n","code":"var Component=(()=>{var h=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var t in e)i(a,t,{get:e[t],enumerable:!0})},l=(a,e,t,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of p(e))!g.call(a,r)&&r!==t&&i(a,r,{get:()=>e[r],enumerable:!(s=m(e,r))||s.enumerable});return a};var v=(a,e,t)=>(t=a!=null?h(k(a)):{},l(e||!a||!a.__esModule?i(t,\"default\",{value:a,enumerable:!0}):t,a)),b=a=>l(i({},\"__esModule\",{value:!0}),a);var d=u((x,c)=>{c.exports=_jsx_runtime});var D={};f(D,{default:()=>y,frontmatter:()=>N});var n=v(d()),N={title:\"IMDb CLI version 1.0.1 till 2.3.0\",summary:\"Detta \\xE4r vad som har h\\xE4nt fr\\xE5n version 1.0.1 till version 2.3.0.\",date:new Date(1562544e6)};function o(a){let e=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",img:\"img\",ul:\"ul\",li:\"li\",code:\"code\",em:\"em\",h3:\"h3\",div:\"div\",pre:\"pre\",strong:\"strong\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:'Hur mycket kan man g\\xF6ra med ett \"enkelt\" CLI f\\xF6r att h\\xE4mta information om filmer och serier fr\\xE5n IMDb? Ganska mycket visar det sig. Det h\\xE4r \\xE4r vad som har h\\xE4nt med IMDb verktyget fr\\xE5n version 1.0.1 till 2.3.0.'}),`\n`,(0,n.jsxs)(e.p,{children:[\"Jag har tidigare \",(0,n.jsx)(e.a,{href:\"/blogg/node-cli-for-att-skrapa-imdb\",children:\"skrivit\"}),' lite om det node-baserade CLI verktyg jag skapade f\\xF6r att enkelt komma \\xE5t filmers och tv-seriers \"IMDb ID:n\". Nu har jag anv\\xE4nt verson 1.0.1 av verktyget sen i septemper 2017 och k\\xE4nde att det var dags att g\\xF6ra CLI:t mer flexibelt, d\\xE5 jag av och till k\\xE4nde att det var viss funktionalitet som saknades.']}),`\n`,(0,n.jsxs)(e.h2,{id:\"ny-funktionalitet\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#ny-funktionalitet\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Ny funktionalitet\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Till och fr\\xE5n k\\xE4ndes CLI:t inte tillr\\xE4ckligt flexibelt n\\xE4r jag anv\\xE4nde det och m\\xE5nga g\\xE5nger hade jag velat ha ett b\\xE4ttre sammanhang n\\xE4r s\\xF6kresultat presenterades i en tabell i terminalen. I 1.0.0 visades enbart titlar, \\xE5rtal och IMDB ID:n. Jag k\\xE4nde \\xE4ven att det vore smidigt att enbart s\\xF6ka p\\xE5 antingen filmer eller serier och kunna sortera s\\xF6kresultatet utifr\\xE5n \\xE5rtal eller titlar.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Bilden h\\xE4r nedan sammanfattar den nya funktionalitet har tillkommit under resans g\\xE5ng fr\\xE5n 1.0.1 till 2.3.0.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/img/posts/imdb-help-text.png\",alt:\"IMDB-cli-help\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-v --version\"}),\" - Skriver ut versionen av CLI:t.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-p --plot\"}),\" - Anv\\xE4nder man denna flagga s\\xE5 anv\\xE4nds filmernas och seriernas handling i s\\xF6kresultatet. Default s\\xE5 trunkeras handling till ett visst antal tecken.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-l --limit-plot [number]\"}),\" - Denna flagga l\\xE5ter anv\\xE4ndaren sj\\xE4lv best\\xE4mma hur l\\xE5ng handlingen ska vara i s\\xF6kresultatet innan det trunkeras.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-t --title\"}),\" - Denna flagga g\\xF6r att man kan s\\xF6ka direkt n\\xE4r man anropar CLI:t. Tidigare s\\xE5 skrev man bara \",(0,n.jsx)(e.code,{children:\"imdb\"}),\" och tyckte \",(0,n.jsx)(e.em,{children:\"ENTER\"}),\" f\\xF6r att sedan mata in en titel att s\\xF6ka efter.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-m --movies\"}),\" - S\\xF6k endast efter filmer.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-s --series\"}),\" - S\\xF6k endast efter serier\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-o --order-by [column]\"}),\" - Med denna flagga kan man sortera antingen i bokstavsordning f\\xF6r titlar eller i fallande ordning efter \\xE5rtal.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-h --help\"}),\" - Visar hj\\xE4lptext om hur CLI:t kan anv\\xE4ndas.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"utvecklingsmilj\\xF6n\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#utvecklingsmilj\\xF6n\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Utvecklingsmilj\\xF6n\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"En hel del har h\\xE4nt \",(0,n.jsx)(e.em,{children:\"behind the scenes\"}),\" n\\xE4r det g\\xE4ller 1.0.1 till 2.3.0 av IMDB CLI:t ocks\\xE5 - allt ifr\\xE5n argument parsning till git hooks och testning.\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"parsa-argument\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#parsa-argument\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Parsa argument\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"M\\xF6jligheten att parsa argument, det vill s\\xE4ga anv\\xE4nda \",(0,n.jsx)(e.code,{children:'imdb --movies --title \"star wars\"'}),\" f\\xF6r att direkt s\\xF6ka enbart efter Star Wars filmer, kommer ifr\\xE5n det popul\\xE4ra npm paketet \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/commander\",children:\"commander\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Commander g\\xF6r det v\\xE4ldigt enkelt att skriva node-baserade CLI verktyg. Se bara det f\\xF6renklade exemplet nedan som visar hur \",(0,n.jsx)(e.code,{children:\"-p --plot\"}),\" flaggan anv\\xE4nds f\\xF6r att skapa upp en IMDb klass d\\xE4r s\\xF6kresultat ska inkludera handlingar.\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"example-cli.js\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" program \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"require\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'commander'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"2\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`program\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"option\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'-p, --plot'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Show plot in search result'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"parse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"process\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"argv\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"6\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" instance \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"IMDb\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"showPlot\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"program\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"plot\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.h3,{id:\"skrapning-ersatt-av-rest-api\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#skrapning-ersatt-av-rest-api\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Skrapning ersatt av REST API\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I version 1.0.1 s\\xE5 anv\\xE4ndes npm paketet Cherrio f\\xF6r att skrapa sj\\xE4lva IMDb webbplatsen efter s\\xF6kresultat och IMDb ID:n. I version 2.0.0 ersattes denna skrapning med API:et fr\\xE5n \",(0,n.jsx)(e.a,{href:\"http://www.omdbapi.com/\",children:\"OMDb\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Om jag inte minns fel s\\xE5 var det API:et inte \\xF6ppet n\\xE4r jag initalt skapade IMDb CLI:et - d\\xE4rav att jag byggde det som en scraper. Nu d\\xE4remot \\xE4r API:et \\xF6ppet s\\xE5 l\\xE4nge man har en api nyckel och h\\xE5ller sig under 1.000 requests om dagen. Dessutom har man via OMDb API:et tillg\\xE5ng till IMDb ID:n, score!\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"testning\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#testning\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Testning\"]}),`\n`,(0,n.jsx)(e.p,{children:\"IMDb CLI anv\\xE4nder numera Jest f\\xF6r unit tester, vilket underl\\xE4ttar tryggheten i eventuell framtida refaktorering och hj\\xE4lper till att s\\xE4kerst\\xE4lla kvalitet av ny funktionalitet. \\xC4ven om CLI:t inte har oerh\\xF6rt m\\xE5nga rader kod \\xE4r det alltid sk\\xF6nt att ha kodbasen (n\\xE5gorlunda) testad.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/img/posts/imdb-jest-test.png\",alt:\"IMDB-jest-test\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"omskrivning-med-typescript\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#omskrivning-med-typescript\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Omskrivning med TypeScript\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hela CLI:et \\xE4r sedan 2.3.0 omskrivet med TypeScript. Detta betyder att CLI:et numera har en byggprocess d\\xE4r k\\xE4llkoden finns i en \",(0,n.jsx)(e.code,{children:\"src/\"}),\" mapp med TypeScript filer som sedan byggs till en \",(0,n.jsx)(e.code,{children:\"dist/\"}),\" mapp.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"I och med att jest tester redan fanns innan omskrivningen till TypeScript genomf\\xF6rdes s\\xE5 blev refaktoreringen i och med befintliga tester en n\\xE5got mer trygg process.\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Runt 60 fel\"}),\" hittades i koden initialt i \\xF6verg\\xE5ngen till TypeScript. De flesta felen berodde p\\xE5 att variabler, funktionsparametrar och s\\xE5 vidare inte var typade - men ett och annan potentiellt problem kunde r\\xE4ttas till och och med \\xF6verg\\xE5ngne till TypeScript.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Nu n\\xE4r koden \\xE4r skriven med TypeScript och \\xE4ven testas med Jest s\\xE5 kommer framtida refaktorering och funktionstillv\\xE4xt bli enklare d\\xE5 regression b\\xE4ttre kan undvikas och problem i koden kan uppt\\xE4ckas snabbare.\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"git-hooks\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#git-hooks\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Git hooks\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Tv\\xE5 stycken git hooks anv\\xE4nds f\\xF6r att f\\xF6rs\\xF6ka f\\xF6rhindra problem, f\\xF6rebygga buggar och se till att koden har korrekt formatering innan den committas. F\\xF6r att hantera git hooks s\\xE5 anv\\xE4nds npm paketet \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/husky\",children:\"Husky\"}),\".\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"pre-commit\"}),\" - Innan n\\xE5got committas s\\xE5 kollas det efter TypeScript errors och tslint anv\\xE4nds f\\xF6r att linta alla \",(0,n.jsx)(e.code,{children:\"*.ts\"}),\" kod.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"pre-push\"}),\" - F\\xF6r att det ens ska g\\xE5 att pusha n\\xE5got till en remote branch s\\xE5 m\\xE5ste alla tester g\\xE5 igenom f\\xF6rst. Detta g\\xF6r att det g\\xE5r lite l\\xE5ngsammare om man committar och pushar ofta, men fungerar som en fail safe f\\xF6r att f\\xF6rhindra regression.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"kvar-att-g\\xF6ra\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#kvar-att-g\\xF6ra\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Kvar att g\\xF6ra?\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Vad finns d\\xE5 kvar att g\\xF6ra, tro? I skrivande stund vet jag inte riktigt faktiskt. Kanske har jag en lista med nya features att g\\xE5 igenom n\\xE4r jag anv\\xE4nt IMDb CLI:t i tv\\xE5 \\xE5r till och sl\\xE4pper version 3.0.0 eller dylikt...\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/img/posts/imdb-cli-in-action.png\",alt:\"IMDB-cli-in-action\"})})]})}function I(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(o,a)})):o(a)}var y=I;return b(D);})();\n;return Component;"},"_id":"posts/imdb-cli-version-2-3-0.mdx","_raw":{"sourceFilePath":"posts/imdb-cli-version-2-3-0.mdx","sourceFileName":"imdb-cli-version-2-3-0.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/imdb-cli-version-2-3-0"},"type":"Post","url":"/blogg/imdb-cli-version-2-3-0","dateFormatted":"2019-07-08"}},"__N_SSG":true}