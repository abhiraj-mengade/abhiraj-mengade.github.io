<!DOCTYPE html><html lang="sv"><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta property="og:url" content="danielvernberg.se"/><meta property="og:locale" content="sv_SE"/><link rel="canonical" href="danielvernberg.se"/><title>Skapa ett request plugin i Nuxt.js - Daniel Vernberg</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="S√• h√§r skapar man enkelt ett request-plugin baserat p√• axios i Nuxt.js"/><meta property="og:title" content="Skapa ett request plugin i Nuxt.js"/><meta property="og:description" content="S√• h√§r skapar man enkelt ett request-plugin baserat p√• axios i Nuxt.js"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2019-06-15T00:00:00.000Z"/><meta name="next-head-count" content="13"/><link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;üë®‚Äçüíª&lt;/text&gt;&lt;/svg&gt;"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><style id="stitches">--sxs{--sxs:0 t-fyIhqy}@media{:root,.t-fyIhqy{--radii-small:4px;--radii-default:6px;--radii-rouded:10000px;--shadows-main:0px 4px 10px rgba(0, 0, 0, 0.09);--shadows-button:0px 4px 7px hsl(223.10000000000002, 100%, 87.5%);--shadows-buttonHover:0px 4px 10px hsl(223.10000000000002, 100%, 77%);--colors-primary:#6691FF;--colors-primaryDarken:#5484FF;--colors-secondary:#3fc179;--colors-backgroundColor:#FFF;--colors-backgroundColorSecondary:#FFF;--colors-backgroundColorHighlight:#EEF3FF;--colors-backgroundColorNavBar:hsl(0deg 0% 100% / 75%);--colors-textColor:#585858;--colors-textMutedColor:#a2a2a2;--colors-headingColor:#444444;--colors-backgroundGradient:linear-gradient(45deg, var(--colors-primary), var(--colors-secondary));--colors-backgroundGradintDarker:linear-gradient(45deg, var(--colors-primaryDarken), var(--colors-secondary));--fonts-main:'Quicksand', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;;--fonts-headings:'Quicksand', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;;--fonts-mono:'Fira Code', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;--fontSizes-0:0.8rem;--fontSizes-1:0.9rem;--fontSizes-2:1rem;--fontSizes-3:1.1rem;--fontSizes-4:1.2rem;--fontSizes-5:1.3rem;--fontSizes-6:1.5rem;--fontSizes-7:2rem;--fontSizes-base:16px;--fontSizes-baseDesktop:18px;--fontSizes-small:var(--fontSizes-1);--fontSizes-smaller:var(--fontSizes-0);--fontSizes-code:var(--fontSizes-0);--fontSizes-h1:var(--fontSizes-7);--fontSizes-h2:var(--fontSizes-6);--fontSizes-h3:var(--fontSizes-5);--fontSizes-h4:var(--fontSizes-4);--fontSizes-h5:var(--fontSizes-3);--fontSizes-h6:var(--fontSizes-2);--space-small:5px;--space-medium:10px;--space-large:20px;--space-mega:40px;--sizes-small:5px;--sizes-medium:10px;--sizes-large:20px;--sizes-mega:40px;--sizes-siteWidth:800px}}--sxs{--sxs:1 kUuBfw}@media{html,body,div,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,main,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}*[hidden]{display:none}body{background:var(--colors-backgroundColor);color:var(--colors-textColor);font-family:var(--fonts-main);font-weight:500}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:none}table{border-spacing:0}html{font-size:var(--fontSizes-base);-webkit-text-size-adjust:none;text-size-adjust:none}@media (min-width: 1024px){html{font-size:var(--fontSizes-baseDesktop)}}h1,h2,h3,h4,h5,h6{font-family:var(--fonts-headings);color:var(--colors-headingColor);line-height:1.2;letter-spacing:-0.5px;margin-top:1rem}h1,h2{margin-bottom:1rem;font-weight:700}h3,h4,h5,h6{font-weight:600;margin-bottom:0.7rem}h1{font-size:var(--fontSizes-h1)}h2{font-size:var(--fontSizes-h2)}h3{font-size:var(--fontSizes-h3)}h4{font-size:var(--fontSizes-h4)}h5{font-size:var(--fontSizes-h5)}h6{font-size:var(--fontSizes-h6)}a{color:var(--colors-primary);font-weight:bold;text-decoration:none;font-size:1rem;cursor:pointer}a:hover{text-decoration:underline}p,li{line-height:1.6}p{margin:0 0 1.2rem;overflow-wrap:break-word}ul{list-style:disc}ul li::marker{color:var(--colors-primary);font-size:var(--fontSizes-5)}ol{list-style:decimal}ol li::marker{color:var(--colors-primary);font-weight:bold;font-style:italic}ul,ol{margin-bottom:10px;padding-inline-start:1rem}li{margin:var(--space-medium) var(--space-small)}img{max-width:100%}pre{border-radius:var(--radii-default);font-size:1rem}blockquote{margin:0 0 1rem 0;padding:1rem;background:var(--colors-backgroundColorHighlight);border-radius:0.3rem}blockquote p{margin-bottom:0}code{font-family:var(--fonts-mono);font-size:var(--fontSizes-code);color:var(--colors-textColor);font-weight:bold}code:not([class^="language"]):after,code:not([class^="language"]):before{content:"`";font-weight:bold}strong{font-weight:bold;color:var(--colors-headingColor)}em{font-style:italic}span.token{font-size:var(--fontSizes-code)}}--sxs{--sxs:2 c-jGAclF c-bFBiOr c-bkUlwM c-bZNrxE c-gHYpeN c-jyhawZ c-hNeJhr c-cZmHrB c-dhzjXW PJLV c-jpsCDP c-fixGjY c-gjdJOs c-gzEirw c-iKShXp c-PJLV c-lmNeIA c-ifunjZ c-hnZZYz c-nvJKW c-bQzyIt c-bImmwG c-kedEAq c-grvOQP c-eytHCh c-jKTQyv c-dVkrah c-jNUAyN c-gATxoi c-bPgfrJ}@media{.c-jGAclF{box-shadow:var(--shadows-main);position:fixed;width:100%;background:var(--colors-backgroundColor);z-index:999}@supports (backdrop-filter: blur(20px)){.c-jGAclF{-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);background:var(--colors-backgroundColorNavBar)}}.c-bFBiOr{width:100%;max-width:var(--sizes-siteWidth);margin:0 auto}.c-bkUlwM{margin:0 var(--space-large)}.c-bZNrxE{display:flex;flex-direction:row}.c-gHYpeN{width:100%;height:60px;align-items:center;font-family:var(--fonts-headings);font-weight:bold;font-size:var(--fontSizes-5)}.c-jyhawZ{font-weight:inherit;color:inherit;margin:0;padding:0}.c-jyhawZ:hover{text-decoration:none}.c-hNeJhr{color:var(--colors-textMutedColor)}.c-cZmHrB{flex:1}.c-dhzjXW{display:flex}.c-jpsCDP{padding-top:60px}.c-fixGjY{display:flex;flex-direction:column}.c-gjdJOs{text-align:center}.c-gzEirw{display:inline-block;transform:skewY(-4deg);font-size:var(--fontSizes-7)}.c-iKShXp{display:inline-block;transform-origin:70% 70%;margin-right:var(--space-small)}.c-lmNeIA{max-width:600px;margin:0 auto}@media (min-width: 768px){.c-ifunjZ{margin:0 -15px}}.c-hnZZYz{cursor:pointer;border-radius:var(--radii-small);transition:background-color 0.2s ease;padding:var(--space-small)}.c-hnZZYz:hover{background-color:var(--colors-backgroundColorHighlight)}@media (min-width: 768px){.c-hnZZYz{padding:var(--space-small) var(--space-large)}}.c-nvJKW{color:white;text-align:center;font-weight:bold;border-radius:var(--radii-rouded);box-shadow:var(--shadows-button);transition:background 0.2s ease, box-shadow 0.2s ease-in-out;cursor:pointer;width:auto;display:inline-block}.c-nvJKW:hover{box-shadow:var(--shadows-buttonHover)}.c-bQzyIt{display:grid}.c-bImmwG{border-radius:var(--radii-default);background:var(--colors-backgroundColorSecondary);padding:var(--space-small);box-shadow:0px 4px 7px rgba(0, 0, 0, 0.09);transition:box-shadow 0.2s ease}.c-bImmwG:hover{box-shadow:0px 8px 15px rgba(0, 0, 0, 0.09)}.c-kedEAq{background:var(--colors-backgroundGradient);border-radius:var(--radii-default);height:6px;margin-bottom:6px}.c-grvOQP{padding-inline-start:0}.c-eytHCh{list-style:none;margin:var(--space-medium) 0}.c-jKTQyv{margin:0;color:var(--colors-textMutedColor);font-weight:bold}.c-dVkrah{---tokenBackground:#2E3440;---tokenBackgroundHighlight:#3C4453;---tokenCommentColor:#636f88;---tokenRegexColor:#ebcb8b;---tokenPropertyColor:#81A1C1;---tokenNumberColor:#B48EAD;---tokenSelectorColor:rgb(199, 146, 234);---tokenBooleanColor:var(---tokenPropertyColor);---tokenPunctuationColor:#81A1C1;---tokenFunctionColor:#88C0D0;---tokenStringColor:#A3BE8C;---tokenOperator:#81A1C1;---tokenBaseColor:#f8f8f2}.c-dVkrah code[class*="language-"],.c-dVkrah pre[class*="language-"]{color:var(---tokenBaseColor);background:none;display:block;font-family:var(--fonts-mono);text-align:left;font-weight:400;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;tab-size:4;-webkit-hyphens:none;hyphens:none}.c-dVkrah pre[class*="language-"]{padding:1em;margin:0.5em 0 1em;margin-top:0;overflow:auto;border-radius:var(--radii-small)}.c-dVkrah :not(pre) > code[class*="language-"],.c-dVkrah pre[class*="language-"]{background:var(---tokenBackground)}.c-dVkrah :not(pre) > code[class*="language-"]{padding:01.em;border-radius:var(--radii-small);white-space:normal}.c-dVkrah .token.comment,.c-dVkrah .token.prolog,.c-dVkrah .token.doctype,.c-dVkrah .token.cdata{color:var(---tokenCommentColor)}.c-dVkrah .token.punctuation{color:var(---tokenPunctuationColor)}.c-dVkrah .namespace{opacity:0.7}.c-dVkrah .token.property,.c-dVkrah .token.tag,.c-dVkrah .token.constant,.c-dVkrah .token.symbol,.c-dVkrah .token.deleted{color:var(---tokenPropertyColor)}.c-dVkrah .token.number{color:var(---tokenNumberColor)}.c-dVkrah .token.boolean{color:var(---tokenBooleanColor)}.c-dVkrah .token.selector,.c-dVkrah .token.attr-name,.c-dVkrah .token.string,.c-dVkrah .token.char,.c-dVkrah .token.builtin,.c-dVkrah .token.inserted{color:var(---tokenStringColor)}.c-dVkrah .token.operator,.c-dVkrah .token.entity,.c-dVkrah .token.url,.c-dVkrah .language-css .token.string,.c-dVkrah .style .token.string,.c-dVkrah .token.variable{color:var(---tokenOperator)}.c-dVkrah .token.atrule,.c-dVkrah .token.attr-value,.c-dVkrah .token.function,.c-dVkrah .token.class-name{color:var(---tokenFunctionColor)}.c-dVkrah .token.keyword{color:var(---tokenPropertyColor)}.c-dVkrah .token.regex,.c-dVkrah .token.important{color:var(---tokenRegexColor)}.c-dVkrah .token.important,.c-dVkrah .token.bold{font-weight:bold}.c-dVkrah .token.italic{font-style:italic}.c-dVkrah .token.entity{cursor:help}.c-dVkrah .rehype-code-title{max-width:100%;overflow-y:hidden;font-family:var(--fonts-mono);margin-bottom:-0.8rem;padding:0.7em 1em 0.5em 1em;background:var(---tokenBackground);text-aligh:left;font-weight:400;color:var(---tokenCommentColor);border-top-right-radius:4px;border-top-left-radius:4px;font-size:var(--fontSizes-small);z-index:1}.c-dVkrah .code-highlight{float:left;min-width:97%}.c-dVkrah .highlight-line{background:var(---tokenBackgroundHighlight);display:block;margin-left:-30px;padding-left:30px;margin-right:-30px;padding-right:30px}.c-dVkrah .line-number::before{display:inline-block;width:1rem;text-align:right;margin-right:16px;margin-left:-8px;color:var(---tokenCommentColor);content:attr(line)}.c-jNUAyN{color:var(--colors-textMutedColor);font-size:var(--fontSizes-small);font-weight:400}.c-gATxoi{margin-bottom:0px}.c-bPgfrJ{background:var(--colors-backgroundColorHighlight);width:100%;height:2px}}--sxs{--sxs:3 c-dhzjXW-fmMVkQ-size-small c-dhzjXW-oSmJK-size-large c-PJLV-jvCEVg-gradient-true c-PJLV-AsWAM-inlineBlock-true c-PJLV-eWXOxW-muted-true c-PJLV-cQFdVt-bold-true c-PJLV-cEkrQs-inline-true c-dhzjXW-AlumW-size-medium c-dhzjXW-eYwXqJ-size-mega c-nvJKW-cSjahB-variant-gradient c-nvJKW-bpTwdZ-size-medium}@media{.c-dhzjXW-fmMVkQ-size-small{max-width:var(--sizes-small);min-width:var(--sizes-small);margin:var(--space-small)}.c-dhzjXW-oSmJK-size-large{max-width:var(--sizes-large);min-width:var(--sizes-large);margin:var(--space-large)}.c-PJLV-jvCEVg-gradient-true{background-image:var(--colors-backgroundGradient);background-size:100%;background-repeat:repeat;-webkit-background-clip:text;background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.c-PJLV-AsWAM-inlineBlock-true{display:inline-block}.c-PJLV-eWXOxW-muted-true{font-weight:400;color:var(--colors-textMutedColor)}.c-PJLV-cQFdVt-bold-true{font-weight:bold}.c-PJLV-cEkrQs-inline-true{display:inline}.c-dhzjXW-AlumW-size-medium{max-width:var(--sizes-medium);min-width:var(--sizes-medium);margin:var(--space-medium)}.c-dhzjXW-eYwXqJ-size-mega{max-width:var(--sizes-mega);min-width:var(--sizes-mega);margin:var(--space-mega)}.c-nvJKW-cSjahB-variant-gradient{background:var(--colors-backgroundGradient)}.c-nvJKW-cSjahB-variant-gradient:hover{background:var(--colors-backgroundGradintDarker)}.c-nvJKW-bpTwdZ-size-medium{padding:14px 20px}}--sxs{--sxs:6 c-bZNrxE-iiNNtQg-css PJLV-idhzjXW-css PJLV-ieKjzkc-css c-bQzyIt-ijiZmJM-css c-bZNrxE-ilkBNdM-css c-bQzyIt-iijIpvs-css c-kedEAq-ielPKhw-css c-bQzyIt-ikUNLjE-css PJLV-igsmDXe-css c-fixGjY-iirEjuD-css c-jNUAyN-ihtBelh-css c-PJLV-idFXbZW-css}@media{.c-bZNrxE-iiNNtQg-css{align-items:center;cursor:pointer}.PJLV-ieKjzkc-css{display:inline-block;vertical-align:middle;overflow:hidden;fill:var(--colors-textMutedColor)}.PJLV-idhzjXW-css{display:flex}.c-bQzyIt-ijiZmJM-css{grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));grid-column-gap:15px;grid-row-gap:15px}.c-bZNrxE-ilkBNdM-css{height:100%}.c-bQzyIt-iijIpvs-css{grid-template-columns:repeat(auto-fit, minmax(175px, 1fr));grid-column-gap:10px;grid-row-gap:10px}.c-kedEAq-ielPKhw-css{width:115px}.c-bQzyIt-ikUNLjE-css{grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));grid-column-gap:20px;grid-row-gap:20px}.c-fixGjY-iirEjuD-css{align-items:stretch}.c-jNUAyN-ihtBelh-css{font-size:var(--fontSizes-smaller)}.c-PJLV-idFXbZW-css{margin-top:0}.PJLV-igsmDXe-css{cursor:pointer}}</style><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-62be57948b11b758.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b0867eecb36958b1.js" defer=""></script><script src="/_next/static/chunks/pages/blogg/%5Bslug%5D-4583c93b7baa87d4.js" defer=""></script><script src="/_next/static/TtVAyZFKtHZIk9MUUdl5Z/_buildManifest.js" defer=""></script><script src="/_next/static/TtVAyZFKtHZIk9MUUdl5Z/_ssgManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;700&display=swap">@font-face{font-family:'Quicksand';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkP8o18I.woff) format('woff')}@font-face{font-family:'Quicksand';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkM0o18I.woff) format('woff')}@font-face{font-family:'Quicksand';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkBgv18I.woff) format('woff')}@font-face{font-family:'Quicksand';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hJFQNYuDyP7bh.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Quicksand';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hJVQNYuDyP7bh.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Quicksand';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hK1QNYuDyPw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Quicksand';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hJFQNYuDyP7bh.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Quicksand';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hJVQNYuDyP7bh.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Quicksand';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hK1QNYuDyPw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Quicksand';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hJFQNYuDyP7bh.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Quicksand';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hJVQNYuDyP7bh.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Quicksand';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/quicksand/v30/6xKtdSZaM9iE8KbpRA_hK1QNYuDyPw.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next" data-reactroot=""><div class="c-jGAclF"><div class="c-bFBiOr"><div class="c-bkUlwM"><div class="c-bZNrxE c-gHYpeN"><a href="/" class="c-jyhawZ"><span class="c-hNeJhr">Daniel Vernberg</span></a><div class="c-cZmHrB"></div><div class="c-bZNrxE c-bZNrxE-iiNNtQg-css"><a href="/blogg" class="c-jyhawZ"><span class="c-hNeJhr">Blogg</span></a><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div><div class="PJLV PJLV-idhzjXW-css"><svg viewBox="0 0 24 24" height="24px" width="24px" class="PJLV PJLV-ieKjzkc-css"><path d="M12.3 22h-.1a10.31 10.31 0 01-7.34-3.15 10.46 10.46 0 01-.26-14 10.13 10.13 0 014-2.74 1 1 0 011.06.22 1 1 0 01.24 1 8.4 8.4 0 001.94 8.81 8.47 8.47 0 008.83 1.94 1 1 0 011.27 1.29A10.16 10.16 0 0119.6 19a10.28 10.28 0 01-7.3 3zM7.46 4.92a7.93 7.93 0 00-1.37 1.22 8.44 8.44 0 00.2 11.32A8.29 8.29 0 0012.22 20h.08a8.34 8.34 0 006.78-3.49A10.37 10.37 0 017.46 4.92z" data-name="moon"></path></svg></div></div></div></div></div></div><div class="c-jpsCDP"><div class="c-dVkrah"><div class="c-bFBiOr"><div class="c-bkUlwM"><div class="c-fixGjY"><div class="c-dhzjXW c-dhzjXW-oSmJK-size-large"></div><h1 class="c-PJLV c-PJLV-jvCEVg-gradient-true">Skapa ett request plugin i Nuxt.js</h1><p class="c-jNUAyN c-gATxoi">2019-06-15</p><div class="c-dhzjXW c-dhzjXW-AlumW-size-medium"></div><p>Pluginsystemet i Nuxt.js g√∂r det enkelt att skapa ett eget request plugin f√∂r att hantera en Nuxt-baserad applikations alla HTTP anrop.</p>
<p><a href="https://nuxtjs.org/">Nuxt.js</a> √§r ett ramverk byggt ovanp√• Vue.js och en av tankarna bakom Nuxt √§r att tillhandah√•lla en modul√§r och kraftfull plattform att enklare utveckla bland annat SPA:s och statiskt genererade applikationer baserade p√• Vue.</p>
<h2 id="request-modul"><a aria-hidden="true" tabindex="-1" href="#request-modul"><span class="icon icon-link"></span></a>Request modul</h2>
<p>I verktygsl√•dan som Nuxt tillhandah√•ller finns en <a href="https://axios.nuxtjs.org/">axios modul</a> som integrerar axios (ett popul√§rt promise baserat HTTP bibliotek) med Nuxt. En av f√∂rdelarna med att anv√§nda denna axios-modul √§r att den automatiskt s√§tter en base-URL f√∂r b√•de klient och server kontext i en Nuxt applikation.</p>
<p>Hur kan man d√• anv√§nda axios modulen i en Nuxt applikation? Efter att man <a href="https://axios.nuxtjs.org/setup">lagt till</a> modulen blir den tillg√§nglig direkt i <code>.vue</code> filer via <code>this.$axios</code>. F√∂r att g√∂ra en GET-request kan man exempelvis g√∂ra <code>this.$axios.get(URL)</code>.</p>
<h2 id="request-plugin"><a aria-hidden="true" tabindex="-1" href="#request-plugin"><span class="icon icon-link"></span></a>Request plugin</h2>
<p>Det fungerar helt okej att anv√§nda axios modulen direkt i Vue komponenterna, vuex store eller vad det nu kan vara om det handlar om en enstaka request till en backend. Men man st√∂ter snabbt p√• problem om samma HTTP anrop ska √•teranv√§ndas och eventuell passning beh√∂vs innan svaret ska presenteras i gr√§nssnittet. Det √§r d√• l√§tt h√§nt att Vue komponenterna b√∂rjar v√§xa i on√∂dan och f√•r f√∂r mycket ansvar f√∂r saker och ting som inte h√∂r komponenterna till.</p>
<p>Det i det h√§r l√§get man kan anv√§nda sig av en av f√∂rdelarna med Nuxt, n√§mligen <a href="https://nuxtjs.org/guide/plugins">plugin-systemet</a>, f√∂r att skapa ett request plugin.
Det man d√• kan g√∂ra √§r att skapa en fil <strong>plugins/api.js</strong> som man i sin <strong>nuxt.config.json</strong> inkluderar p√• f√∂ljande vis:</p>
<div class="rehype-code-title">nuxt.config.json</div><pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// Other configuration</span>
</span><span class="code-line line-number" line="2"><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line line-number" line="3"><span class="token string">&#x27;@/plugins/api&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="5"><span class="token comment">// Other configuration</span>
</span></code></pre>
<p>Det inneb√§r att Nuxt kommer l√§sa in <strong>plugins/api.js</strong> f√∂re applikationen startar</p>
<p>Det √§r i <strong>plugins/api.js</strong> man g√∂r en ‚Äùinject‚Äù f√∂r att registrera sitt plugin och g√∂r det tillg√§ngligt i applikationen.</p>
<div class="rehype-code-title">plugins/api.js</div><pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token keyword module">import</span> <span class="token constant">API</span> <span class="token keyword module">from</span> <span class="token string">&#x27;./some/place/&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> $axios <span class="token punctuation">}</span><span class="token punctuation">,</span> inject</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">  <span class="token comment">// Create new api class with provided nuxt axios module</span>
</span><span class="code-line line-number" line="4">  <span class="token keyword">const</span> api <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">API</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">request</span><span class="token operator">:</span> $axios <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="5">  <span class="token comment">// Inject the api to make it available across app via this.$api</span>
</span><span class="code-line line-number highlight-line" line="6">  <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">&#x27;api&#x27;</span><span class="token punctuation">,</span> api<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Pluginet importerar en ‚ÄùAPI‚Äù klass och skapar upp en ny instans av klassen och g√∂r axios modulen tillg√§nglig via dependency injection. Att anv√§nda <code>inject()</code> h√§r inneb√§r att klass instansen blir tillg√§nglig i bland annat Vue filer, men ocks√• i en eventuell Vuex store som man kan anv√§nda i en Nuxt applikation.</p>
<p>Det √§r d√• allts√• i <code>API</code> klassen som alla requests via axios modulen g√∂rs. F√∂renklat skulle man kunna skapa en <code>API.js</code> fil med f√∂ljande inneh√•ll:</p>
<div class="rehype-code-title">API.js</div><pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">class</span> <span class="token class-name">API</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">		<span class="token comment">// this.request will reference nuxt axios mudule</span>
</span><span class="code-line line-number" line="4">		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">request</span> <span class="token operator">=</span> request
</span><span class="code-line line-number" line="5">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="7"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token constant">API</span>
</span></code></pre>
<p>D√§refter √§r det bara att fylla p√• med de metoder som man anser beh√∂vs, konfigurerar upp eventuella request parsers och s√• vidare.</p>
<p>N√§r v√§l pluginet √§r registrerat √§r det bara att b√∂rja anv√§nda <code>this.$api</code> i applikationen och exempelvis alla vue komponenter har tillg√•ng till ett enkelt API utan att beh√∂va g√∂ra alla HTTP anrop sj√§lva och beh√∂va t√§nka p√• eventuell parsning av svar, token hantering med mera.
En async method i en vue komponent skulle till exempel kunna g√∂ra ett anrop med f√∂ljande syntax:</p>
<div class="rehype-code-title">example-vue-component.vue</div><pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// Example of a vue component with methods</span>
</span><span class="code-line line-number" line="2"><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">	<span class="token keyword">async</span> <span class="token function">getQuote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="4">		<span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">$api</span><span class="token punctuation">.</span><span class="token method function property-access">getRandomQuote</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number highlight-line" line="5">		<span class="token comment">// Set data from api to vue component data</span>
</span><span class="code-line line-number highlight-line" line="6">		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">quote</span> <span class="token operator">=</span> data
</span><span class="code-line line-number" line="7">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span></code></pre>
<p>Metoden <code>getRandomQuote()</code> skulle kunna vara en metod i API klassen som g√∂r ett anrop f√∂r att h√§mta ett slumpm√§ssigt citat av n√•got slag.</p><div class="c-dhzjXW c-dhzjXW-oSmJK-size-large"></div><div class="c-bPgfrJ"></div><div class="c-dhzjXW c-dhzjXW-AlumW-size-medium"></div><h2>Mer inneh√•ll</h2><div class="c-bQzyIt c-bQzyIt-ikUNLjE-css"><div class="PJLV c-bImmwG PJLV-igsmDXe-css"><a href="/blogg/node-cli-for-att-skrapa-imdb" class="c-jyhawZ"><div class="c-bZNrxE c-bZNrxE-ilkBNdM-css"><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div><div class="c-fixGjY c-fixGjY-iirEjuD-css"><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div><p class="c-jNUAyN c-jNUAyN-ihtBelh-css">‚Üê F√∂reg√•ende</p><h3 class="c-PJLV c-PJLV-idFXbZW-css">Node-baserat CLI f√∂r att skrapa IMDb</h3><p class="c-jNUAyN">2017-09-01</p></div><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div></div></a></div><div class="PJLV c-bImmwG PJLV-igsmDXe-css"><a href="/blogg/imdb-cli-version-2-3-0" class="c-jyhawZ"><div class="c-bZNrxE c-bZNrxE-ilkBNdM-css"><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div><div class="c-fixGjY c-fixGjY-iirEjuD-css"><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div><p class="c-jNUAyN c-jNUAyN-ihtBelh-css">N√§sta ‚Üí</p><h3 class="c-PJLV c-PJLV-idFXbZW-css">IMDb CLI version 1.0.1 till 2.3.0</h3><p class="c-jNUAyN">2019-07-08</p></div><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div></div></a></div></div></div></div></div></div></div><div class="c-dhzjXW c-dhzjXW-oSmJK-size-large"></div><div class="c-bFBiOr"><div class="c-bkUlwM"><div class="c-fixGjY"><div class="c-dhzjXW c-dhzjXW-AlumW-size-medium"></div><div class="c-bZNrxE"><p class="c-jKTQyv">Daniel Vernberg <!-- -->2023</p><div class="c-cZmHrB"></div><a href="https://github.com/danielv14"><div class="PJLV PJLV-idhzjXW-css"><svg viewBox="0 0 24 24" height="24px" width="24px" class="PJLV PJLV-ieKjzkc-css"><path d="M16.24 22a1 1 0 01-1-1v-2.6a2.15 2.15 0 00-.54-1.66 1 1 0 01.61-1.67C17.75 14.78 20 14 20 9.77a4 4 0 00-.67-2.22 2.75 2.75 0 01-.41-2.06 3.71 3.71 0 000-1.41 7.65 7.65 0 00-2.09 1.09 1 1 0 01-.84.15 10.15 10.15 0 00-5.52 0 1 1 0 01-.84-.15 7.4 7.4 0 00-2.11-1.09 3.52 3.52 0 000 1.41 2.84 2.84 0 01-.43 2.08 4.07 4.07 0 00-.67 2.23c0 3.89 1.88 4.93 4.7 5.29a1 1 0 01.82.66 1 1 0 01-.21 1 2.06 2.06 0 00-.55 1.56V21a1 1 0 01-2 0v-.57a6 6 0 01-5.27-2.09 3.9 3.9 0 00-1.16-.88 1 1 0 11.5-1.94 4.93 4.93 0 012 1.36c1 1 2 1.88 3.9 1.52a3.89 3.89 0 01.23-1.58c-2.06-.52-5-2-5-7a6 6 0 011-3.33.85.85 0 00.13-.62 5.69 5.69 0 01.33-3.21 1 1 0 01.63-.57c.34-.1 1.56-.3 3.87 1.2a12.16 12.16 0 015.69 0c2.31-1.5 3.53-1.31 3.86-1.2a1 1 0 01.63.57 5.71 5.71 0 01.33 3.22.75.75 0 00.11.57 6 6 0 011 3.34c0 5.07-2.92 6.54-5 7a4.28 4.28 0 01.22 1.67V21a1 1 0 01-.94 1z" data-name="github"></path></svg></div></a><div class="c-dhzjXW c-dhzjXW-fmMVkQ-size-small"></div><a href="mailto:daniel.vernberg@gmail.com"><div class="PJLV PJLV-idhzjXW-css"><svg viewBox="0 0 24 24" height="24px" width="24px" class="PJLV PJLV-ieKjzkc-css"><path d="M19 4H5a3 3 0 00-3 3v10a3 3 0 003 3h14a3 3 0 003-3V7a3 3 0 00-3-3zm-.67 2L12 10.75 5.67 6zM19 18H5a1 1 0 01-1-1V7.25l7.4 5.55a1 1 0 00.6.2 1 1 0 00.6-.2L20 7.25V17a1 1 0 01-1 1z" data-name="email"></path></svg></div></a></div><div class="c-dhzjXW c-dhzjXW-AlumW-size-medium"></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Skapa ett request plugin i Nuxt.js","date":"2019-06-15T00:00:00.000Z","summary":"S√• h√§r skapar man enkelt ett request-plugin baserat p√• axios i Nuxt.js","body":{"raw":"\nPluginsystemet i Nuxt.js g√∂r det enkelt att skapa ett eget request plugin f√∂r att hantera en Nuxt-baserad applikations alla HTTP anrop.\n\n[Nuxt.js](https://nuxtjs.org/) √§r ett ramverk byggt ovanp√• Vue.js och en av tankarna bakom Nuxt √§r att tillhandah√•lla en modul√§r och kraftfull plattform att enklare utveckla bland annat SPA:s och statiskt genererade applikationer baserade p√• Vue.\n\n## Request modul\n\nI verktygsl√•dan som Nuxt tillhandah√•ller finns en [axios modul](https://axios.nuxtjs.org/) som integrerar axios (ett popul√§rt promise baserat HTTP bibliotek) med Nuxt. En av f√∂rdelarna med att anv√§nda denna axios-modul √§r att den automatiskt s√§tter en base-URL f√∂r b√•de klient och server kontext i en Nuxt applikation.\n\nHur kan man d√• anv√§nda axios modulen i en Nuxt applikation? Efter att man [lagt till](https://axios.nuxtjs.org/setup) modulen blir den tillg√§nglig direkt i `.vue` filer via `this.$axios`. F√∂r att g√∂ra en GET-request kan man exempelvis g√∂ra `this.$axios.get(URL)`.\n\n## Request plugin\n\nDet fungerar helt okej att anv√§nda axios modulen direkt i Vue komponenterna, vuex store eller vad det nu kan vara om det handlar om en enstaka request till en backend. Men man st√∂ter snabbt p√• problem om samma HTTP anrop ska √•teranv√§ndas och eventuell passning beh√∂vs innan svaret ska presenteras i gr√§nssnittet. Det √§r d√• l√§tt h√§nt att Vue komponenterna b√∂rjar v√§xa i on√∂dan och f√•r f√∂r mycket ansvar f√∂r saker och ting som inte h√∂r komponenterna till.\n\nDet i det h√§r l√§get man kan anv√§nda sig av en av f√∂rdelarna med Nuxt, n√§mligen [plugin-systemet](https://nuxtjs.org/guide/plugins), f√∂r att skapa ett request plugin.\nDet man d√• kan g√∂ra √§r att skapa en fil **plugins/api.js** som man i sin **nuxt.config.json** inkluderar p√• f√∂ljande vis:\n\n```javascript:nuxt.config.json showLineNumbers\n// Other configuration\nplugins: [\n'@/plugins/api',\n],\n// Other configuration\n```\n\nDet inneb√§r att Nuxt kommer l√§sa in **plugins/api.js** f√∂re applikationen startar\n\nDet √§r i **plugins/api.js** man g√∂r en ‚Äùinject‚Äù f√∂r att registrera sitt plugin och g√∂r det tillg√§ngligt i applikationen.\n\n```javascript:plugins/api.js {5,6} showLineNumbers\nimport API from './some/place/';\nexport default ({ $axios }, inject) =\u003e {\n  // Create new api class with provided nuxt axios module\n  const api = new API({ request: $axios });\n  // Inject the api to make it available across app via this.$api\n  inject('api', api);\n};\n```\n\nPluginet importerar en ‚ÄùAPI‚Äù klass och skapar upp en ny instans av klassen och g√∂r axios modulen tillg√§nglig via dependency injection. Att anv√§nda `inject()` h√§r inneb√§r att klass instansen blir tillg√§nglig i bland annat Vue filer, men ocks√• i en eventuell Vuex store som man kan anv√§nda i en Nuxt applikation.\n\nDet √§r d√• allts√• i `API` klassen som alla requests via axios modulen g√∂rs. F√∂renklat skulle man kunna skapa en `API.js` fil med f√∂ljande inneh√•ll:\n\n```javascript:API.js showLineNumbers\nclass API {\n\tconstructor({ request }) {\n\t\t// this.request will reference nuxt axios mudule\n\t\tthis.request = request\n\t}\n}\nexport default API\n```\n\nD√§refter √§r det bara att fylla p√• med de metoder som man anser beh√∂vs, konfigurerar upp eventuella request parsers och s√• vidare.\n\nN√§r v√§l pluginet √§r registrerat √§r det bara att b√∂rja anv√§nda `this.$api` i applikationen och exempelvis alla vue komponenter har tillg√•ng till ett enkelt API utan att beh√∂va g√∂ra alla HTTP anrop sj√§lva och beh√∂va t√§nka p√• eventuell parsning av svar, token hantering med mera.\nEn async method i en vue komponent skulle till exempel kunna g√∂ra ett anrop med f√∂ljande syntax:\n\n```javascript:example-vue-component.vue {4,5,6} showLineNumbers\n// Example of a vue component with methods\nmethods: {\n\tasync getQuote() {\n\t\tconst { data } = await this.$api.getRandomQuote()\n\t\t// Set data from api to vue component data\n\t\tthis.quote = data\n\t}\n}\n```\n\nMetoden `getRandomQuote()` skulle kunna vara en metod i API klassen som g√∂r ett anrop f√∂r att h√§mta ett slumpm√§ssigt citat av n√•got slag.\n","code":"var Component=(()=\u003e{var d=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,e)=\u003e()=\u003e(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=\u003e{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},c=(a,e,s,i)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let t of h(e))!k.call(a,t)\u0026\u0026t!==s\u0026\u0026l(a,t,{get:()=\u003ee[t],enumerable:!(i=m(e,t))||i.enumerable});return a};var v=(a,e,s)=\u003e(s=a!=null?d(u(a)):{},c(e||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),b=a=\u003ec(l({},\"__esModule\",{value:!0}),a);var o=N((q,r)=\u003e{r.exports=_jsx_runtime});var y={};g(y,{default:()=\u003ej,frontmatter:()=\u003ex});var n=v(o()),x={title:\"Skapa ett request plugin i Nuxt.js\",summary:\"S\\xE5 h\\xE4r skapar man enkelt ett request-plugin baserat p\\xE5 axios i Nuxt.js\",date:new Date(15605568e5)};function p(a){let e=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",code:\"code\",strong:\"strong\",div:\"div\",pre:\"pre\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Pluginsystemet i Nuxt.js g\\xF6r det enkelt att skapa ett eget request plugin f\\xF6r att hantera en Nuxt-baserad applikations alla HTTP anrop.\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://nuxtjs.org/\",children:\"Nuxt.js\"}),\" \\xE4r ett ramverk byggt ovanp\\xE5 Vue.js och en av tankarna bakom Nuxt \\xE4r att tillhandah\\xE5lla en modul\\xE4r och kraftfull plattform att enklare utveckla bland annat SPA:s och statiskt genererade applikationer baserade p\\xE5 Vue.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"request-modul\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#request-modul\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Request modul\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I verktygsl\\xE5dan som Nuxt tillhandah\\xE5ller finns en \",(0,n.jsx)(e.a,{href:\"https://axios.nuxtjs.org/\",children:\"axios modul\"}),\" som integrerar axios (ett popul\\xE4rt promise baserat HTTP bibliotek) med Nuxt. En av f\\xF6rdelarna med att anv\\xE4nda denna axios-modul \\xE4r att den automatiskt s\\xE4tter en base-URL f\\xF6r b\\xE5de klient och server kontext i en Nuxt applikation.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hur kan man d\\xE5 anv\\xE4nda axios modulen i en Nuxt applikation? Efter att man \",(0,n.jsx)(e.a,{href:\"https://axios.nuxtjs.org/setup\",children:\"lagt till\"}),\" modulen blir den tillg\\xE4nglig direkt i \",(0,n.jsx)(e.code,{children:\".vue\"}),\" filer via \",(0,n.jsx)(e.code,{children:\"this.$axios\"}),\". F\\xF6r att g\\xF6ra en GET-request kan man exempelvis g\\xF6ra \",(0,n.jsx)(e.code,{children:\"this.$axios.get(URL)\"}),\".\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"request-plugin\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#request-plugin\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Request plugin\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Det fungerar helt okej att anv\\xE4nda axios modulen direkt i Vue komponenterna, vuex store eller vad det nu kan vara om det handlar om en enstaka request till en backend. Men man st\\xF6ter snabbt p\\xE5 problem om samma HTTP anrop ska \\xE5teranv\\xE4ndas och eventuell passning beh\\xF6vs innan svaret ska presenteras i gr\\xE4nssnittet. Det \\xE4r d\\xE5 l\\xE4tt h\\xE4nt att Vue komponenterna b\\xF6rjar v\\xE4xa i on\\xF6dan och f\\xE5r f\\xF6r mycket ansvar f\\xF6r saker och ting som inte h\\xF6r komponenterna till.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det i det h\\xE4r l\\xE4get man kan anv\\xE4nda sig av en av f\\xF6rdelarna med Nuxt, n\\xE4mligen \",(0,n.jsx)(e.a,{href:\"https://nuxtjs.org/guide/plugins\",children:\"plugin-systemet\"}),`, f\\xF6r att skapa ett request plugin.\nDet man d\\xE5 kan g\\xF6ra \\xE4r att skapa en fil `,(0,n.jsx)(e.strong,{children:\"plugins/api.js\"}),\" som man i sin \",(0,n.jsx)(e.strong,{children:\"nuxt.config.json\"}),\" inkluderar p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"nuxt.config.json\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Other configuration\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"plugins\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[(0,n.jsx)(e.span,{className:\"token string\",children:\"'@/plugins/api'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Other configuration\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det inneb\\xE4r att Nuxt kommer l\\xE4sa in \",(0,n.jsx)(e.strong,{children:\"plugins/api.js\"}),\" f\\xF6re applikationen startar\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det \\xE4r i \",(0,n.jsx)(e.strong,{children:\"plugins/api.js\"}),\" man g\\xF6r en \\u201Dinject\\u201D f\\xF6r att registrera sitt plugin och g\\xF6r det tillg\\xE4ngligt i applikationen.\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"plugins/api.js\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"API\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./some/place/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" $axios \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" inject\"]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Create new api class with provided nuxt axios module\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" api \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"API\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"request\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" $axios \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Inject the api to make it available across app via this.$api\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"6\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"inject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'api'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" api\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pluginet importerar en \\u201DAPI\\u201D klass och skapar upp en ny instans av klassen och g\\xF6r axios modulen tillg\\xE4nglig via dependency injection. Att anv\\xE4nda \",(0,n.jsx)(e.code,{children:\"inject()\"}),\" h\\xE4r inneb\\xE4r att klass instansen blir tillg\\xE4nglig i bland annat Vue filer, men ocks\\xE5 i en eventuell Vuex store som man kan anv\\xE4nda i en Nuxt applikation.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Det \\xE4r d\\xE5 allts\\xE5 i \",(0,n.jsx)(e.code,{children:\"API\"}),\" klassen som alla requests via axios modulen g\\xF6rs. F\\xF6renklat skulle man kunna skapa en \",(0,n.jsx)(e.code,{children:\"API.js\"}),\" fil med f\\xF6ljande inneh\\xE5ll:\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"API.js\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"API\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token function\",children:\"constructor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token parameter\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" request \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// this.request will reference nuxt axios mudule\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"request\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` request\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword module\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token constant\",children:\"API\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"D\\xE4refter \\xE4r det bara att fylla p\\xE5 med de metoder som man anser beh\\xF6vs, konfigurerar upp eventuella request parsers och s\\xE5 vidare.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"N\\xE4r v\\xE4l pluginet \\xE4r registrerat \\xE4r det bara att b\\xF6rja anv\\xE4nda \",(0,n.jsx)(e.code,{children:\"this.$api\"}),` i applikationen och exempelvis alla vue komponenter har tillg\\xE5ng till ett enkelt API utan att beh\\xF6va g\\xF6ra alla HTTP anrop sj\\xE4lva och beh\\xF6va t\\xE4nka p\\xE5 eventuell parsning av svar, token hantering med mera.\nEn async method i en vue komponent skulle till exempel kunna g\\xF6ra ett anrop med f\\xF6ljande syntax:`]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"example-vue-component.vue\"}),(0,n.jsx)(e.pre,{className:\"language-javascript\",children:(0,n.jsxs)(e.code,{className:\"language-javascript code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Example of a vue component with methods\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"methods\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"getQuote\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"4\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" data \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword control-flow\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"$api\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getRandomQuote\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"5\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Set data from api to vue component data\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"6\",children:[\"\t\t\",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"this\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"quote\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` data\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[\"\t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Metoden \",(0,n.jsx)(e.code,{children:\"getRandomQuote()\"}),\" skulle kunna vara en metod i API klassen som g\\xF6r ett anrop f\\xF6r att h\\xE4mta ett slumpm\\xE4ssigt citat av n\\xE5got slag.\"]})]})}function f(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(p,a)})):p(a)}var j=f;return b(y);})();\n;return Component;"},"_id":"posts/skapa-ett-request-plugin-i-nuxtjs.mdx","_raw":{"sourceFilePath":"posts/skapa-ett-request-plugin-i-nuxtjs.mdx","sourceFileName":"skapa-ett-request-plugin-i-nuxtjs.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/skapa-ett-request-plugin-i-nuxtjs"},"type":"Post","url":"/blogg/skapa-ett-request-plugin-i-nuxtjs","dateFormatted":"2019-06-15"},"prevPost":{"title":"Node-baserat CLI f√∂r att skrapa IMDb","date":"2017-09-01T00:00:00.000Z","summary":"Enkelt CLI f√∂r att f√• tag i viss information fr√•n IMDb genom att skrapa sajten.","body":{"raw":"\nF√∂r ett tag sedan stod jag inf√∂r en uppgift som delvis gick ut p√• att anv√§nda filmer och tv-seriers IMDb ID:n. Att manuellt s√∂ka upp filmer i webbl√§saren och kopiera ID:n fr√•n URLen vart fort tradigt... Node-baserat CLI to the rescue!\n\nF√∂r den som inte vet vad ett IMDb ID √§r s√• √§r det kortfattat ett unikt identifieringsnummer f√∂r varje film, tv-serie, sk√•despelarare och s√• vidare. Dessa id:n anv√§nds bland annat i URLen p√• f√∂ljande s√§tt: `http://www.imdb.com/title/tt0411008/`. Str√§ngen som b√∂rjar p√• **\"tt\"** √§r sj√§vla id:t. Just **tt0411008** √§r id:t f√∂r tv-serien Lost f√∂r √∂vrigt.\n\nJag beh√∂vde allts√• p√• ett smidigt s√§tt komma √•t just de h√§r numren och efter att ha gjort manuella s√∂kningar p√• IMDbs hemsida ett ex antal g√•nger, klickat mig in p√• r√§tt s√∂kresultat och kopierat id:t fr√•n URLen s√• k√§ndes hela den processen v√§ldigt tradig. Dags att effektivisera!\n\nDet h√§r var dessutom ett utm√§rkt tillf√§lle att skapa ett Node-baserat CLI och l√§ra mig lite mer om det d√• jag inte skapat s√• m√•nga s√•dana f√∂rut men √§r sedan tidigare relativt bekv√§m med Node och Javascript. Inte heller hade jag tidigare anv√§nt skrapning speciellt mycket med Javascrip.\n\n## Vad beh√∂ver CLI:t √•tstakomma?\n\nInnan jag ens gjorde `git init` funderade jag √∂ver hur jag ville att mitt CLI skulle fungera, vad det skulle spotta ut f√∂r information och b√∂rjade fundera p√• vilka npm-paket som skulle kunna underl√§tta och g√∂ra CLI:t b√§ttre.\n\nMin tanke var att CLI:t f√∂rst skulle fr√•ga anv√§ndaren efter en s√∂kstr√§ng att s√∂ka efter, g√∂ra en request till IMDb:s hemsida och s√∂kresultat, skrapa den information som beh√∂vdes och spotta ut det i terminalen p√• ett √∂versk√•dligt s√§tt. Jag t√§nkte mig att det fr√§mst handla om att skrapa fram titlar, √•rtal och sj√§lvfallet IMDb ID:n.\n\n### Struktur\n\nD√• jag i ett slags version 1.0.0 av CLI:t endast beh√∂ver ett enkelt s√§tt att komma √•t IMDb ID:n skulle man lika g√§rna kunna skriva all kod i en och samma **index.js** fil. Men ska CLI:t l√§ngre fram kunna g√∂ra mer saker blir det lite sv√•rt att skala projektet och bygga vidare p√• det s√• d√§rf√∂r valde jag att dela upp CLI:t i tv√• olika klasser och en **index.js**. Klasserna som skapades var en IMDb klass och en klass `queryHelper` f√∂r att genomf√∂ra lite manipulering av str√§ngar.\n\n### NPM-paket\n\nJag anv√§de mig av f√∂ljande npm-paket f√∂r att skapa mitt CLI:\n\n- [Chalk](https://www.npmjs.com/package/chalk) - F√∂r att s√§tta lite f√§rg p√• bland annat `console.log`.\n- [Request](https://www.npmjs.com/package/request) - Ett enkelt s√§tt att g√∂ra http requests.\n- [Cheerio](https://www.npmjs.com/package/cheerio) - F√∂r att skrapa IMDbs hemsida med en jQuery-liknande syntax.\n- [Clear](https://www.npmjs.com/package/clear) - Ett paket vars enkla uppgift √§r att rensa terminalf√∂nstret.\n- [Figlet](https://www.npmjs.com/package/figlet) - Ett paket f√∂r att enkelt skapa ascii-konst av text. CLI:t m√•ste ju vara lite snyggt ocks√•.\n- [Inquirer](https://www.npmjs.com/package/inquirer) - Anv√§ndes f√∂r att fr√•ga anv√§ndaren om s√∂kstr√§ng och validera svaret.\n- [Ora](https://www.npmjs.com/package/ora) - Ett paket f√∂r att ge anv√§ndaren lite feedback i form av en spinner undertiden som IMDb skrapas och s√∂kresultatet samlas in.\n- [Table-master](https://www.npmjs.com/package/table-master) - Anv√§ndes f√∂r att visa upp s√∂kresultatet i en tabell.\n\n## Genomf√∂rande\n\nHur bygger man d√• ett Node-baserat CLI f√∂r att skrapa IMDb:s hemsida och visa upp resultatet? Jag t√§nkte h√§r g√• igenom steg f√∂r steg hur det skulle kunna se ut, f√∂rhoppningsvis utan att g√• in i f√∂r noga detalj om allt.\n\nStarta projektet med en `npm init` f√∂r att skapa generera en **package.json** f√∂ljt av en `git init`. Varf√∂r inte anv√§nda git liksom?\n\nInstallera d√§refter alla npm-paket som kommer att anv√§ndas:\n\n```bash\n$ npm install --save chalk request cheerio clear figlet inquirer ora table-master\n```\n\nSkapa d√§refter en **index.js** fil som agerar sj√§lva utg√•ngspunkten f√∂r CLI:t. De enda npm-paket som beh√∂vs i just denna fil √§r `clear` och `inquirer` d√• de √∂vriga paketen fr√§mst kommer anv√§ndas i ett senare skeda av IMDb klassen.\n\nF√∂ljande kod finns i min **index.js**:\n\n```javascript:index.js showLineNumbers\nconst clear = require('clear');\nconst inquirer = require('inquirer');\n\nconst inputError = 'Please enter a query to search for...';\n\n// setup of question\nconst question = [\n  {\n    type: 'input',\n    name: 'searchString',\n    message: 'What do you want to search for?\\n',\n    validate: (value) =\u003e value.length ? true : inputError\n  }\n]\n\n// clear the terminal window\nclear();\n\n// display colorful IMDb header\nIMDb.displayHeader();\n\n// prompt the user for a search string\ninquirer.prompt(question).then((answer) =\u003e {\n  let query = new queryHelper(answer.searchString);\n  let result = new IMDb(query.getSanitizedQuery(), answer.searchString);\n  result.scrape();\n})\n\n```\n\nF√∂rst och fr√§mst anv√§nds `require` f√∂r att f√• in de npm-paket som anv√§nds av filen, men √§ven importeras de tv√• klasserna som √§n s√• l√§nge inte finns.\n\n`const question = [...]` deklarerar en fr√•ga med en tillh√∂rande validering. Om inte valideringen g√•r igenom s√• skrivs `inputError` str√§ngen ut i terminalen.\n\nD√§refter rensas terminalf√∂nstret p√• samma s√§tt som att sj√§lv skriva `clear` i terminalen.\nSedan kallas en statisk metod fr√•n IMDb klassen som av sitt namn kanske avsl√∂jar vad den g√∂r, men mer om metoden n√§r jag g√•r igenom min IMDb klass.\n\nL√§ngst ner i filen skapas sj√§lva prompten med hj√§lp av `inquirer` d√§r den tidigare question-arrayen skickas in och ett svar ges i ett promise.  \nInuti detta promise skapas f√∂rst en ny instans av `queryHelper` klassen och en instans av IMDb klassen skapas med hj√§lp av en tv√• parametrar:\n\n1. Den f√∂rsta parametern `query.getSanitizedQuer()` g√•r ut p√• omvandla en str√§ng fr√•n \"Harry Potter\" till \"Harry+Potter\" d√• det formatet beh√∂vs senare n√§r IMDbs webbplats skrapas.\n2. Den andra parametern `answer.searchString` √§r s√∂kstr√§ngen som anv√§ndaren matar in i or√∂rd form, det vill s√§ga exmpelvis \"Harry Potter\". Varf√∂r det √§r intressant att h√•lla kvar i originals√∂kstr√§ngen kommer visa sig i sj√§lva IMDb klassen.\n\nMen innan vi g√•r igenom sj√§lva IMDb klassen d√§r sj√§lva tyngdlyften i det h√§r CLI:t h√§nder g√•r vi igenom queryHelper klassen d√• den (i alla fall f√∂r version 1.0.0) √§r relativt liten.\n\n```javascript:queryHelper.js {7,8,9,11,12,13} showLineNumbers\nexports.queryHelper = class {\n  /**\n   * Creates an instance of queryHelper.\n   * @param {string} initialQuery\n   * @memberof queryHelper\n   */\n  constructor(initialQuery) {\n    this.query = initialQuery;\n  }\n  /**\n   * returns the query but sanitized\n   * replace all spaces with pluses\n   * @returns {string}\n   */\n  getSanitizedQuery() {\n    return this.query.replace(/ /g, '+');\n  }\n  /**\n   * Match IMDb ID's from hrefs\n   *\n   * @static\n   * @param {string} href\n   * @returns {string} containing IMDb ID\n   */\n  static getIMDbID(href) {\n    return href.match(/tt(.*)[0-9]/g).toString();\n  }\n};\n```\n\nKlassen best√•r allts√• av en konstruktor och tv√• metoder. Den f√∂rsta metoden `getSanitizedQuery()` returnerar en s√∂kstr√§ng d√§r alla mellanrum i str√§ngen har bytts ut mot plustecken. Den andra metoden `getIMDbID()` tar **href** som parameter och resturnerar sj√§lva IMDb ID:t fr√•n en URL. Den extraherar allts√• **tt0411008** fr√•n **http://www.imdb.com/title/tt0411008/** Metoden √§r statisk d√§rf√∂r att IMDb klassen anv√§nder sig av denna metod, men det fanns inget behov av att skapa en ny instans av `queryHelper` inuti IMDb klassen.\n\nSlutligen har vi kvar sj√§lva IMDb klassen **IMDb.js** som best√•r av ett antal metoder.\n\nF√∂rst s√• anv√§nds require f√∂r att f√• in de √∂vriga npm-paket som √§nnu inte anv√§nts, men ocks√• queryHelper klassen:\n\n```javascript:IMDb.js showLineNumbers\nconst request = require('request');\nconst cheerio = require('cheerio');\nconst ora = require('ora');\nconst tab = require('table-master');\nconst chalk = require('chalk');\nconst figlet = require('figlet');\n\nconst { queryHelper } = require('./queryHelper');\n```\n\nD√§refter skapas och exporteras sj√§lva IMDb klassen med en konstruktor:\n\n```javascript:IMDb.js showLineNumbers\nexports.IMDb = class {\n\n  /**\n   * Creates an instance of IMDb.\n   * @param {string} query - search query that has been sanitized\n   * @param {string} originalQuery - The original search query\n  */\n  constructor(query, originalQuery) {\n    this.query = query;\n    this.originalQuery = originalQuery;\n    this.url = `http://www.imdb.com/search/title?title=${this.query}`;\n    this.results = [];\n    this.outputColor = chalk.hex('#f3ce13');\n  }\n}\n```\n\nKonstruktorn har tv√• parametrar och det √§r allts√• sj√§lva s√∂kstr√§ngen i dess original och i den \"plussade\" formen. D√§refter s√§tts `this.url` med hj√§lp av den plussade s√∂kstr√§ngen som i en annan metod kommer anv√§ndas f√∂r att g√∂ra en reuqest och skrapa IMDb.  \n`this.results` √§r en tom array som senare ska fyllas p√• med s√∂kresultat och `this.outputColor` anv√§nder npm-paketet `chalk` f√∂r att spara ner IMDb:s gula f√§rg som i en annan metod kommer anv√§ndas f√∂r lite f√§rgrannare utskrift i terminalen.\n\nD√§refter inneh√•ller klassen en statisk metod f√∂r att visa lite ascii-text. Metoden √§r statisk eftersom att den anropas i **index.js** innan en instans av sj√§lva IMDb klassen har skapats. Eftersom att metoden anropas innan klassen har skapats g√•r den inte att anv√§nda IMDbf√§rgen som deklarerats som `this.outputColor` i klassens konstruktor. Det kan √§nd√• vara bra att ha denna f√§rg sparad om den gula f√§rgen skulle anv√§ndas l√§ngre fram till andra saker ocks√•.\n\n```javascript:IMDb.js showLineNumbers\n  /**\n   * Static method to display IMDB header for the CLI\n   *\n   */\n  static displayHeader() {\n    var imdbColor = chalk.hex('#f3ce13');\n    console.log(imdbColor(figlet.textSync('IMDb')));\n  }\n```\n\nF√∂r att bygga ut `this.results` arrayen skapas ytterligare en metod p√• IMDb klassen som kan se ut p√• f√∂ljande vis:\n\n```javascript:IMDb.js showLineNumbers\n  /**\n   * Push to results array\n   *\n   * @param {any} title\n   * @param {any} year\n   * @param {any} imdbID\n   */\n  createSearchResult(title, year, imdbID) {\n    this.results.push({title, year, imdbID});\n  }\n```\n\nDenna metod anv√§nder `push` f√∂r att bygga ut arrayen med ett objekt som inneh√•ller titel, √•rtal och IMDb ID.\n\nIMDb klassen inneh√•ller sedan en n√•got tung metod f√∂r att utf√∂ra sj√§lva skrapandet av IMDb och komma √•t s√∂kresultaten. Metoden g√•r kort och gott ut p√• att g√∂ra en request till IMDb och loopa genom ett ex antal s√∂kresultat och pusha dessa till `this.results`\n\n```javascript:IMDb.js showLineNumbers\n /**\n   * Perform the scrape of imdb to gather search results\n   *\n   */\n  scrape() {\n\n    const spinner = ora('Searching IMDb. Please wait...').start();\n    request(this.url, (error, response, body) =\u003e {\n\n      if (!error) {\n\n        let $ = cheerio.load(body);\n\n        $('.lister-item-header a').each((index, value) =\u003e {\n          // create variables to be pushed as search result\n          let title = $(value).text();\n          let year = $(value).next().text().replace(/\\D/g, '');\n          let imdbID = this.outputColor(queryHelper.getIMDbID($(value).attr('href')));\n\n          this.createSearchResult(title, year, imdbID);\n\n          // stop the loop after 15 items\n          return index \u003c 14;\n        });\n\n        spinner.stop();\n        this.renderSearchResults();\n\n      } else {\n        spinner.stop();\n        console.log(`Program exit with error: ${error}`);\n      }\n    });\n  }\n```\n\nN√•gra nyckeldetaljer i den h√§r metoden √§r att f√∂rst och fr√§mst anv√§nds `ora` npm-paketet f√∂r att starta en spinner som ger anv√§ndaren lite feedback. S√∂kresultaten loopas genom med hj√§lp av `cheerio` och `$(.lister-item-header a).each()` d√§r titlar, √•rtal och id:n sparas till `this.results` med hj√§lp av metoden `this.createSearchResult()`.\n\nN√§r loopen har stannat efter att de femton f√∂rsta s√∂kresultaten har pushats till `this.results` stoppas spinnern med hj√§lp av `spinner.stop()` och en tabell med s√∂kresultaten visas upp i terminalen med hj√§lp av metoden `this.renderSearchResults()`. Den metoden ser ut p√• f√∂ljande vis:\n\n```javascript:IMDb.js showLineNumbers\n  /**\n   * Render either a table with search results\n   * or a message of no search results were found\n   */\n  renderSearchResults() {\n    if (Object.keys(this.results).length === 0) {\n      console.log(chalk.red(`Could not find any search results for \"${this.originalQuery}\". Please try again.`));\n    } else {\n      console.table(this.results);\n    }\n  }\n```\n\nDenna metod kollar f√∂rst om `this.results` √§r tom (inga s√∂kresultat hittades) eller ej och antingen renderar en tabell med s√∂kresultaten eller ger feedback om att inga s√∂kresultat kunde hittas. H√§r anv√§nds `this.originalQuery` som allts√• exempelvis skulle motsvara `Harry Potter` och inte `Harry+Potter`.\n\n### G√∂r CLI:t k√∂rbart globalt\n\nF√∂r att slippa skriva `node index.js` och hela tiden befinna sig i samma path som **index.js** finns det ett enkelt knep att g√∂ra det h√§r CLI:t globalt tillg√§ngligt genom att endast skriva exempelvis `imdb` i terminalen, oberoende vilken path man har.\n\nB√∂rja med att uppgradera **package.json** med f√∂ljande:\n\n```json:package.json\n  \"bin\": {\n    \"imdb\": \"./index.js\"\n  }\n```\n\nDetta binder kommandot `imdb` till att k√∂ra **index.js**. L√§gg d√§refter till f√∂ljande shebang h√∂gst upp i **index.js**:\n\n```javascript:index.js showLineNumbers\n#!/usr/bin/env node\nconst clear = require('clear');\nconst inquirer = require('inquirer');\n\n//........\n```\n\nInstallera d√§refter CLI:t globalt med hj√§lp av:\n\n```bash\n$ npm install -g\n```\n\nNu √§r CLI:t k√∂rbart globalt üéâ\n\nDet var kort och gott all funktionalitet som finns i skrivande stund i detta Node-baserade CLI som skrapar IMDb efter s√∂kresultat och IMDb ID:n. Det f√§rdiga CLI:et finns p√• [GitHub](https://github.com/danielv14/imdb-cli)\n","code":"var Component=(()=\u003e{var d=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,n)=\u003e()=\u003e(n||a((n={exports:{}}).exports,n),n.exports),g=(a,n)=\u003e{for(var s in n)l(a,s,{get:n[s],enumerable:!0})},i=(a,n,s,t)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let c of h(n))!k.call(a,c)\u0026\u0026c!==s\u0026\u0026l(a,c,{get:()=\u003en[c],enumerable:!(t=m(n,c))||t.enumerable});return a};var b=(a,n,s)=\u003e(s=a!=null?d(u(a)):{},i(n||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),f=a=\u003ei(l({},\"__esModule\",{value:!0}),a);var o=N((D,r)=\u003e{r.exports=_jsx_runtime});var j={};g(j,{default:()=\u003ew,frontmatter:()=\u003ey});var e=b(o()),y={title:\"Node-baserat CLI f\\xF6r att skrapa IMDb\",summary:\"Enkelt CLI f\\xF6r att f\\xE5 tag i viss information fr\\xE5n IMDb genom att skrapa sajten.\",date:new Date(1504224e6)};function p(a){let n=Object.assign({p:\"p\",code:\"code\",strong:\"strong\",h2:\"h2\",a:\"a\",span:\"span\",h3:\"h3\",ul:\"ul\",li:\"li\",pre:\"pre\",div:\"div\",br:\"br\",ol:\"ol\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"F\\xF6r ett tag sedan stod jag inf\\xF6r en uppgift som delvis gick ut p\\xE5 att anv\\xE4nda filmer och tv-seriers IMDb ID:n. Att manuellt s\\xF6ka upp filmer i webbl\\xE4saren och kopiera ID:n fr\\xE5n URLen vart fort tradigt... Node-baserat CLI to the rescue!\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r den som inte vet vad ett IMDb ID \\xE4r s\\xE5 \\xE4r det kortfattat ett unikt identifieringsnummer f\\xF6r varje film, tv-serie, sk\\xE5despelarare och s\\xE5 vidare. Dessa id:n anv\\xE4nds bland annat i URLen p\\xE5 f\\xF6ljande s\\xE4tt: \",(0,e.jsx)(n.code,{children:\"http://www.imdb.com/title/tt0411008/\"}),\". Str\\xE4ngen som b\\xF6rjar p\\xE5 \",(0,e.jsx)(n.strong,{children:'\"tt\"'}),\" \\xE4r sj\\xE4vla id:t. Just \",(0,e.jsx)(n.strong,{children:\"tt0411008\"}),\" \\xE4r id:t f\\xF6r tv-serien Lost f\\xF6r \\xF6vrigt.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Jag beh\\xF6vde allts\\xE5 p\\xE5 ett smidigt s\\xE4tt komma \\xE5t just de h\\xE4r numren och efter att ha gjort manuella s\\xF6kningar p\\xE5 IMDbs hemsida ett ex antal g\\xE5nger, klickat mig in p\\xE5 r\\xE4tt s\\xF6kresultat och kopierat id:t fr\\xE5n URLen s\\xE5 k\\xE4ndes hela den processen v\\xE4ldigt tradig. Dags att effektivisera!\"}),`\n`,(0,e.jsx)(n.p,{children:\"Det h\\xE4r var dessutom ett utm\\xE4rkt tillf\\xE4lle att skapa ett Node-baserat CLI och l\\xE4ra mig lite mer om det d\\xE5 jag inte skapat s\\xE5 m\\xE5nga s\\xE5dana f\\xF6rut men \\xE4r sedan tidigare relativt bekv\\xE4m med Node och Javascript. Inte heller hade jag tidigare anv\\xE4nt skrapning speciellt mycket med Javascrip.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"vad-beh\\xF6ver-clit-\\xE5tstakomma\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#vad-beh\\xF6ver-clit-\\xE5tstakomma\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Vad beh\\xF6ver CLI:t \\xE5tstakomma?\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Innan jag ens gjorde \",(0,e.jsx)(n.code,{children:\"git init\"}),\" funderade jag \\xF6ver hur jag ville att mitt CLI skulle fungera, vad det skulle spotta ut f\\xF6r information och b\\xF6rjade fundera p\\xE5 vilka npm-paket som skulle kunna underl\\xE4tta och g\\xF6ra CLI:t b\\xE4ttre.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Min tanke var att CLI:t f\\xF6rst skulle fr\\xE5ga anv\\xE4ndaren efter en s\\xF6kstr\\xE4ng att s\\xF6ka efter, g\\xF6ra en request till IMDb:s hemsida och s\\xF6kresultat, skrapa den information som beh\\xF6vdes och spotta ut det i terminalen p\\xE5 ett \\xF6versk\\xE5dligt s\\xE4tt. Jag t\\xE4nkte mig att det fr\\xE4mst handla om att skrapa fram titlar, \\xE5rtal och sj\\xE4lvfallet IMDb ID:n.\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"struktur\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#struktur\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Struktur\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"D\\xE5 jag i ett slags version 1.0.0 av CLI:t endast beh\\xF6ver ett enkelt s\\xE4tt att komma \\xE5t IMDb ID:n skulle man lika g\\xE4rna kunna skriva all kod i en och samma \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" fil. Men ska CLI:t l\\xE4ngre fram kunna g\\xF6ra mer saker blir det lite sv\\xE5rt att skala projektet och bygga vidare p\\xE5 det s\\xE5 d\\xE4rf\\xF6r valde jag att dela upp CLI:t i tv\\xE5 olika klasser och en \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\". Klasserna som skapades var en IMDb klass och en klass \",(0,e.jsx)(n.code,{children:\"queryHelper\"}),\" f\\xF6r att genomf\\xF6ra lite manipulering av str\\xE4ngar.\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"npm-paket\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#npm-paket\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"NPM-paket\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Jag anv\\xE4de mig av f\\xF6ljande npm-paket f\\xF6r att skapa mitt CLI:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/chalk\",children:\"Chalk\"}),\" - F\\xF6r att s\\xE4tta lite f\\xE4rg p\\xE5 bland annat \",(0,e.jsx)(n.code,{children:\"console.log\"}),\".\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/request\",children:\"Request\"}),\" - Ett enkelt s\\xE4tt att g\\xF6ra http requests.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/cheerio\",children:\"Cheerio\"}),\" - F\\xF6r att skrapa IMDbs hemsida med en jQuery-liknande syntax.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/clear\",children:\"Clear\"}),\" - Ett paket vars enkla uppgift \\xE4r att rensa terminalf\\xF6nstret.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/figlet\",children:\"Figlet\"}),\" - Ett paket f\\xF6r att enkelt skapa ascii-konst av text. CLI:t m\\xE5ste ju vara lite snyggt ocks\\xE5.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/inquirer\",children:\"Inquirer\"}),\" - Anv\\xE4ndes f\\xF6r att fr\\xE5ga anv\\xE4ndaren om s\\xF6kstr\\xE4ng och validera svaret.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/ora\",children:\"Ora\"}),\" - Ett paket f\\xF6r att ge anv\\xE4ndaren lite feedback i form av en spinner undertiden som IMDb skrapas och s\\xF6kresultatet samlas in.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/table-master\",children:\"Table-master\"}),\" - Anv\\xE4ndes f\\xF6r att visa upp s\\xF6kresultatet i en tabell.\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"genomf\\xF6rande\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#genomf\\xF6rande\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Genomf\\xF6rande\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Hur bygger man d\\xE5 ett Node-baserat CLI f\\xF6r att skrapa IMDb:s hemsida och visa upp resultatet? Jag t\\xE4nkte h\\xE4r g\\xE5 igenom steg f\\xF6r steg hur det skulle kunna se ut, f\\xF6rhoppningsvis utan att g\\xE5 in i f\\xF6r noga detalj om allt.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Starta projektet med en \",(0,e.jsx)(n.code,{children:\"npm init\"}),\" f\\xF6r att skapa generera en \",(0,e.jsx)(n.strong,{children:\"package.json\"}),\" f\\xF6ljt av en \",(0,e.jsx)(n.code,{children:\"git init\"}),\". Varf\\xF6r inte anv\\xE4nda git liksom?\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Installera d\\xE4refter alla npm-paket som kommer att anv\\xE4ndas:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"--save\"}),\" chalk request cheerio \",(0,e.jsx)(n.span,{className:\"token function\",children:\"clear\"}),` figlet inquirer ora table-master\n`]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Skapa d\\xE4refter en \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" fil som agerar sj\\xE4lva utg\\xE5ngspunkten f\\xF6r CLI:t. De enda npm-paket som beh\\xF6vs i just denna fil \\xE4r \",(0,e.jsx)(n.code,{children:\"clear\"}),\" och \",(0,e.jsx)(n.code,{children:\"inquirer\"}),\" d\\xE5 de \\xF6vriga paketen fr\\xE4mst kommer anv\\xE4ndas i ett senare skeda av IMDb klassen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6ljande kod finns i min \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\":\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"index.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" clear \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'clear'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inquirer \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'inquirer'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inputError \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Please enter a query to search for...'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// setup of question\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" question \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'input'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'searchString'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"11\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token literal-property property\",children:\"message\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'What do you want to search for?\\\\n'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"12\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function-variable function\",children:\"validate\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"value\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),` inputError\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"13\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"15\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"16\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// clear the terminal window\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"17\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"clear\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"18\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"19\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// display colorful IMDb header\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"20\",children:[(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"IMDb\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"displayHeader\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"21\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"22\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// prompt the user for a search string\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"23\",children:[\"inquirer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"prompt\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"question\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"then\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"answer\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"24\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" query \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"queryHelper\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"answer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"searchString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"25\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" result \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"IMDb\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"getSanitizedQuery\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" answer\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"searchString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"26\",children:[\"  result\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"scrape\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"27\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"28\",children:`\n`})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6rst och fr\\xE4mst anv\\xE4nds \",(0,e.jsx)(n.code,{children:\"require\"}),\" f\\xF6r att f\\xE5 in de npm-paket som anv\\xE4nds av filen, men \\xE4ven importeras de tv\\xE5 klasserna som \\xE4n s\\xE5 l\\xE4nge inte finns.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.code,{children:\"const question = [...]\"}),\" deklarerar en fr\\xE5ga med en tillh\\xF6rande validering. Om inte valideringen g\\xE5r igenom s\\xE5 skrivs \",(0,e.jsx)(n.code,{children:\"inputError\"}),\" str\\xE4ngen ut i terminalen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"D\\xE4refter rensas terminalf\\xF6nstret p\\xE5 samma s\\xE4tt som att sj\\xE4lv skriva \",(0,e.jsx)(n.code,{children:\"clear\"}),` i terminalen.\nSedan kallas en statisk metod fr\\xE5n IMDb klassen som av sitt namn kanske avsl\\xF6jar vad den g\\xF6r, men mer om metoden n\\xE4r jag g\\xE5r igenom min IMDb klass.`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"L\\xE4ngst ner i filen skapas sj\\xE4lva prompten med hj\\xE4lp av \",(0,e.jsx)(n.code,{children:\"inquirer\"}),\" d\\xE4r den tidigare question-arrayen skickas in och ett svar ges i ett promise.\",(0,e.jsx)(n.br,{}),`\n`,\"Inuti detta promise skapas f\\xF6rst en ny instans av \",(0,e.jsx)(n.code,{children:\"queryHelper\"}),\" klassen och en instans av IMDb klassen skapas med hj\\xE4lp av en tv\\xE5 parametrar:\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Den f\\xF6rsta parametern \",(0,e.jsx)(n.code,{children:\"query.getSanitizedQuer()\"}),' g\\xE5r ut p\\xE5 omvandla en str\\xE4ng fr\\xE5n \"Harry Potter\" till \"Harry+Potter\" d\\xE5 det formatet beh\\xF6vs senare n\\xE4r IMDbs webbplats skrapas.']}),`\n`,(0,e.jsxs)(n.li,{children:[\"Den andra parametern \",(0,e.jsx)(n.code,{children:\"answer.searchString\"}),' \\xE4r s\\xF6kstr\\xE4ngen som anv\\xE4ndaren matar in i or\\xF6rd form, det vill s\\xE4ga exmpelvis \"Harry Potter\". Varf\\xF6r det \\xE4r intressant att h\\xE5lla kvar i originals\\xF6kstr\\xE4ngen kommer visa sig i sj\\xE4lva IMDb klassen.']}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"Men innan vi g\\xE5r igenom sj\\xE4lva IMDb klassen d\\xE4r sj\\xE4lva tyngdlyften i det h\\xE4r CLI:t h\\xE4nder g\\xE5r vi igenom queryHelper klassen d\\xE5 den (i alla fall f\\xF6r version 1.0.0) \\xE4r relativt liten.\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"queryHelper.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"exports\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"queryHelper\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Creates an instance of queryHelper.\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"initialQuery\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@memberof\"}),` queryHelper\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"7\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"constructor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"initialQuery\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"8\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" initialQuery\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number highlight-line\",line:\"9\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * returns the query but sanitized\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * replace all spaces with pluses\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@returns\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"15\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getSanitizedQuery\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"16\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-source language-regex\",children:\" \"}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'+'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"17\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"18\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"19\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Match IMDb ID's from hrefs\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"20\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"21\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@static\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"22\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"href\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"23\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@returns\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),` containing IMDb ID\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"24\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"25\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"static\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"getIMDbID\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token parameter\",children:\"href\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"26\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" href\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"match\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsxs)(n.span,{className:\"token regex-source language-regex\",children:[\"tt\",(0,e.jsx)(n.span,{className:\"token group punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token char-set class-name\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token quantifier number\",children:\"*\"}),(0,e.jsx)(n.span,{className:\"token group punctuation\",children:\")\"}),(0,e.jsxs)(n.span,{className:\"token char-class\",children:[(0,e.jsx)(n.span,{className:\"token char-class-punctuation punctuation\",children:\"[\"}),(0,e.jsxs)(n.span,{className:\"token range\",children:[\"0\",(0,e.jsx)(n.span,{className:\"token range-punctuation operator\",children:\"-\"}),\"9\"]}),(0,e.jsx)(n.span,{className:\"token char-class-punctuation punctuation\",children:\"]\"})]})]}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"toString\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"27\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"28\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Klassen best\\xE5r allts\\xE5 av en konstruktor och tv\\xE5 metoder. Den f\\xF6rsta metoden \",(0,e.jsx)(n.code,{children:\"getSanitizedQuery()\"}),\" returnerar en s\\xF6kstr\\xE4ng d\\xE4r alla mellanrum i str\\xE4ngen har bytts ut mot plustecken. Den andra metoden \",(0,e.jsx)(n.code,{children:\"getIMDbID()\"}),\" tar \",(0,e.jsx)(n.strong,{children:\"href\"}),\" som parameter och resturnerar sj\\xE4lva IMDb ID:t fr\\xE5n en URL. Den extraherar allts\\xE5 \",(0,e.jsx)(n.strong,{children:\"tt0411008\"}),\" fr\\xE5n \",(0,e.jsx)(n.strong,{children:(0,e.jsx)(n.a,{href:\"http://www.imdb.com/title/tt0411008/\",children:\"http://www.imdb.com/title/tt0411008/\"})}),\" Metoden \\xE4r statisk d\\xE4rf\\xF6r att IMDb klassen anv\\xE4nder sig av denna metod, men det fanns inget behov av att skapa en ny instans av \",(0,e.jsx)(n.code,{children:\"queryHelper\"}),\" inuti IMDb klassen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Slutligen har vi kvar sj\\xE4lva IMDb klassen \",(0,e.jsx)(n.strong,{children:\"IMDb.js\"}),\" som best\\xE5r av ett antal metoder.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"F\\xF6rst s\\xE5 anv\\xE4nds require f\\xF6r att f\\xE5 in de \\xF6vriga npm-paket som \\xE4nnu inte anv\\xE4nts, men ocks\\xE5 queryHelper klassen:\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" request \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'request'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" cheerio \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'cheerio'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" ora \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'ora'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" tab \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'table-master'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" chalk \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'chalk'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" figlet \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'figlet'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" queryHelper \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'./queryHelper'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"D\\xE4refter skapas och exporteras sj\\xE4lva IMDb klassen med en konstruktor:\"}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"exports\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:(0,e.jsx)(n.span,{className:\"token maybe-class-name\",children:\"IMDb\"})}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Creates an instance of IMDb.\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"query\"}),` - search query that has been sanitized\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"6\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"string\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"originalQuery\"}),` - The original search query\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"  */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"constructor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" originalQuery\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" query\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"originalQuery\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" originalQuery\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"11\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"url\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"http://www.imdb.com/search/title?title=\"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"query\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"12\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"13\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"outputColor\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" chalk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"hex\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'#f3ce13'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"15\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:['Konstruktorn har tv\\xE5 parametrar och det \\xE4r allts\\xE5 sj\\xE4lva s\\xF6kstr\\xE4ngen i dess original och i den \"plussade\" formen. D\\xE4refter s\\xE4tts ',(0,e.jsx)(n.code,{children:\"this.url\"}),\" med hj\\xE4lp av den plussade s\\xF6kstr\\xE4ngen som i en annan metod kommer anv\\xE4ndas f\\xF6r att g\\xF6ra en reuqest och skrapa IMDb.\",(0,e.jsx)(n.br,{}),`\n`,(0,e.jsx)(n.code,{children:\"this.results\"}),\" \\xE4r en tom array som senare ska fyllas p\\xE5 med s\\xF6kresultat och \",(0,e.jsx)(n.code,{children:\"this.outputColor\"}),\" anv\\xE4nder npm-paketet \",(0,e.jsx)(n.code,{children:\"chalk\"}),\" f\\xF6r att spara ner IMDb:s gula f\\xE4rg som i en annan metod kommer anv\\xE4ndas f\\xF6r lite f\\xE4rgrannare utskrift i terminalen.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"D\\xE4refter inneh\\xE5ller klassen en statisk metod f\\xF6r att visa lite ascii-text. Metoden \\xE4r statisk eftersom att den anropas i \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" innan en instans av sj\\xE4lva IMDb klassen har skapats. Eftersom att metoden anropas innan klassen har skapats g\\xE5r den inte att anv\\xE4nda IMDbf\\xE4rgen som deklarerats som \",(0,e.jsx)(n.code,{children:\"this.outputColor\"}),\" i klassens konstruktor. Det kan \\xE4nd\\xE5 vara bra att ha denna f\\xE4rg sparad om den gula f\\xE4rgen skulle anv\\xE4ndas l\\xE4ngre fram till andra saker ocks\\xE5.\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Static method to display IMDB header for the CLI\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"static\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"displayHeader\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"var\"}),\" imdbColor \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" chalk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"hex\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'#f3ce13'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"imdbColor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"figlet\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"textSync\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'IMDb'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r att bygga ut \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" arrayen skapas ytterligare en metod p\\xE5 IMDb klassen som kan se ut p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Push to results array\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"title\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"5\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"year\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"6\",children:(0,e.jsxs)(n.span,{className:\"token doc-comment comment\",children:[\"   * \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"@param\"}),\" \",(0,e.jsxs)(n.span,{className:\"token class-name\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"any\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token parameter\",children:\"imdbID\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"createSearchResult\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" year\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" imdbID\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"push\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" year\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" imdbID\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Denna metod anv\\xE4nder \",(0,e.jsx)(n.code,{children:\"push\"}),\" f\\xF6r att bygga ut arrayen med ett objekt som inneh\\xE5ller titel, \\xE5rtal och IMDb ID.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"IMDb klassen inneh\\xE5ller sedan en n\\xE5got tung metod f\\xF6r att utf\\xF6ra sj\\xE4lva skrapandet av IMDb och komma \\xE5t s\\xF6kresultaten. Metoden g\\xE5r kort och gott ut p\\xE5 att g\\xF6ra en request till IMDb och loopa genom ett ex antal s\\xF6kresultat och pusha dessa till \",(0,e.jsx)(n.code,{children:\"this.results\"})]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\" \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Perform the scrape of imdb to gather search results\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   *\n`})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"scrape\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"6\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" spinner \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"ora\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Searching IMDb. Please wait...'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"start\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token function\",children:\"request\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"url\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" response\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" body\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"9\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"!\"}),\"error\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"11\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"12\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" $ \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" cheerio\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"load\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"body\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"13\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"14\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'.lister-item-header a'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"each\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token parameter\",children:[\"index\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" value\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"15\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// create variables to be pushed as search result\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"16\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" title \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"text\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"17\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" year \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"next\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"text\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"replace\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token regex\",children:[(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-source language-regex\",children:(0,e.jsx)(n.span,{className:\"token char-set class-name\",children:\"\\\\D\"})}),(0,e.jsx)(n.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,e.jsx)(n.span,{className:\"token regex-flags\",children:\"g\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"''\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"18\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"let\"}),\" imdbID \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"outputColor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"queryHelper\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"getIMDbID\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"$\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"value\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"attr\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'href'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"19\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"20\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"createSearchResult\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"title\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" year\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" imdbID\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"21\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"22\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// stop the loop after 15 items\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"23\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"return\"}),\" index \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"14\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"24\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"25\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"26\",children:[\"        spinner\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"stop\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"27\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"renderSearchResults\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"28\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"29\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"30\",children:[\"        spinner\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"stop\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"31\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"Program exit with error: \"}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),\"error\",(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"32\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"33\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"34\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"N\\xE5gra nyckeldetaljer i den h\\xE4r metoden \\xE4r att f\\xF6rst och fr\\xE4mst anv\\xE4nds \",(0,e.jsx)(n.code,{children:\"ora\"}),\" npm-paketet f\\xF6r att starta en spinner som ger anv\\xE4ndaren lite feedback. S\\xF6kresultaten loopas genom med hj\\xE4lp av \",(0,e.jsx)(n.code,{children:\"cheerio\"}),\" och \",(0,e.jsx)(n.code,{children:\"$(.lister-item-header a).each()\"}),\" d\\xE4r titlar, \\xE5rtal och id:n sparas till \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" med hj\\xE4lp av metoden \",(0,e.jsx)(n.code,{children:\"this.createSearchResult()\"}),\".\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"N\\xE4r loopen har stannat efter att de femton f\\xF6rsta s\\xF6kresultaten har pushats till \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" stoppas spinnern med hj\\xE4lp av \",(0,e.jsx)(n.code,{children:\"spinner.stop()\"}),\" och en tabell med s\\xF6kresultaten visas upp i terminalen med hj\\xE4lp av metoden \",(0,e.jsx)(n.code,{children:\"this.renderSearchResults()\"}),\". Den metoden ser ut p\\xE5 f\\xF6ljande vis:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"IMDb.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`/**\n`})]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"2\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * Render either a table with search results\n`})}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"3\",children:(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:`   * or a message of no search results were found\n`})}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"4\",children:[(0,e.jsx)(n.span,{className:\"token doc-comment comment\",children:\"   */\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"renderSearchResults\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"6\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token known-class-name class-name\",children:\"Object\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"keys\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"length\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"===\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"7\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"chalk\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"red\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsxs)(n.span,{className:\"token template-string\",children:[(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'Could not find any search results for \"'}),(0,e.jsxs)(n.span,{className:\"token interpolation\",children:[(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"${\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"originalQuery\"}),(0,e.jsx)(n.span,{className:\"token interpolation-punctuation punctuation\",children:\"}\"})]}),(0,e.jsx)(n.span,{className:\"token string\",children:'\". Please try again.'}),(0,e.jsx)(n.span,{className:\"token template-punctuation string\",children:\"`\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"8\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword control-flow\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"9\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token console class-name\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token method function property-access\",children:\"table\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"results\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"11\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Denna metod kollar f\\xF6rst om \",(0,e.jsx)(n.code,{children:\"this.results\"}),\" \\xE4r tom (inga s\\xF6kresultat hittades) eller ej och antingen renderar en tabell med s\\xF6kresultaten eller ger feedback om att inga s\\xF6kresultat kunde hittas. H\\xE4r anv\\xE4nds \",(0,e.jsx)(n.code,{children:\"this.originalQuery\"}),\" som allts\\xE5 exempelvis skulle motsvara \",(0,e.jsx)(n.code,{children:\"Harry Potter\"}),\" och inte \",(0,e.jsx)(n.code,{children:\"Harry+Potter\"}),\".\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"g\\xF6r-clit-k\\xF6rbart-globalt\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#g\\xF6r-clit-k\\xF6rbart-globalt\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"G\\xF6r CLI:t k\\xF6rbart globalt\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"F\\xF6r att slippa skriva \",(0,e.jsx)(n.code,{children:\"node index.js\"}),\" och hela tiden befinna sig i samma path som \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\" finns det ett enkelt knep att g\\xF6ra det h\\xE4r CLI:t globalt tillg\\xE4ngligt genom att endast skriva exempelvis \",(0,e.jsx)(n.code,{children:\"imdb\"}),\" i terminalen, oberoende vilken path man har.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"B\\xF6rja med att uppgradera \",(0,e.jsx)(n.strong,{children:\"package.json\"}),\" med f\\xF6ljande:\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"package.json\"}),(0,e.jsx)(n.pre,{className:\"language-json\",children:(0,e.jsxs)(n.code,{className:\"language-json code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"bin\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token property\",children:'\"imdb\"'}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"./index.js\"'}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Detta binder kommandot \",(0,e.jsx)(n.code,{children:\"imdb\"}),\" till att k\\xF6ra \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\". L\\xE4gg d\\xE4refter till f\\xF6ljande shebang h\\xF6gst upp i \",(0,e.jsx)(n.strong,{children:\"index.js\"}),\":\"]}),`\n`,(0,e.jsx)(n.div,{className:\"rehype-code-title\",children:\"index.js\"}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"language-javascript code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"1\",children:[(0,e.jsx)(n.span,{className:\"token hashbang comment\",children:\"#!/usr/bin/env node\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"2\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" clear \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'clear'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"3\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"const\"}),\" inquirer \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"require\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'inquirer'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line line-number\",line:\"4\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line line-number\",line:\"5\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"//........\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Installera d\\xE4refter CLI:t globalt med hj\\xE4lp av:\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"$ \",(0,e.jsx)(n.span,{className:\"token function\",children:\"npm\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"install\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"-g\"}),`\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"Nu \\xE4r CLI:t k\\xF6rbart globalt \\u{1F389}\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Det var kort och gott all funktionalitet som finns i skrivande stund i detta Node-baserade CLI som skrapar IMDb efter s\\xF6kresultat och IMDb ID:n. Det f\\xE4rdiga CLI:et finns p\\xE5 \",(0,e.jsx)(n.a,{href:\"https://github.com/danielv14/imdb-cli\",children:\"GitHub\"})]})]})}function v(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(p,a)})):p(a)}var w=v;return f(j);})();\n;return Component;"},"_id":"posts/node-cli-for-att-skrapa-imdb.mdx","_raw":{"sourceFilePath":"posts/node-cli-for-att-skrapa-imdb.mdx","sourceFileName":"node-cli-for-att-skrapa-imdb.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/node-cli-for-att-skrapa-imdb"},"type":"Post","url":"/blogg/node-cli-for-att-skrapa-imdb","dateFormatted":"2017-09-01"},"nextPost":{"title":"IMDb CLI version 1.0.1 till 2.3.0","date":"2019-07-08T00:00:00.000Z","summary":"Detta √§r vad som har h√§nt fr√•n version 1.0.1 till version 2.3.0.","body":{"raw":"\nHur mycket kan man g√∂ra med ett \"enkelt\" CLI f√∂r att h√§mta information om filmer och serier fr√•n IMDb? Ganska mycket visar det sig. Det h√§r √§r vad som har h√§nt med IMDb verktyget fr√•n version 1.0.1 till 2.3.0.\n\nJag har tidigare [skrivit](/blogg/node-cli-for-att-skrapa-imdb) lite om det node-baserade CLI verktyg jag skapade f√∂r att enkelt komma √•t filmers och tv-seriers \"IMDb ID:n\". Nu har jag anv√§nt verson 1.0.1 av verktyget sen i septemper 2017 och k√§nde att det var dags att g√∂ra CLI:t mer flexibelt, d√• jag av och till k√§nde att det var viss funktionalitet som saknades.\n\n## Ny funktionalitet\n\nTill och fr√•n k√§ndes CLI:t inte tillr√§ckligt flexibelt n√§r jag anv√§nde det och m√•nga g√•nger hade jag velat ha ett b√§ttre sammanhang n√§r s√∂kresultat presenterades i en tabell i terminalen. I 1.0.0 visades enbart titlar, √•rtal och IMDB ID:n. Jag k√§nde √§ven att det vore smidigt att enbart s√∂ka p√• antingen filmer eller serier och kunna sortera s√∂kresultatet utifr√•n √•rtal eller titlar.\n\nBilden h√§r nedan sammanfattar den nya funktionalitet har tillkommit under resans g√•ng fr√•n 1.0.1 till 2.3.0.\n\n![IMDB-cli-help](/img/posts/imdb-help-text.png)\n\n- `-v --version` - Skriver ut versionen av CLI:t.\n- `-p --plot` - Anv√§nder man denna flagga s√• anv√§nds filmernas och seriernas handling i s√∂kresultatet. Default s√• trunkeras handling till ett visst antal tecken.\n- `-l --limit-plot [number]` - Denna flagga l√•ter anv√§ndaren sj√§lv best√§mma hur l√•ng handlingen ska vara i s√∂kresultatet innan det trunkeras.\n- `-t --title` - Denna flagga g√∂r att man kan s√∂ka direkt n√§r man anropar CLI:t. Tidigare s√• skrev man bara `imdb` och tyckte _ENTER_ f√∂r att sedan mata in en titel att s√∂ka efter.\n- `-m --movies` - S√∂k endast efter filmer.\n- `-s --series` - S√∂k endast efter serier\n- `-o --order-by [column]` - Med denna flagga kan man sortera antingen i bokstavsordning f√∂r titlar eller i fallande ordning efter √•rtal.\n- `-h --help` - Visar hj√§lptext om hur CLI:t kan anv√§ndas.\n\n## Utvecklingsmilj√∂n\n\nEn hel del har h√§nt _behind the scenes_ n√§r det g√§ller 1.0.1 till 2.3.0 av IMDB CLI:t ocks√• - allt ifr√•n argument parsning till git hooks och testning.\n\n### Parsa argument\n\nM√∂jligheten att parsa argument, det vill s√§ga anv√§nda `imdb --movies --title \"star wars\"` f√∂r att direkt s√∂ka enbart efter Star Wars filmer, kommer ifr√•n det popul√§ra npm paketet [commander](https://www.npmjs.com/package/commander).\n\nCommander g√∂r det v√§ldigt enkelt att skriva node-baserade CLI verktyg. Se bara det f√∂renklade exemplet nedan som visar hur `-p --plot` flaggan anv√§nds f√∂r att skapa upp en IMDb klass d√§r s√∂kresultat ska inkludera handlingar.\n\n```js:example-cli.js showLineNumbers\nconst program = require('commander');\n\nprogram\n  .option('-p, --plot', 'Show plot in search result')\n  .parse(process.argv);\n\nconst instance = new IMDb({showPlot: !!program.plot})\n```\n\n### Skrapning ersatt av REST API\n\nI version 1.0.1 s√• anv√§ndes npm paketet Cherrio f√∂r att skrapa sj√§lva IMDb webbplatsen efter s√∂kresultat och IMDb ID:n. I version 2.0.0 ersattes denna skrapning med API:et fr√•n [OMDb](http://www.omdbapi.com/).\n\nOm jag inte minns fel s√• var det API:et inte √∂ppet n√§r jag initalt skapade IMDb CLI:et - d√§rav att jag byggde det som en scraper. Nu d√§remot √§r API:et √∂ppet s√• l√§nge man har en api nyckel och h√•ller sig under 1.000 requests om dagen. Dessutom har man via OMDb API:et tillg√•ng till IMDb ID:n, score!\n\n### Testning\n\nIMDb CLI anv√§nder numera Jest f√∂r unit tester, vilket underl√§ttar tryggheten i eventuell framtida refaktorering och hj√§lper till att s√§kerst√§lla kvalitet av ny funktionalitet. √Ñven om CLI:t inte har oerh√∂rt m√•nga rader kod √§r det alltid sk√∂nt att ha kodbasen (n√•gorlunda) testad.\n\n![IMDB-jest-test](/img/posts/imdb-jest-test.png)\n\n### Omskrivning med TypeScript\n\nHela CLI:et √§r sedan 2.3.0 omskrivet med TypeScript. Detta betyder att CLI:et numera har en byggprocess d√§r k√§llkoden finns i en `src/` mapp med TypeScript filer som sedan byggs till en `dist/` mapp.\n\nI och med att jest tester redan fanns innan omskrivningen till TypeScript genomf√∂rdes s√• blev refaktoreringen i och med befintliga tester en n√•got mer trygg process.\n\n**Runt 60 fel** hittades i koden initialt i √∂verg√•ngen till TypeScript. De flesta felen berodde p√• att variabler, funktionsparametrar och s√• vidare inte var typade - men ett och annan potentiellt problem kunde r√§ttas till och och med √∂verg√•ngne till TypeScript.\n\nNu n√§r koden √§r skriven med TypeScript och √§ven testas med Jest s√• kommer framtida refaktorering och funktionstillv√§xt bli enklare d√• regression b√§ttre kan undvikas och problem i koden kan uppt√§ckas snabbare.\n\n### Git hooks\n\nTv√• stycken git hooks anv√§nds f√∂r att f√∂rs√∂ka f√∂rhindra problem, f√∂rebygga buggar och se till att koden har korrekt formatering innan den committas. F√∂r att hantera git hooks s√• anv√§nds npm paketet [Husky](https://www.npmjs.com/package/husky).\n\n- **pre-commit** - Innan n√•got committas s√• kollas det efter TypeScript errors och tslint anv√§nds f√∂r att linta alla `*.ts` kod.\n- **pre-push** - F√∂r att det ens ska g√• att pusha n√•got till en remote branch s√• m√•ste alla tester g√• igenom f√∂rst. Detta g√∂r att det g√•r lite l√•ngsammare om man committar och pushar ofta, men fungerar som en fail safe f√∂r att f√∂rhindra regression.\n\n## Kvar att g√∂ra?\n\nVad finns d√• kvar att g√∂ra, tro? I skrivande stund vet jag inte riktigt faktiskt. Kanske har jag en lista med nya features att g√• igenom n√§r jag anv√§nt IMDb CLI:t i tv√• √•r till och sl√§pper version 3.0.0 eller dylikt...\n\n![IMDB-cli-in-action](/img/posts/imdb-cli-in-action.png)\n","code":"var Component=(()=\u003e{var h=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(a,e)=\u003e()=\u003e(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=\u003e{for(var t in e)i(a,t,{get:e[t],enumerable:!0})},l=(a,e,t,s)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let r of p(e))!g.call(a,r)\u0026\u0026r!==t\u0026\u0026i(a,r,{get:()=\u003ee[r],enumerable:!(s=m(e,r))||s.enumerable});return a};var v=(a,e,t)=\u003e(t=a!=null?h(k(a)):{},l(e||!a||!a.__esModule?i(t,\"default\",{value:a,enumerable:!0}):t,a)),b=a=\u003el(i({},\"__esModule\",{value:!0}),a);var d=u((x,c)=\u003e{c.exports=_jsx_runtime});var D={};f(D,{default:()=\u003ey,frontmatter:()=\u003eN});var n=v(d()),N={title:\"IMDb CLI version 1.0.1 till 2.3.0\",summary:\"Detta \\xE4r vad som har h\\xE4nt fr\\xE5n version 1.0.1 till version 2.3.0.\",date:new Date(1562544e6)};function o(a){let e=Object.assign({p:\"p\",a:\"a\",h2:\"h2\",span:\"span\",img:\"img\",ul:\"ul\",li:\"li\",code:\"code\",em:\"em\",h3:\"h3\",div:\"div\",pre:\"pre\",strong:\"strong\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:'Hur mycket kan man g\\xF6ra med ett \"enkelt\" CLI f\\xF6r att h\\xE4mta information om filmer och serier fr\\xE5n IMDb? Ganska mycket visar det sig. Det h\\xE4r \\xE4r vad som har h\\xE4nt med IMDb verktyget fr\\xE5n version 1.0.1 till 2.3.0.'}),`\n`,(0,n.jsxs)(e.p,{children:[\"Jag har tidigare \",(0,n.jsx)(e.a,{href:\"/blogg/node-cli-for-att-skrapa-imdb\",children:\"skrivit\"}),' lite om det node-baserade CLI verktyg jag skapade f\\xF6r att enkelt komma \\xE5t filmers och tv-seriers \"IMDb ID:n\". Nu har jag anv\\xE4nt verson 1.0.1 av verktyget sen i septemper 2017 och k\\xE4nde att det var dags att g\\xF6ra CLI:t mer flexibelt, d\\xE5 jag av och till k\\xE4nde att det var viss funktionalitet som saknades.']}),`\n`,(0,n.jsxs)(e.h2,{id:\"ny-funktionalitet\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#ny-funktionalitet\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Ny funktionalitet\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Till och fr\\xE5n k\\xE4ndes CLI:t inte tillr\\xE4ckligt flexibelt n\\xE4r jag anv\\xE4nde det och m\\xE5nga g\\xE5nger hade jag velat ha ett b\\xE4ttre sammanhang n\\xE4r s\\xF6kresultat presenterades i en tabell i terminalen. I 1.0.0 visades enbart titlar, \\xE5rtal och IMDB ID:n. Jag k\\xE4nde \\xE4ven att det vore smidigt att enbart s\\xF6ka p\\xE5 antingen filmer eller serier och kunna sortera s\\xF6kresultatet utifr\\xE5n \\xE5rtal eller titlar.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Bilden h\\xE4r nedan sammanfattar den nya funktionalitet har tillkommit under resans g\\xE5ng fr\\xE5n 1.0.1 till 2.3.0.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/img/posts/imdb-help-text.png\",alt:\"IMDB-cli-help\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-v --version\"}),\" - Skriver ut versionen av CLI:t.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-p --plot\"}),\" - Anv\\xE4nder man denna flagga s\\xE5 anv\\xE4nds filmernas och seriernas handling i s\\xF6kresultatet. Default s\\xE5 trunkeras handling till ett visst antal tecken.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-l --limit-plot [number]\"}),\" - Denna flagga l\\xE5ter anv\\xE4ndaren sj\\xE4lv best\\xE4mma hur l\\xE5ng handlingen ska vara i s\\xF6kresultatet innan det trunkeras.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-t --title\"}),\" - Denna flagga g\\xF6r att man kan s\\xF6ka direkt n\\xE4r man anropar CLI:t. Tidigare s\\xE5 skrev man bara \",(0,n.jsx)(e.code,{children:\"imdb\"}),\" och tyckte \",(0,n.jsx)(e.em,{children:\"ENTER\"}),\" f\\xF6r att sedan mata in en titel att s\\xF6ka efter.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-m --movies\"}),\" - S\\xF6k endast efter filmer.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-s --series\"}),\" - S\\xF6k endast efter serier\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-o --order-by [column]\"}),\" - Med denna flagga kan man sortera antingen i bokstavsordning f\\xF6r titlar eller i fallande ordning efter \\xE5rtal.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"-h --help\"}),\" - Visar hj\\xE4lptext om hur CLI:t kan anv\\xE4ndas.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"utvecklingsmilj\\xF6n\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#utvecklingsmilj\\xF6n\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Utvecklingsmilj\\xF6n\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"En hel del har h\\xE4nt \",(0,n.jsx)(e.em,{children:\"behind the scenes\"}),\" n\\xE4r det g\\xE4ller 1.0.1 till 2.3.0 av IMDB CLI:t ocks\\xE5 - allt ifr\\xE5n argument parsning till git hooks och testning.\"]}),`\n`,(0,n.jsxs)(e.h3,{id:\"parsa-argument\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#parsa-argument\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Parsa argument\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"M\\xF6jligheten att parsa argument, det vill s\\xE4ga anv\\xE4nda \",(0,n.jsx)(e.code,{children:'imdb --movies --title \"star wars\"'}),\" f\\xF6r att direkt s\\xF6ka enbart efter Star Wars filmer, kommer ifr\\xE5n det popul\\xE4ra npm paketet \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/commander\",children:\"commander\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Commander g\\xF6r det v\\xE4ldigt enkelt att skriva node-baserade CLI verktyg. Se bara det f\\xF6renklade exemplet nedan som visar hur \",(0,n.jsx)(e.code,{children:\"-p --plot\"}),\" flaggan anv\\xE4nds f\\xF6r att skapa upp en IMDb klass d\\xE4r s\\xF6kresultat ska inkludera handlingar.\"]}),`\n`,(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"example-cli.js\"}),(0,n.jsx)(e.pre,{className:\"language-js\",children:(0,n.jsxs)(e.code,{className:\"language-js code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" program \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"require\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'commander'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"2\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`program\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"option\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'-p, --plot'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'Show plot in search result'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"parse\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"process\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"argv\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"6\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" instance \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"IMDb\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token literal-property property\",children:\"showPlot\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"program\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token property-access\",children:\"plot\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.h3,{id:\"skrapning-ersatt-av-rest-api\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#skrapning-ersatt-av-rest-api\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Skrapning ersatt av REST API\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I version 1.0.1 s\\xE5 anv\\xE4ndes npm paketet Cherrio f\\xF6r att skrapa sj\\xE4lva IMDb webbplatsen efter s\\xF6kresultat och IMDb ID:n. I version 2.0.0 ersattes denna skrapning med API:et fr\\xE5n \",(0,n.jsx)(e.a,{href:\"http://www.omdbapi.com/\",children:\"OMDb\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Om jag inte minns fel s\\xE5 var det API:et inte \\xF6ppet n\\xE4r jag initalt skapade IMDb CLI:et - d\\xE4rav att jag byggde det som en scraper. Nu d\\xE4remot \\xE4r API:et \\xF6ppet s\\xE5 l\\xE4nge man har en api nyckel och h\\xE5ller sig under 1.000 requests om dagen. Dessutom har man via OMDb API:et tillg\\xE5ng till IMDb ID:n, score!\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"testning\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#testning\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Testning\"]}),`\n`,(0,n.jsx)(e.p,{children:\"IMDb CLI anv\\xE4nder numera Jest f\\xF6r unit tester, vilket underl\\xE4ttar tryggheten i eventuell framtida refaktorering och hj\\xE4lper till att s\\xE4kerst\\xE4lla kvalitet av ny funktionalitet. \\xC4ven om CLI:t inte har oerh\\xF6rt m\\xE5nga rader kod \\xE4r det alltid sk\\xF6nt att ha kodbasen (n\\xE5gorlunda) testad.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/img/posts/imdb-jest-test.png\",alt:\"IMDB-jest-test\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"omskrivning-med-typescript\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#omskrivning-med-typescript\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Omskrivning med TypeScript\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hela CLI:et \\xE4r sedan 2.3.0 omskrivet med TypeScript. Detta betyder att CLI:et numera har en byggprocess d\\xE4r k\\xE4llkoden finns i en \",(0,n.jsx)(e.code,{children:\"src/\"}),\" mapp med TypeScript filer som sedan byggs till en \",(0,n.jsx)(e.code,{children:\"dist/\"}),\" mapp.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"I och med att jest tester redan fanns innan omskrivningen till TypeScript genomf\\xF6rdes s\\xE5 blev refaktoreringen i och med befintliga tester en n\\xE5got mer trygg process.\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Runt 60 fel\"}),\" hittades i koden initialt i \\xF6verg\\xE5ngen till TypeScript. De flesta felen berodde p\\xE5 att variabler, funktionsparametrar och s\\xE5 vidare inte var typade - men ett och annan potentiellt problem kunde r\\xE4ttas till och och med \\xF6verg\\xE5ngne till TypeScript.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Nu n\\xE4r koden \\xE4r skriven med TypeScript och \\xE4ven testas med Jest s\\xE5 kommer framtida refaktorering och funktionstillv\\xE4xt bli enklare d\\xE5 regression b\\xE4ttre kan undvikas och problem i koden kan uppt\\xE4ckas snabbare.\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"git-hooks\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#git-hooks\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Git hooks\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Tv\\xE5 stycken git hooks anv\\xE4nds f\\xF6r att f\\xF6rs\\xF6ka f\\xF6rhindra problem, f\\xF6rebygga buggar och se till att koden har korrekt formatering innan den committas. F\\xF6r att hantera git hooks s\\xE5 anv\\xE4nds npm paketet \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/husky\",children:\"Husky\"}),\".\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"pre-commit\"}),\" - Innan n\\xE5got committas s\\xE5 kollas det efter TypeScript errors och tslint anv\\xE4nds f\\xF6r att linta alla \",(0,n.jsx)(e.code,{children:\"*.ts\"}),\" kod.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"pre-push\"}),\" - F\\xF6r att det ens ska g\\xE5 att pusha n\\xE5got till en remote branch s\\xE5 m\\xE5ste alla tester g\\xE5 igenom f\\xF6rst. Detta g\\xF6r att det g\\xE5r lite l\\xE5ngsammare om man committar och pushar ofta, men fungerar som en fail safe f\\xF6r att f\\xF6rhindra regression.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"kvar-att-g\\xF6ra\",children:[(0,n.jsx)(e.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#kvar-att-g\\xF6ra\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Kvar att g\\xF6ra?\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Vad finns d\\xE5 kvar att g\\xF6ra, tro? I skrivande stund vet jag inte riktigt faktiskt. Kanske har jag en lista med nya features att g\\xE5 igenom n\\xE4r jag anv\\xE4nt IMDb CLI:t i tv\\xE5 \\xE5r till och sl\\xE4pper version 3.0.0 eller dylikt...\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/img/posts/imdb-cli-in-action.png\",alt:\"IMDB-cli-in-action\"})})]})}function I(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(o,a)})):o(a)}var y=I;return b(D);})();\n;return Component;"},"_id":"posts/imdb-cli-version-2-3-0.mdx","_raw":{"sourceFilePath":"posts/imdb-cli-version-2-3-0.mdx","sourceFileName":"imdb-cli-version-2-3-0.mdx","sourceFileDir":"posts","contentType":"mdx","flattenedPath":"posts/imdb-cli-version-2-3-0"},"type":"Post","url":"/blogg/imdb-cli-version-2-3-0","dateFormatted":"2019-07-08"}},"__N_SSG":true},"page":"/blogg/[slug]","query":{"slug":"skapa-ett-request-plugin-i-nuxtjs"},"buildId":"TtVAyZFKtHZIk9MUUdl5Z","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>